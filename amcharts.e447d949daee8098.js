"use strict";(self.webpackChunkamcharts=self.webpackChunkamcharts||[]).push([[803],{5013:(Mt,Xe,F)=>{F.d(Xe,{Q:()=>_e});var Ee=F(1371),G=F(4178),xe=F(3559);class _e{constructor(R,ce){if(Object.defineProperty(this,"_root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rules",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._root=R,!ce)throw new Error("You cannot use `new Class()`, instead use `Class.new()`")}static new(R){const ce=new this(R,!0);return ce.setupDefaultRules(),ce}setupDefaultRules(){}_lookupRules(R){return this._rules[R]}ruleRaw(R,ce=[]){let z=this._rules[R];z||(z=this._rules[R]=[]),ce.sort(G.qu);const{index:v,found:X}=xe.getSortedIndex(z,B=>{const ne=G.qu(B.tags.length,ce.length);return 0===ne?G.wq(B.tags,ce,G.qu):ne});if(X)return z[v].template;{const B=Ee.YS.new({});return z.splice(v,0,{tags:ce,template:B}),B}}rule(R,ce=[]){return this.ruleRaw(R,ce)}}},4618:(Mt,Xe,F)=>{F.d(Xe,{z:()=>_e});var Ee=F(867),G=F(9239),xe=F(8261);class _e extends G.W{_afterNew(){this._settings.themeTags=xe.mergeTags(this._settings.themeTags,["button"]),super._afterNew(),this._settings.background||this.set("background",Ee.c.new(this._root,{themeTags:xe.mergeTags(this._settings.themeTags,["background"])}))}_prepareChildren(){if(super._prepareChildren(),this.isDirty("icon")){const R=this._prevSettings.icon,ce=this.get("icon");ce!==R&&(this._disposeProperty("icon"),R&&R.dispose(),ce&&this.children.push(ce),this._prevSettings.icon=ce)}if(this.isDirty("label")){const R=this._prevSettings.label,ce=this.get("label");ce!==R&&(this._disposeProperty("label"),R&&R.dispose(),ce&&this.children.push(ce),this._prevSettings.label=ce)}}}Object.defineProperty(_e,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Button"}),Object.defineProperty(_e,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:G.W.classNames.concat([_e.className])})},6288:(Mt,Xe,F)=>{F.d(Xe,{k:()=>xe});var Ee=F(9239),G=F(7039);class xe extends Ee.W{constructor(){super(...arguments),Object.defineProperty(this,"chartContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(Ee.W.new(this._root,{width:G.AQ,height:G.AQ,interactiveChildren:!1}))}),Object.defineProperty(this,"bulletsContainer",{enumerable:!0,configurable:!0,writable:!0,value:Ee.W.new(this._root,{interactiveChildren:!1,isMeasured:!1,position:"absolute",width:G.AQ,height:G.AQ})})}}Object.defineProperty(xe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Chart"}),Object.defineProperty(xe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ee.W.classNames.concat([xe.className])})},7313:(Mt,Xe,F)=>{F.d(Xe,{w:()=>z,z:()=>ce});var Ee=F(7582),G=F(4889),xe=F(9239),_e=F(1171),he=F(3559),R=F(8148);class ce extends G.Zr{constructor(X,B,ne){super(ne),Object.defineProperty(this,"component",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dataContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"bullets",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"open",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"close",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.dataContext=B,this.component=X,this._settings.visible=!0,this._checkDirty()}markDirty(){this.component.markDirtyValues(this)}_startAnimation(){this.component._root._addAnimation(this)}_animationTime(){return this.component._root.animationTime}_dispose(){this.component&&this.component.disposeDataItem(this),super._dispose()}show(X){this.setRaw("visible",!0),this.component&&this.component.showDataItem(this,X)}hide(X){this.setRaw("visible",!1),this.component&&this.component.hideDataItem(this,X)}isHidden(){return!this.get("visible")}}class z extends xe.W{constructor(){super(...arguments),Object.defineProperty(this,"_data",{enumerable:!0,configurable:!0,writable:!0,value:new _e.k}),Object.defineProperty(this,"_dataItems",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_mainDataItems",{enumerable:!0,configurable:!0,writable:!0,value:this._dataItems}),Object.defineProperty(this,"valueFields",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"fields",{enumerable:!0,configurable:!0,writable:!0,value:["id"]}),Object.defineProperty(this,"_valueFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_valueFieldsF",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fieldsF",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_valuesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dataChanged",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dataGrouped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"inited",{enumerable:!0,configurable:!0,writable:!0,value:!1})}set data(X){X.incrementRef(),this._data.decrementRef(),this._data=X}get data(){return this._data}_dispose(){super._dispose(),this._data.decrementRef()}_onDataClear(){}_afterNew(){super._afterNew(),this._data.incrementRef(),this._updateFields(),this._disposers.push(this.data.events.onAll(X=>{const B=this._mainDataItems;if(this.markDirtyValues(),this._markDirtyGroup(),this._dataChanged=!0,"clear"===X.type)he.each(B,ne=>{ne.dispose()}),B.length=0,this._onDataClear();else if("push"===X.type){const ne=new ce(this,X.newValue,this._makeDataItem(X.newValue));B.push(ne),this.processDataItem(ne)}else if("setIndex"===X.type){const ne=B[X.index],L=this._makeDataItem(X.newValue);ne.bullets&&0==ne.bullets.length&&(ne.bullets=void 0),R.keys(L).forEach(P=>{ne.animate({key:P,to:L[P],duration:this.get("interpolationDuration",0),easing:this.get("interpolationEasing")})}),ne.dataContext=X.newValue}else if("insertIndex"===X.type){const ne=new ce(this,X.newValue,this._makeDataItem(X.newValue));B.splice(X.index,0,ne),this.processDataItem(ne)}else if("removeIndex"===X.type)B[X.index].dispose(),B.splice(X.index,1);else{if("moveIndex"!==X.type)throw new Error("Unknown IStreamEvent type");{const ne=B[X.oldIndex];B.splice(X.oldIndex,1),B.splice(X.newIndex,0,ne)}}this._afterDataChange()}))}_updateFields(){this.valueFields&&(this._valueFields=[],this._valueFieldsF={},he.each(this.valueFields,X=>{this.get(X+"Field")&&(this._valueFields.push(X),this._valueFieldsF[X]={fieldKey:X+"Field",workingKey:X+"Working"})})),this.fields&&(this._fields=[],this._fieldsF={},he.each(this.fields,X=>{this.get(X+"Field")&&(this._fields.push(X),this._fieldsF[X]=X+"Field")}))}get dataItems(){return this._dataItems}processDataItem(X){}_makeDataItem(X){const B={};return this._valueFields&&he.each(this._valueFields,ne=>{const L=this.get(this._valueFieldsF[ne].fieldKey);B[ne]=X[L],B[this._valueFieldsF[ne].workingKey]=B[ne]}),this._fields&&he.each(this._fields,ne=>{const L=this.get(this._fieldsF[ne]);B[ne]=X[L]}),B}makeDataItem(X){let B=new ce(this,void 0,X);return this.processDataItem(B),B}pushDataItem(X){const B=this.makeDataItem(X);return this._mainDataItems.push(B),B}disposeDataItem(X){}showDataItem(X,B){return(0,Ee.mG)(this,void 0,void 0,function*(){X.set("visible",!0)})}hideDataItem(X,B){return(0,Ee.mG)(this,void 0,void 0,function*(){X.set("visible",!1)})}_clearDirty(){super._clearDirty(),this._valuesDirty=!1}_afterDataChange(){}_afterChanged(){if(super._afterChanged(),this._dataChanged){const X="datavalidated";this.events.isEnabled(X)&&this.events.dispatch(X,{type:X,target:this}),this._dataChanged=!1}this.inited=!0}markDirtyValues(X){this.markDirty(),this._valuesDirty=!0}_markDirtyGroup(){this._dataGrouped=!1}markDirtySize(){this._sizeDirty=!0,this.markDirty()}}Object.defineProperty(z,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Component"}),Object.defineProperty(z,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:xe.W.classNames.concat([z.className])})},6606:(Mt,Xe,F)=>{F.d(Xe,{x:()=>z});var Ee=F(3232);function G(v,X){for(let B=0,ne=X.length;B<ne;B++){const L=X[B];if(L.length>0){let P=L[0];if(P.length>0){let H=P[0];v.moveTo(H.x,H.y);for(let ue=0,M=L.length;ue<M;ue++)xe(v,L[ue])}}}}function xe(v,X){for(let B=0,ne=X.length;B<ne;B++){const L=X[B];v.lineTo(L.x,L.y)}}class z extends Ee.T{_beforeChanged(){super._beforeChanged(),(this.isDirty("points")||this.isDirty("segments")||this._sizeDirty||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){const X=this.get("points"),B=this.get("segments");if(X&&X.length>0){let ne=X[0];this._display.moveTo(ne.x,ne.y),G(this._display,[[X]])}else if(B)G(this._display,B);else if(!this.get("draw")){let ne=this.width(),L=this.height();this._display.moveTo(0,0),this._display.lineTo(ne,L)}}}}Object.defineProperty(z,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Line"}),Object.defineProperty(z,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ee.T.classNames.concat([z.className])})},9005:(Mt,Xe,F)=>{F.d(Xe,{x:()=>R});var Ee=F(7039),G=F(1262),xe=F(8490),_e=F(9472),he=F(8261);class R extends G._{constructor(){super(...arguments),Object.defineProperty(this,"_flipped",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this._textKeys.push("textType","kerning"),super._afterNew()}_makeText(){this._text=this.children.push(xe.f.new(this._root,{}))}baseRadius(){const z=this.getPrivate("radius",0),v=this.getPrivate("innerRadius",0),X=this.get("baseRadius",0);return v+he.relativeToValue(X,z-v)}radius(){const z=this.get("inside",!1);return this.baseRadius()+this.get("radius",0)*(z?-1:1)}_updateChildren(){if(super._updateChildren(),this.isDirty("baseRadius")||this.isPrivateDirty("radius")||this.isPrivateDirty("innerRadius")||this.isDirty("labelAngle")||this.isDirty("radius")||this.isDirty("inside")||this.isDirty("orientation")||this.isDirty("textType")){const z=this.get("textType","adjusted"),v=this.get("inside",!1),X=this.get("orientation");let B=_e.normalizeAngle(this.get("labelAngle",0));this._text.set("startAngle",this.get("labelAngle",0)),this._text.set("inside",v);const ne=_e.sin(B),L=_e.cos(B);let P=this.baseRadius(),H=this.radius();if(this._display.angle=0,"circular"==z)this.setAll({paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}),this._text.set("orientation",X),this._text.set("radius",H);else{0==P&&(B=0,H=0);let ue=H*L,M=H*ne;"radial"==z?(this.setRaw("x",ue),this.setRaw("y",M),B<90||B>270||"auto"!=X?(this._display.angle=B,this._flipped=!1):(this._display.angle=B+180,this._flipped=!0),this._dirty.rotation=!1):"adjusted"==z?(this.setRaw("centerX",Ee.CI),this.setRaw("centerY",Ee.CI),this.setRaw("x",ue),this.setRaw("y",M)):"regular"==z&&(this.setRaw("x",ue),this.setRaw("y",M))}this.markDirtyPosition(),this.markDirtyBounds()}}_updatePosition(){const z=this.get("textType","regular"),v=this.get("inside",!1);let X=0,B=0,ne=this.get("labelAngle",0),L=this.localBounds(),P=L.right-L.left,H=L.bottom-L.top;if("radial"==z){if(this._flipped){let ue=this.get("centerX");ue instanceof Ee.gG&&(P*=1-2*ue.value),X=P*_e.cos(ne),B=P*_e.sin(ne)}}else!v&&"adjusted"==z&&(X=P/2*_e.cos(ne),B=H/2*_e.sin(ne));this.setRaw("dx",X),this.setRaw("dy",B),super._updatePosition()}get text(){return this._text}}Object.defineProperty(R,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RadialLabel"}),Object.defineProperty(R,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:G._.classNames.concat([R.className])})},8490:(Mt,Xe,F)=>{F.d(Xe,{f:()=>xe});var Ee=F(683),G=F(9472);class xe extends Ee.x{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeRadialText("",this.textStyle)})}_afterNew(){super._afterNew()}_beforeChanged(){super._beforeChanged(),this._display.clear(),this.isDirty("textType")&&(this._display.textType=this.get("textType"),this.markDirtyBounds()),this.isDirty("radius")&&(this._display.radius=this.get("radius"),this.markDirtyBounds()),this.isDirty("startAngle")&&(this._display.startAngle=(this.get("startAngle",0)+90)*G.RADIANS,this.markDirtyBounds()),this.isDirty("inside")&&(this._display.inside=this.get("inside"),this.markDirtyBounds()),this.isDirty("orientation")&&(this._display.orientation=this.get("orientation"),this.markDirtyBounds()),this.isDirty("kerning")&&(this._display.kerning=this.get("kerning"),this.markDirtyBounds())}}Object.defineProperty(xe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RadialText"}),Object.defineProperty(xe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ee.x.classNames.concat([xe.className])})},867:(Mt,Xe,F)=>{F.d(Xe,{c:()=>he});var Ee=F(2743),G=F(9472),xe=F(8261),_e=F(3605);class he extends _e.A{_beforeChanged(){super._beforeChanged(),(this.isDirty("cornerRadiusTL")||this.isDirty("cornerRadiusTR")||this.isDirty("cornerRadiusBR")||this.isDirty("cornerRadiusBL"))&&(this._clear=!0)}_draw(){let ce=this.width(),z=this.height(),v=ce,X=z,B=v/Math.abs(ce),ne=X/Math.abs(z);if(Ee.isNumber(v)&&Ee.isNumber(X)){let L=Math.min(v,X)/2,P=xe.relativeToValue(this.get("cornerRadiusTL",8),L),H=xe.relativeToValue(this.get("cornerRadiusTR",8),L),ue=xe.relativeToValue(this.get("cornerRadiusBR",8),L),M=xe.relativeToValue(this.get("cornerRadiusBL",8),L),W=Math.min(Math.abs(v/2),Math.abs(X/2));P=G.fitToRange(P,0,W),H=G.fitToRange(H,0,W),ue=G.fitToRange(ue,0,W),M=G.fitToRange(M,0,W);const N=this._display;N.moveTo(P*B,0),N.lineTo(v-H*B,0),H>0&&N.arcTo(v,0,v,H*ne,H),N.lineTo(v,X-ue*ne),ue>0&&N.arcTo(v,X,v-ue*B,X,ue),N.lineTo(M*B,X),M>0&&N.arcTo(0,X,0,X-M*ne,M),N.lineTo(0,P*ne),P>0&&N.arcTo(0,0,P*B,0,P),N.closePath()}}}Object.defineProperty(he,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RoundedRectangle"}),Object.defineProperty(he,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:_e.A.classNames.concat([he.className])})},4248:(Mt,Xe,F)=>{F.d(Xe,{L:()=>ce});var Ee=F(867),G=F(9239),xe=F(3232),_e=F(4618),he=F(2743),R=F(8261);class ce extends G.W{constructor(){super(...arguments),Object.defineProperty(this,"thumb",{enumerable:!0,configurable:!0,writable:!0,value:this._makeThumb()}),Object.defineProperty(this,"startGrip",{enumerable:!0,configurable:!0,writable:!0,value:this._makeButton()}),Object.defineProperty(this,"endGrip",{enumerable:!0,configurable:!0,writable:!0,value:this._makeButton()}),Object.defineProperty(this,"_thumbBusy",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_startDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_endDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_thumbDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_gripDown",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_addOrientationClass(){this._settings.themeTags=R.mergeTags(this._settings.themeTags,["scrollbar",this._settings.orientation]),this._settings.background||(this._settings.background=Ee.c.new(this._root,{themeTags:R.mergeTags(this._settings.themeTags,["main","background"])}))}_makeButton(){return this.children.push(_e.z.new(this._root,{themeTags:["resize","button",this.get("orientation")],icon:xe.T.new(this._root,{themeTags:["icon"]})}))}_makeThumb(){return this.children.push(Ee.c.new(this._root,{themeTags:["thumb",this.get("orientation")]}))}_handleAnimation(v){v&&this._disposers.push(v.events.on("stopped",()=>{this.setPrivateRaw("isBusy",!1),this._thumbBusy=!1}))}_afterNew(){this._addOrientationClass(),super._afterNew();const v=this.startGrip,X=this.endGrip,B=this.thumb,ne=this.get("background");ne&&this._disposers.push(ne.events.on("click",L=>{this.setPrivateRaw("isBusy",!0);const P=this._display.toLocal(L.point),H=this.width(),ue=this.height(),M=this.get("orientation");let W,N,be;W="vertical"==M?(P.y-B.height()/2)/ue:(P.x-B.width()/2)/H,"vertical"==M?(N=W*ue,be="y"):(N=W*H,be="x");const Se=this.get("animationDuration",0);Se>0?(this._thumbBusy=!0,this._handleAnimation(this.thumb.animate({key:be,to:N,duration:Se,easing:this.get("animationEasing")}))):(this.thumb.set(be,N),this._root.events.once("frameended",()=>{this.setPrivateRaw("isBusy",!1)}))})),this._disposers.push(B.events.on("dblclick",L=>{if(!R.isLocalEvent(L.originalEvent,this))return;const P=this.get("animationDuration",0),H=this.get("animationEasing");this.animate({key:"start",to:0,duration:P,easing:H}),this.animate({key:"end",to:1,duration:P,easing:H})})),this._disposers.push(v.events.on("pointerdown",()=>{this.setPrivateRaw("isBusy",!0),this._startDown=!0,this._gripDown="start"})),this._disposers.push(X.events.on("pointerdown",()=>{this.setPrivateRaw("isBusy",!0),this._endDown=!0,this._gripDown="end"})),this._disposers.push(B.events.on("pointerdown",()=>{this.setPrivateRaw("isBusy",!0),this._thumbDown=!0,this._gripDown=void 0})),this._disposers.push(v.events.on("globalpointerup",()=>{this._startDown&&this.setPrivateRaw("isBusy",!1),this._startDown=!1})),this._disposers.push(X.events.on("globalpointerup",()=>{this._endDown&&this.setPrivateRaw("isBusy",!1),this._endDown=!1})),this._disposers.push(B.events.on("globalpointerup",()=>{this._thumbDown&&this.setPrivateRaw("isBusy",!1),this._thumbDown=!1})),this._disposers.push(v.on("x",()=>{this._updateThumb()})),this._disposers.push(X.on("x",()=>{this._updateThumb()})),this._disposers.push(v.on("y",()=>{this._updateThumb()})),this._disposers.push(X.on("y",()=>{this._updateThumb()})),this._disposers.push(B.events.on("positionchanged",()=>{this._updateGripsByThumb()})),"vertical"==this.get("orientation")?(v.set("x",0),X.set("x",0),this._disposers.push(B.adapters.add("y",L=>Math.max(Math.min(Number(L),this.height()-B.height()),0))),this._disposers.push(B.adapters.add("x",L=>this.width()/2)),this._disposers.push(v.adapters.add("x",L=>this.width()/2)),this._disposers.push(X.adapters.add("x",L=>this.width()/2)),this._disposers.push(v.adapters.add("y",L=>Math.max(Math.min(Number(L),this.height()),0))),this._disposers.push(X.adapters.add("y",L=>Math.max(Math.min(Number(L),this.height()),0)))):(v.set("y",0),X.set("y",0),this._disposers.push(B.adapters.add("x",L=>Math.max(Math.min(Number(L),this.width()-B.width()),0))),this._disposers.push(B.adapters.add("y",L=>this.height()/2)),this._disposers.push(v.adapters.add("y",L=>this.height()/2)),this._disposers.push(X.adapters.add("y",L=>this.height()/2)),this._disposers.push(v.adapters.add("x",L=>Math.max(Math.min(Number(L),this.width()),0))),this._disposers.push(X.adapters.add("x",L=>Math.max(Math.min(Number(L),this.width()),0))))}_updateChildren(){super._updateChildren(),(this.isDirty("end")||this.isDirty("start")||this._sizeDirty)&&this.updateGrips()}_changed(){if(super._changed(),this.isDirty("start")||this.isDirty("end")){const v="rangechanged";this.events.isEnabled(v)&&this.events.dispatch(v,{type:v,target:this,start:this.get("start",0),end:this.get("end",1),grip:this._gripDown})}}updateGrips(){const v=this.startGrip,X=this.endGrip,B=this.get("orientation"),ne=this.height(),L=this.width();"vertical"==B?(v.set("y",ne*this.get("start",0)),X.set("y",ne*this.get("end",1))):(v.set("x",L*this.get("start",0)),X.set("x",L*this.get("end",1)));const P=this.getPrivate("positionTextFunction"),H=Math.round(100*this.get("start",0)),ue=Math.round(100*this.get("end",0));let M,W;P?(M=P.call(this,this.get("start",0)),W=P.call(this,this.get("end",0))):(M=H+"%",W=ue+"%"),v.set("ariaLabel",this._t("From %1",void 0,M)),v.set("ariaValueNow",""+H),v.set("ariaValueText",H+"%"),v.set("ariaValueMin","0"),v.set("ariaValueMax","100"),X.set("ariaLabel",this._t("To %1",void 0,W)),X.set("ariaValueNow",""+ue),X.set("ariaValueText",ue+"%"),X.set("ariaValueMin","0"),X.set("ariaValueMax","100")}_updateThumb(){const v=this.thumb,X=this.startGrip,B=this.endGrip,ne=this.height(),L=this.width();let P=X.x(),H=B.x(),ue=X.y(),M=B.y(),W=0,N=1;"vertical"==this.get("orientation")?he.isNumber(ue)&&he.isNumber(M)&&(!this._thumbBusy&&!v.isDragging()&&(v.set("height",M-ue),v.set("y",ue)),W=ue/ne,N=M/ne):he.isNumber(P)&&he.isNumber(H)&&(!this._thumbBusy&&!v.isDragging()&&(v.set("width",H-P),v.set("x",P)),W=P/L,N=H/L),this.getPrivate("isBusy")&&(this.get("start")!=W||this.get("end")!=N)&&(this.set("start",W),this.set("end",N));const be=this.getPrivate("positionTextFunction"),Se=Math.round(100*this.get("start",0)),U=Math.round(100*this.get("end",0));let Re,Ge;be?(Re=be.call(this,this.get("start",0)),Ge=be.call(this,this.get("end",0))):(Re=Se+"%",Ge=U+"%"),v.set("ariaLabel",this._t("From %1 to %2",void 0,Re,Ge)),v.set("ariaValueNow",""+Se),v.set("ariaValueText",Se+"%")}_updateGripsByThumb(){const v=this.thumb,X=this.startGrip,B=this.endGrip;if("vertical"==this.get("orientation")){const ne=v.height();X.set("y",v.y()),B.set("y",v.y()+ne)}else{const ne=v.width();X.set("x",v.x()),B.set("x",v.x()+ne)}}}Object.defineProperty(ce,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Scrollbar"}),Object.defineProperty(ce,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:G.W.classNames.concat([ce.className])})},3704:(Mt,Xe,F)=>{F.d(Xe,{j:()=>R});var Ee=F(6288),G=F(9239),xe=F(434),_e=F(7039),he=F(3559);class R extends Ee.k{constructor(){super(...arguments),Object.defineProperty(this,"seriesContainer",{enumerable:!0,configurable:!0,writable:!0,value:G.W.new(this._root,{width:_e.AQ,height:_e.AQ,isMeasured:!1})}),Object.defineProperty(this,"series",{enumerable:!0,configurable:!0,writable:!0,value:new xe.dn})}_afterNew(){super._afterNew(),this._disposers.push(this.series);const z=this.seriesContainer.children;this._disposers.push(this.series.events.onAll(v=>{if("clear"===v.type){he.each(v.oldValues,B=>{this._removeSeries(B)});const X=this.get("colors");X&&X.reset()}else if("push"===v.type)z.moveValue(v.newValue),this._processSeries(v.newValue);else if("setIndex"===v.type)z.setIndex(v.index,v.newValue),this._processSeries(v.newValue);else if("insertIndex"===v.type)z.insertIndex(v.index,v.newValue),this._processSeries(v.newValue);else if("removeIndex"===v.type)this._removeSeries(v.oldValue);else{if("moveIndex"!==v.type)throw new Error("Unknown IListEvent type");z.moveValue(v.value,v.newIndex),this._processSeries(v.value)}}))}_processSeries(z){z.chart=this,z._placeBulletsContainer(this)}_removeSeries(z){z.isDisposed()||(this.seriesContainer.children.removeValue(z),z._removeBulletsContainer())}}Object.defineProperty(R,"className",{enumerable:!0,configurable:!0,writable:!0,value:"SerialChart"}),Object.defineProperty(R,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ee.k.classNames.concat([R.className])})},3164:(Mt,Xe,F)=>{F.d(Xe,{F:()=>ne});var Ee=F(7582),G=F(7313),xe=F(434),_e=F(796),he=F(6393),R=F(7039),ce=F(3559),z=F(2743),v=F(1445),X=F(9239),B=F(1262);class ne extends G.w{constructor(){super(...arguments),Object.defineProperty(this,"_aggregatesCalculated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_selectionAggregatesCalculated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dataProcessed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_psi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pei",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"chart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"bullets",{enumerable:!0,configurable:!0,writable:!0,value:new xe.aV}),Object.defineProperty(this,"bulletsContainer",{enumerable:!0,configurable:!0,writable:!0,value:X.W.new(this._root,{width:R.AQ,height:R.AQ,position:"absolute"})})}_afterNew(){this.valueFields.push("value"),super._afterNew(),this.setPrivate("customData",{}),this._disposers.push(this.bullets.events.onAll(P=>{if("clear"===P.type)this._handleBullets(this.dataItems);else if("push"===P.type)this._handleBullets(this.dataItems);else if("setIndex"===P.type)this._handleBullets(this.dataItems);else if("insertIndex"===P.type)this._handleBullets(this.dataItems);else if("removeIndex"===P.type)this._handleBullets(this.dataItems);else{if("moveIndex"!==P.type)throw new Error("Unknown IListEvent type");this._handleBullets(this.dataItems)}}))}_dispose(){this.bulletsContainer.dispose(),super._dispose()}startIndex(){let P=this.dataItems.length;return Math.min(this.getPrivate("startIndex",0),P)}endIndex(){let P=this.dataItems.length;return Math.min(this.getPrivate("endIndex",P),P)}_handleBullets(P){ce.each(P,H=>{const ue=H.bullets;ue&&(ce.each(ue,M=>{M.dispose()}),H.bullets=void 0)}),this.markDirtyValues()}getDataItemById(P){return ce.find(this.dataItems,H=>H.get("id")==P)}_makeBullets(P){this._shouldMakeBullet(P)&&(P.bullets=[],this.bullets.each(H=>{this._makeBullet(P,H)}))}_shouldMakeBullet(P){return!0}_makeBullet(P,H,ue){const M=H(this._root,this,P);if(M){let W=M.get("sprite");W&&(W._setDataItem(P),W.setRaw("position","absolute"),this.bulletsContainer.children.push(W)),M._index=ue,M.series=this,P.bullets.push(M)}return M}_clearDirty(){super._clearDirty(),this._aggregatesCalculated=!1,this._selectionAggregatesCalculated=!1}_prepareChildren(){super._prepareChildren();let P=this.startIndex(),H=this.endIndex();if(this.isDirty("heatRules")&&(this._valuesDirty=!0),this.isPrivateDirty("baseValueSeries")){const M=this.getPrivate("baseValueSeries");M&&this._disposers.push(M.onPrivate("startIndex",()=>{this.markDirtyValues()}))}if(this.get("calculateAggregates")&&(this._valuesDirty&&!this._dataProcessed&&(this._aggregatesCalculated||(this._calculateAggregates(0,this.dataItems.length),this._aggregatesCalculated=!0)),(this._psi!=P||this._pei!=H)&&!this._selectionAggregatesCalculated&&(0===P&&H===this.dataItems.length&&this._aggregatesCalculated||this._calculateAggregates(P,H),this._selectionAggregatesCalculated=!0)),this.isDirty("tooltip")){let M=this.get("tooltip");M&&(M.hide(0),M.set("tooltipTarget",this))}if(this.isDirty("fill")||this.isDirty("stroke")){let M;const W=this.get("legendDataItem");if(W&&(M=W.get("markerRectangle"),M&&this.isVisible())){if(this.isDirty("stroke")){let N=this.get("stroke");M.set("stroke",N)}if(this.isDirty("fill")){let N=this.get("fill");M.set("fill",N)}}this.updateLegendMarker(void 0)}if(this.bullets.length>0){let M=this.startIndex(),W=this.endIndex();W<this.dataItems.length&&W++;for(let N=M;N<W;N++){let be=this.dataItems[N];be.bullets||this._makeBullets(be)}}}_calculateAggregates(P,H){let ue=this._valueFields;if(!ue)throw new Error("No value fields are set for the series.");const M={},W={},N={},be={},Se={},U={},Re={},Ge={},We={};ce.each(ue,pe=>{M[pe]=0,W[pe]=0,N[pe]=0}),ce.each(ue,pe=>{let xt=pe+"Change",lt=pe+"ChangePercent",Le=pe+"ChangePrevious",dt=pe+"ChangePreviousPercent",Qe=pe+"ChangeSelection",gt=pe+"ChangeSelectionPercent",pt="valueY";("valueX"==pe||"openValueX"==pe||"lowValueX"==pe||"highValueX"==pe)&&(pt="valueX");const Ue=this.getPrivate("baseValueSeries");for(let zt=P;zt<H;zt++){const Ie=this.dataItems[zt];let Ve=Ie.get(pe);null!=Ve&&(N[pe]++,M[pe]+=Ve,W[pe]+=Math.abs(Ve),Ge[pe]=M[pe]/N[pe],(be[pe]>Ve||null==be[pe])&&(be[pe]=Ve),(Se[pe]<Ve||null==Se[pe])&&(Se[pe]=Ve),Re[pe]=Ve,null==U[pe]&&(U[pe]=Ve,We[pe]=Ve,Ue&&(U[pt]=Ue._getBase(pt))),0===P&&(Ie.setRaw(xt,Ve-U[pt]),Ie.setRaw(lt,(Ve-U[pt])/U[pt]*100)),Ie.setRaw(Le,Ve-We[pt]),Ie.setRaw(dt,(Ve-We[pt])/We[pt]*100),Ie.setRaw(Qe,Ve-U[pt]),Ie.setRaw(gt,(Ve-U[pt])/U[pt]*100),We[pe]=Ve)}}),ce.each(ue,pe=>{this.setPrivate(pe+"AverageSelection",Ge[pe]),this.setPrivate(pe+"CountSelection",N[pe]),this.setPrivate(pe+"SumSelection",M[pe]),this.setPrivate(pe+"AbsoluteSumSelection",W[pe]),this.setPrivate(pe+"LowSelection",be[pe]),this.setPrivate(pe+"HighSelection",Se[pe]),this.setPrivate(pe+"OpenSelection",U[pe]),this.setPrivate(pe+"CloseSelection",Re[pe])}),0===P&&H===this.dataItems.length&&ce.each(ue,pe=>{this.setPrivate(pe+"Average",Ge[pe]),this.setPrivate(pe+"Count",N[pe]),this.setPrivate(pe+"Sum",M[pe]),this.setPrivate(pe+"AbsoluteSum",W[pe]),this.setPrivate(pe+"Low",be[pe]),this.setPrivate(pe+"High",Se[pe]),this.setPrivate(pe+"Open",U[pe]),this.setPrivate(pe+"Close",Re[pe])})}_updateChildren(){super._updateChildren(),this._psi=this.startIndex(),this._pei=this.endIndex(),this.isDirty("visible")&&this.bulletsContainer.set("visible",this.get("visible"));const P=this.get("heatRules");if(this._valuesDirty&&P&&P.length>0&&ce.each(P,H=>{const ue=H.minValue||this.getPrivate(H.dataField+"Low")||0,M=H.maxValue||this.getPrivate(H.dataField+"High")||0;ce.each(H.target._entities,W=>{const N=W.dataItem.get(H.dataField);if(z.isNumber(N))if(H.customFunction)H.customFunction.call(this,W,ue,M,N);else{let be,Se;be=H.logarithmic?(Math.log(N)*Math.LOG10E-Math.log(ue)*Math.LOG10E)/(Math.log(M)*Math.LOG10E-Math.log(ue)*Math.LOG10E):(N-ue)/(M-ue),z.isNumber(N)&&(!z.isNumber(be)||Math.abs(be)==1/0)&&(be=.5),z.isNumber(H.min)?Se=H.min+(H.max-H.min)*be:H.min instanceof _e.Il?Se=_e.Il.interpolate(be,H.min,H.max):H.min instanceof R.gG&&(Se=(0,he.Wn)(be,H.min,H.max)),W.set(H.key,Se)}else H.neutral&&W.set(H.key,H.neutral)})}),this.get("visible")&&this.bullets.length>0){let H=this.dataItems.length,ue=this.startIndex(),M=this.endIndex();M<H&&M++,ue>0&&ue--;for(let W=0;W<ue;W++)this._hideBullets(this.dataItems[W]);for(let W=ue;W<M;W++)this._positionBullets(this.dataItems[W]);for(let W=M;W<H;W++)this._hideBullets(this.dataItems[W])}}_positionBullets(P){P.bullets&&ce.each(P.bullets,H=>{this._positionBullet(H);const ue=H.get("sprite");H.get("dynamic")&&(ue&&(ue._markDirtyKey("fill"),ue.markDirtySize()),ue instanceof X.W&&ue.walkChildren(M=>{M._markDirtyKey("fill"),M.markDirtySize(),M instanceof B._&&M.text.markDirtyText()})),ue instanceof B._&&ue.get("populateText")&&ue.text.markDirtyText()})}_hideBullets(P){P.bullets&&ce.each(P.bullets,H=>{let ue=H.get("sprite");ue&&ue.setPrivate("visible",!1)})}_positionBullet(P){}_placeBulletsContainer(P){P.bulletsContainer.children.moveValue(this.bulletsContainer)}_removeBulletsContainer(){const P=this.bulletsContainer;P.parent&&P.parent.children.removeValue(P)}disposeDataItem(P){const H=P.bullets;H&&ce.each(H,ue=>{ue.dispose()})}_getItemReaderLabel(){return""}showDataItem(P,H){const ue=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return(0,Ee.mG)(this,void 0,void 0,function*(){const M=[ue.showDataItem.call(this,P,H)],W=P.bullets;W&&ce.each(W,N=>{M.push(N.get("sprite").show(H))}),yield Promise.all(M)})}hideDataItem(P,H){const ue=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return(0,Ee.mG)(this,void 0,void 0,function*(){const M=[ue.hideDataItem.call(this,P,H)],W=P.bullets;W&&ce.each(W,N=>{M.push(N.get("sprite").hide(H))}),yield Promise.all(M)})}_sequencedShowHide(P,H){return(0,Ee.mG)(this,void 0,void 0,function*(){if(this.get("sequencedInterpolation"))if(z.isNumber(H)||(H=this.get("interpolationDuration",0)),H>0){const ue=this.startIndex(),M=this.endIndex();yield Promise.all(ce.map(this.dataItems,(W,N)=>(0,Ee.mG)(this,void 0,void 0,function*(){let be=H||0;(N<ue-10||N>M+10)&&(be=0);let Se=this.get("sequencedDelay",0)+be/(M-ue);yield v.sleep(Se*(N-ue)),P?yield this.showDataItem(W,be):yield this.hideDataItem(W,be)})))}else yield Promise.all(ce.map(this.dataItems,ue=>P?this.showDataItem(ue,0):this.hideDataItem(ue,0)))})}updateLegendValue(P){if(P){const H=P.get("legendDataItem");if(H){const ue=H.get("valueLabel");if(ue){const W=ue.text;let N="";ue._setDataItem(P),N=this.get("legendValueText",W.get("text","")),ue.set("text",N),W.markDirtyText()}const M=H.get("label");if(M){const W=M.text;let N="";M._setDataItem(P),N=this.get("legendLabelText",W.get("text","")),M.set("text",N),W.markDirtyText()}}}}updateLegendMarker(P){}_onHide(){super._onHide();const P=this.getTooltip();P&&P.hide()}hoverDataItem(P){}unhoverDataItem(P){}_getBase(P){const H=this.dataItems[this.startIndex()];return H?H.get(P):0}}Object.defineProperty(ne,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Series"}),Object.defineProperty(ne,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:G.w.classNames.concat([ne.className])})},9879:(Mt,Xe,F)=>{F.d(Xe,{d:()=>G});var Ee=F(6606);class G extends Ee.x{}Object.defineProperty(G,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Tick"}),Object.defineProperty(G,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ee.x.classNames.concat([G.className])})},2661:(Mt,Xe,F)=>{F.d(Xe,{U:()=>xe});var Ee=F(4889),G=F(796);class xe extends Ee.JH{_afterNew(){super._afterNewApplyThemes(),this._dirty.colors=!1}_beforeChanged(){this.isDirty("colors")&&this.reset()}generateColors(){this.setPrivate("currentPass",this.getPrivate("currentPass",0)+1);const he=this.getPrivate("currentPass"),R=this.get("colors",[this.get("baseColor",G.Il.fromHex(16711680))]);this.getPrivate("numColors")||this.setPrivate("numColors",R.length);const ce=this.getPrivate("numColors"),v=this.get("passOptions"),X=this.get("reuse");for(let B=0;B<ce;B++)if(X)R.push(R[B]);else{const ne=R[B].toHSL();let L=ne.h+(v.hue||0)*he;for(;L>1;)L-=1;let P=ne.s+(v.saturation||0)*he;P>1&&(P=1),P<0&&(P=0);let H=ne.l+(v.lightness||0)*he;for(;H>1;)H-=1;R.push(G.Il.fromHSL(L,P,H))}}getIndex(he){const R=this.get("colors",[]),ce=this.get("saturation");return he>=R.length?(this.generateColors(),this.getIndex(he)):null!=ce?G.Il.saturate(R[he],ce):R[he]}next(){let he=this.getPrivate("currentStep",this.get("startIndex",0));return this.setPrivate("currentStep",he+this.get("step",1)),this.getIndex(he)}reset(){this.setPrivate("currentStep",this.get("startIndex",0)),this.setPrivate("currentPass",0)}}Object.defineProperty(xe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ColorSet"}),Object.defineProperty(xe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ee.JH.classNames.concat([xe.className])})},1171:(Mt,Xe,F)=>{F.d(Xe,{Q:()=>xe,k:()=>G});var Ee=F(434);class G extends Ee.aV{constructor(){super(...arguments),Object.defineProperty(this,"processor",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}incrementRef(){}decrementRef(){}_onPush(he){this.processor&&this.processor.processRow(he),super._onPush(he)}_onInsertIndex(he,R){this.processor&&this.processor.processRow(R),super._onInsertIndex(he,R)}_onSetIndex(he,R,ce){this.processor&&this.processor.processRow(ce),super._onSetIndex(he,R,ce)}}class xe{constructor(he){Object.defineProperty(this,"processor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._value=he}incrementRef(){}decrementRef(){}}},1445:(Mt,Xe,F)=>{F.r(Xe),F.d(Xe,{add:()=>L,checkChange:()=>ne,chooseInterval:()=>H,copy:()=>B,getDateIntervalDuration:()=>z,getDuration:()=>R,getIntervalDuration:()=>ce,getNextUnit:()=>he,getTime:()=>X,getUnitValue:()=>ue,now:()=>v,round:()=>P,sleep:()=>xe,timeUnitDurations:()=>_e});var Ee=F(2743),G=F(8261);function xe(M){return new Promise((W,N)=>{setTimeout(W,M)})}let _e={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2629742400,year:31536e6};function he(M){switch(M){case"year":return;case"month":return"year";case"week":case"day":return"month";case"hour":return"day";case"minute":return"hour";case"second":return"minute";case"millisecond":return"second"}}function R(M,W){return null==W&&(W=1),_e[M]*W}function ce(M){return M?_e[M.timeUnit]*M.count:0}function z(M,W,N,be,Se){const U=M.timeUnit,Re=M.count;if("hour"==U||"minute"==U||"second"==U||"millisecond"==U)return _e[M.timeUnit]*M.count;{const Ge=P(new Date(W.getTime()),U,Re,N,be,void 0,Se).getTime();let We=Ge+Re*R(U)*1.05;return We=P(new Date(We),U,1,N,be,void 0,Se).getTime(),We-Ge}}function v(){return new Date}function X(){return v().getTime()}function B(M){return new Date(M.getTime())}function ne(M,W,N,be,Se){if(W-M>R(N,1.2))return!0;let U=new Date(M),Re=new Date(W);Se&&(U=Se.convertLocal(U),Re=Se.convertLocal(Re));let Ge=0,We=0;!be&&"millisecond"!=N&&(Ge=U.getTimezoneOffset(),U.setUTCMinutes(U.getUTCMinutes()-Ge),We=Re.getTimezoneOffset(),Re.setUTCMinutes(Re.getUTCMinutes()-We));let pe=!1;switch(N){case"year":U.getUTCFullYear()!=Re.getUTCFullYear()&&(pe=!0);break;case"month":(U.getUTCFullYear()!=Re.getUTCFullYear()||U.getUTCMonth()!=Re.getUTCMonth())&&(pe=!0);break;case"day":(U.getUTCMonth()!=Re.getUTCMonth()||U.getUTCDate()!=Re.getUTCDate())&&(pe=!0);break;case"hour":U.getUTCHours()!=Re.getUTCHours()&&(pe=!0);break;case"minute":U.getUTCMinutes()!=Re.getUTCMinutes()&&(pe=!0);break;case"second":U.getUTCSeconds()!=Re.getUTCSeconds()&&(pe=!0);break;case"millisecond":U.getTime()!=Re.getTime()&&(pe=!0)}if(pe)return pe;let xt=he(N);return!!xt&&ne(M,W,xt,be,Se)}function L(M,W,N,be,Se){let U=0;switch(!be&&"millisecond"!=W&&(U=M.getTimezoneOffset(),Se&&(U-=Se.offsetUTC(M)),M.setUTCMinutes(M.getUTCMinutes()-U)),W){case"day":let Re=M.getUTCDate();M.setUTCDate(Re+N);break;case"second":let Ge=M.getUTCSeconds();M.setUTCSeconds(Ge+N);break;case"millisecond":let We=M.getUTCMilliseconds();M.setUTCMilliseconds(We+N);break;case"hour":let pe=M.getUTCHours();M.setUTCHours(pe+N);break;case"minute":let xt=M.getUTCMinutes();M.setUTCMinutes(xt+N);break;case"year":let lt=M.getUTCFullYear();M.setUTCFullYear(lt+N);break;case"month":let Le=M.getUTCMonth();M.setUTCMonth(Le+N);break;case"week":let dt=M.getUTCDate();M.setUTCDate(dt+7*N)}if(!be&&"millisecond"!=W&&(M.setUTCMinutes(M.getUTCMinutes()+U),"day"==W||"week"==W||"month"==W||"year"==W)){let Re=M.getTimezoneOffset();if(Se&&(Re+=Se.offsetUTC(M)),Re!=U){let Ge=Re-U;M.setUTCMinutes(M.getUTCMinutes()+Ge),M.getTimezoneOffset()!=Re&&M.setUTCMinutes(M.getUTCMinutes()-Ge)}}return M}function P(M,W,N,be,Se,U,Re){if(!Re||Se){let Ge=0;switch(!Se&&"millisecond"!=W&&(Ge=M.getTimezoneOffset(),M.setUTCMinutes(M.getUTCMinutes()-Ge)),W){case"day":let We=M.getUTCDate();if(N>1){if(U){U=P(U,"day",1);let Ue=M.getTime()-U.getTime(),zt=Math.floor(Ue/R("day")/N),Ie=R("day",zt*N);M.setTime(U.getTime()+Ie-Ge*R("minute"))}}else M.setUTCDate(We);M.setUTCHours(0,0,0,0);break;case"second":let pe=M.getUTCSeconds();N>1&&(pe=Math.floor(pe/N)*N),M.setUTCSeconds(pe,0);break;case"millisecond":if(1==N)return M;let xt=M.getUTCMilliseconds();xt=Math.floor(xt/N)*N,M.setUTCMilliseconds(xt);break;case"hour":let lt=M.getUTCHours();N>1&&(lt=Math.floor(lt/N)*N),M.setUTCHours(lt,0,0,0);break;case"minute":let Le=M.getUTCMinutes();N>1&&(Le=Math.floor(Le/N)*N),M.setUTCMinutes(Le,0,0);break;case"month":let dt=M.getUTCMonth();N>1&&(dt=Math.floor(dt/N)*N),M.setUTCMonth(dt,1),M.setUTCHours(0,0,0,0);break;case"year":let Qe=M.getUTCFullYear();N>1&&(Qe=Math.floor(Qe/N)*N),M.setUTCFullYear(Qe,0,1),M.setUTCHours(0,0,0,0);break;case"week":let gt=M.getUTCDate(),pt=M.getUTCDay();Ee.isNumber(be)||(be=1),gt=pt>=be?gt-pt+be:gt-(7+pt)+be,M.setUTCDate(gt),M.setUTCHours(0,0,0,0)}if(!Se&&"millisecond"!=W&&(M.setUTCMinutes(M.getUTCMinutes()+Ge),"day"==W||"week"==W||"month"==W||"year"==W)){let We=M.getTimezoneOffset();if(We!=Ge){let pe=We-Ge;M.setUTCMinutes(M.getUTCMinutes()+pe)}}return M}{if(isNaN(M.getTime()))return M;let Ge=Re.offsetUTC(M),We=M.getTimezoneOffset(),pe=Re.parseDate(M),xt=pe.year,lt=pe.month,Le=pe.day,dt=pe.hour,Qe=pe.minute,gt=pe.second,pt=pe.millisecond,Ue=pe.weekday;switch(W){case"day":if(N>1&&U){U=P(U,"day",1,be,Se,void 0,Re);let Ie=M.getTime()-U.getTime(),Ve=Math.floor(Ie/R("day")/N),hi=R("day",Ve*N);M.setTime(U.getTime()+hi),pe=Re.parseDate(M),xt=pe.year,lt=pe.month,Le=pe.day}dt=0,Qe=Ge-We,gt=0,pt=0;break;case"second":Qe+=Ge-We,N>1&&(gt=Math.floor(gt/N)*N),pt=0;break;case"millisecond":Qe+=Ge-We,N>1&&(pt=Math.floor(pt/N)*N);break;case"hour":N>1&&(dt=Math.floor(dt/N)*N),Qe=Ge-We,gt=0,pt=0;break;case"minute":N>1&&(Qe=Math.floor(Qe/N)*N),Qe+=Ge-We,gt=0,pt=0;break;case"month":N>1&&(lt=Math.floor(lt/N)*N),Le=1,dt=0,Qe=Ge-We,gt=0,pt=0;break;case"year":N>1&&(xt=Math.floor(xt/N)*N),lt=0,Le=1,dt=0,Qe=Ge-We,gt=0,pt=0;break;case"week":Ee.isNumber(be)||(be=1),Le=Ue>=be?Le-Ue+be:Le-(7+Ue)+be,dt=0,Qe=Ge-We,gt=0,pt=0}let zt=(M=new Date(xt,lt,Le,dt,Qe,gt,pt)).getTimezoneOffset();return zt!=We&&M.setTime(M.getTime()+6e4*(We-zt)),M}}function H(M,W,N,be){let U=ce(be[M]),Re=be.length-1;if(M>=Re)return Object.assign({},be[Re]);let Ge=Math.ceil(W/U);return W<U&&M>0?Object.assign({},be[M-1]):Ge<=N?Object.assign({},be[M]):M+1<be.length?H(M+1,W,N,be):Object.assign({},be[M])}function ue(M,W){switch(W){case"day":return M.getDate();case"second":return M.getSeconds();case"millisecond":return M.getMilliseconds();case"hour":return M.getHours();case"minute":return M.getMinutes();case"month":return M.getMonth();case"year":return M.getFullYear();case"week":return G.getWeek(M)}}},2231:(Mt,Xe,F)=>{F.d(Xe,{X:()=>ce,v:()=>R});var Ee=F(5013),G=F(7039),xe=F(796),_e=F(680),he=F(5770);function R(z,v,X,B){z.set(v,X.get(B)),X.on(B,ne=>{z.set(v,ne)})}class ce extends Ee.Q{setupDefaultRules(){super.setupDefaultRules();const v=this._root.language,X=this._root.interfaceColors,B=this._root.horizontalLayout,ne=this._root.verticalLayout,L=this.rule.bind(this);L("InterfaceColors").setAll({stroke:xe.Il.fromHex(15066597),fill:xe.Il.fromHex(15987699),primaryButton:xe.Il.fromHex(6788316),primaryButtonHover:xe.Il.fromHex(6779356),primaryButtonDown:xe.Il.fromHex(6872182),primaryButtonActive:xe.Il.fromHex(6872182),primaryButtonText:xe.Il.fromHex(16777215),primaryButtonStroke:xe.Il.fromHex(16777215),secondaryButton:xe.Il.fromHex(14277081),secondaryButtonHover:xe.Il.fromHex(10724259),secondaryButtonDown:xe.Il.fromHex(9276813),secondaryButtonActive:xe.Il.fromHex(15132390),secondaryButtonText:xe.Il.fromHex(0),secondaryButtonStroke:xe.Il.fromHex(16777215),grid:xe.Il.fromHex(0),background:xe.Il.fromHex(16777215),alternativeBackground:xe.Il.fromHex(0),text:xe.Il.fromHex(0),alternativeText:xe.Il.fromHex(16777215),disabled:xe.Il.fromHex(11382189),positive:xe.Il.fromHex(5288704),negative:xe.Il.fromHex(11730944)});{const P=L("ColorSet");P.setAll({passOptions:{hue:.05,saturation:0,lightness:0},colors:[xe.Il.fromHex(6797276)],step:1,reuse:!1,startIndex:0}),P.setPrivate("currentStep",0),P.setPrivate("currentPass",0)}L("Entity").setAll({stateAnimationDuration:0,stateAnimationEasing:he.out(he.cubic)}),L("Component").setAll({interpolationDuration:0,interpolationEasing:he.out(he.cubic)}),L("Sprite").setAll({visible:!0,scale:1,opacity:1,rotation:0,position:"relative",tooltipX:G.CI,tooltipY:G.CI,tooltipPosition:"fixed",isMeasured:!0}),L("Sprite").states.create("default",{visible:!0,opacity:1}),L("Container").setAll({interactiveChildren:!0,setStateOnChildren:!1}),L("Graphics").setAll({strokeWidth:1}),L("Chart").setAll({width:G.AQ,height:G.AQ,interactiveChildren:!1}),L("Sprite",["horizontal","center"]).setAll({centerX:G.CI,x:G.CI}),L("Sprite",["vertical","center"]).setAll({centerY:G.CI,y:G.CI}),L("Container",["horizontal","layout"]).setAll({layout:B}),L("Container",["vertical","layout"]).setAll({layout:ne}),L("Pattern").setAll({repetition:"repeat",width:50,height:50,rotation:0,fillOpacity:1}),L("LinePattern").setAll({gap:6,colorOpacity:1,width:49,height:49}),L("RectanglePattern").setAll({gap:6,checkered:!1,centered:!0,maxWidth:5,maxHeight:5,width:48,height:48,strokeWidth:0}),L("CirclePattern").setAll({gap:5,checkered:!1,centered:!1,radius:3,strokeWidth:0,width:45,height:45}),L("LinearGradient").setAll({rotation:90}),L("Legend").setAll({fillField:"fill",strokeField:"stroke",nameField:"name",layout:_e.M.new(this._root,{}),layer:30,clickTarget:"itemContainer"}),L("Container",["legend","item","itemcontainer"]).setAll({paddingLeft:5,paddingRight:5,paddingBottom:5,paddingTop:5,layout:B,setStateOnChildren:!0,interactiveChildren:!1,ariaChecked:!0,focusable:!0,ariaLabel:v.translate("Press ENTER to toggle"),role:"checkbox"});{const P=L("Rectangle",["legend","item","background"]);P.setAll({fillOpacity:0}),R(P,"fill",X,"background")}L("Container",["legend","marker"]).setAll({setStateOnChildren:!0,centerY:G.CI,paddingLeft:0,paddingRight:0,paddingBottom:0,paddingTop:0,width:18,height:18}),L("RoundedRectangle",["legend","marker","rectangle"]).setAll({width:G.AQ,height:G.AQ,cornerRadiusBL:3,cornerRadiusTL:3,cornerRadiusBR:3,cornerRadiusTR:3});{const P=L("RoundedRectangle",["legend","marker","rectangle"]).states.create("disabled",{});R(P,"fill",X,"disabled"),R(P,"stroke",X,"disabled")}L("Label",["legend","label"]).setAll({centerY:G.CI,marginLeft:5,paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:0,populateText:!0}),R(L("Label",["legend","label"]).states.create("disabled",{}),"fill",X,"disabled"),L("Label",["legend","value","label"]).setAll({centerY:G.CI,marginLeft:5,paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:0,width:50,centerX:G.AQ,populateText:!0}),R(L("Label",["legend","value","label"]).states.create("disabled",{}),"fill",X,"disabled"),L("HeatLegend").setAll({stepCount:1}),L("RoundedRectangle",["heatlegend","marker"]).setAll({cornerRadiusTR:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusBL:0}),L("RoundedRectangle",["vertical","heatlegend","marker"]).setAll({height:G.AQ,width:15}),L("RoundedRectangle",["horizontal","heatlegend","marker"]).setAll({width:G.AQ,height:15}),L("HeatLegend",["vertical"]).setAll({height:G.AQ}),L("HeatLegend",["horizontal"]).setAll({width:G.AQ}),L("Label",["heatlegend","start"]).setAll({paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:5}),L("Label",["heatlegend","end"]).setAll({paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:5});{const P=L("Label");P.setAll({paddingTop:8,paddingBottom:8,paddingLeft:10,paddingRight:10,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontSize:"1em",populateText:!1}),R(P,"fill",X,"text")}L("RadialLabel").setAll({textType:"regular",centerY:G.CI,centerX:G.CI,inside:!1,radius:0,baseRadius:G.AQ,orientation:"auto",textAlign:"center"}),L("RoundedRectangle").setAll({cornerRadiusTL:8,cornerRadiusBL:8,cornerRadiusTR:8,cornerRadiusBR:8}),L("PointedRectangle").setAll({pointerBaseWidth:15,pointerLength:10,cornerRadius:8}),L("Slice").setAll({shiftRadius:0,dRadius:0,dInnerRadius:0});{const P=L("Tick");P.setAll({strokeOpacity:.15,isMeasured:!1,length:4.5,position:"absolute",crisp:!0}),R(P,"stroke",X,"grid")}L("Bullet").setAll({locationX:.5,locationY:.5}),L("Tooltip").setAll({position:"absolute",getFillFromSprite:!0,getStrokeFromSprite:!1,autoTextColor:!0,paddingTop:9,paddingBottom:8,paddingLeft:10,paddingRight:10,marginBottom:5,pointerOrientation:"vertical",centerX:G.CI,centerY:G.CI,animationEasing:he.out(he.cubic),exportable:!1}),L("Polygon").setAll({animationEasing:he.out(he.cubic)}),L("PointedRectangle",["tooltip","background"]).setAll({strokeOpacity:.9,cornerRadius:4,pointerLength:4,pointerBaseWidth:8,fillOpacity:.9,stroke:xe.Il.fromHex(16777215)});{const P=L("Label",["tooltip"]);P.setAll({role:"tooltip",populateText:!0,paddingRight:0,paddingTop:0,paddingLeft:0,paddingBottom:0}),R(P,"fill",X,"alternativeText")}L("Button").setAll({paddingTop:8,paddingBottom:8,paddingLeft:10,paddingRight:10,interactive:!0,layout:B,interactiveChildren:!1,setStateOnChildren:!0,focusable:!0}),L("Button").states.create("hover",{}),L("Button").states.create("down",{stateAnimationDuration:0}),L("Button").states.create("active",{});{const P=L("RoundedRectangle",["button","background"]);R(P,"fill",X,"primaryButton"),R(P,"stroke",X,"primaryButtonStroke")}R(L("RoundedRectangle",["button","background"]).states.create("hover",{}),"fill",X,"primaryButtonHover"),R(L("RoundedRectangle",["button","background"]).states.create("down",{stateAnimationDuration:0}),"fill",X,"primaryButtonDown"),R(L("RoundedRectangle",["button","background"]).states.create("active",{}),"fill",X,"primaryButtonActive"),R(L("Graphics",["button","icon"]),"stroke",X,"primaryButtonText"),R(L("Label",["button"]),"fill",X,"primaryButtonText"),L("Button",["zoom"]).setAll({paddingTop:18,paddingBottom:18,paddingLeft:12,paddingRight:12,centerX:46,centerY:-10,y:0,x:G.AQ,role:"button",ariaLabel:v.translate("Zoom Out"),layer:30});{const P=L("RoundedRectangle",["background","button","zoom"]);P.setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),R(P,"fill",X,"primaryButton")}R(L("RoundedRectangle",["background","button","zoom"]).states.create("hover",{}),"fill",X,"primaryButtonHover"),R(L("RoundedRectangle",["background","button","zoom"]).states.create("down",{stateAnimationDuration:0}),"fill",X,"primaryButtonDown");{const P=L("Graphics",["icon","button","zoom"]);P.setAll({crisp:!0,strokeOpacity:.7,draw:H=>{H.moveTo(0,0),H.lineTo(12,0)}}),R(P,"stroke",X,"primaryButtonText")}L("Button",["resize"]).setAll({paddingTop:9,paddingBottom:9,paddingLeft:13,paddingRight:13,draggable:!0,centerX:G.CI,centerY:G.CI,position:"absolute",role:"slider",ariaValueMin:"0",ariaValueMax:"100",ariaLabel:v.translate("Use up and down arrows to move selection")});{const P=L("RoundedRectangle",["background","resize","button"]);P.setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),R(P,"fill",X,"secondaryButton"),R(P,"stroke",X,"secondaryButtonStroke")}R(L("RoundedRectangle",["background","resize","button"]).states.create("hover",{}),"fill",X,"secondaryButtonHover"),R(L("RoundedRectangle",["background","resize","button"]).states.create("down",{stateAnimationDuration:0}),"fill",X,"secondaryButtonDown");{const P=L("Graphics",["resize","button","icon"]);P.setAll({interactive:!1,crisp:!0,strokeOpacity:.5,draw:H=>{H.moveTo(0,.5),H.lineTo(0,12.5),H.moveTo(4,.5),H.lineTo(4,12.5)}}),R(P,"stroke",X,"secondaryButtonText")}L("Button",["resize","vertical"]).setAll({rotation:90,cursorOverStyle:"ns-resize"}),L("Button",["resize","horizontal"]).setAll({cursorOverStyle:"ew-resize"}),L("Button",["play"]).setAll({paddingTop:13,paddingBottom:13,paddingLeft:14,paddingRight:14,ariaLabel:v.translate("Play"),toggleKey:"active"});{const P=L("RoundedRectangle",["play","background"]);P.setAll({strokeOpacity:.5,cornerRadiusBL:100,cornerRadiusBR:100,cornerRadiusTL:100,cornerRadiusTR:100}),R(P,"fill",X,"primaryButton")}{const P=L("Graphics",["play","icon"]);P.setAll({stateAnimationDuration:0,dx:1,draw:H=>{H.moveTo(0,-5),H.lineTo(8,0),H.lineTo(0,5),H.lineTo(0,-5)}}),R(P,"fill",X,"primaryButtonText")}L("Graphics",["play","icon"]).states.create("default",{stateAnimationDuration:0}),L("Graphics",["play","icon"]).states.create("active",{stateAnimationDuration:0,draw:P=>{P.moveTo(-4,-5),P.lineTo(-1,-5),P.lineTo(-1,5),P.lineTo(-4,5),P.lineTo(-4,-5),P.moveTo(4,-5),P.lineTo(1,-5),P.lineTo(1,5),P.lineTo(4,5),P.lineTo(4,-5)}}),L("Button",["switch"]).setAll({paddingTop:4,paddingBottom:4,paddingLeft:4,paddingRight:4,ariaLabel:v.translate("Press ENTER to toggle"),toggleKey:"active",width:40,height:24,layout:null});{const P=L("RoundedRectangle",["switch","background"]);P.setAll({strokeOpacity:.5,cornerRadiusBL:100,cornerRadiusBR:100,cornerRadiusTL:100,cornerRadiusTR:100}),R(P,"fill",X,"primaryButton")}{const P=L("Circle",["switch","icon"]);P.setAll({radius:8,centerY:0,centerX:0,dx:0}),R(P,"fill",X,"primaryButtonText")}L("Graphics",["switch","icon"]).states.create("active",{dx:16}),L("Scrollbar").setAll({start:0,end:1,layer:30,animationEasing:he.out(he.cubic)}),L("Scrollbar",["vertical"]).setAll({marginRight:13,marginLeft:13,minWidth:12,height:G.AQ}),L("Scrollbar",["horizontal"]).setAll({marginTop:13,marginBottom:13,minHeight:12,width:G.AQ}),this.rule("Button",["scrollbar"]).setAll({exportable:!1});{const P=L("RoundedRectangle",["scrollbar","main","background"]);P.setAll({cornerRadiusTL:8,cornerRadiusBL:8,cornerRadiusTR:8,cornerRadiusBR:8,fillOpacity:.8}),R(P,"fill",X,"fill")}{const P=L("RoundedRectangle",["scrollbar","thumb"]);P.setAll({role:"slider",ariaLive:"polite",position:"absolute",draggable:!0}),R(P,"fill",X,"secondaryButton")}R(L("RoundedRectangle",["scrollbar","thumb"]).states.create("hover",{}),"fill",X,"secondaryButtonHover"),R(L("RoundedRectangle",["scrollbar","thumb"]).states.create("down",{stateAnimationDuration:0}),"fill",X,"secondaryButtonDown"),L("RoundedRectangle",["scrollbar","thumb","vertical"]).setAll({x:G.CI,width:G.AQ,centerX:G.CI,ariaLabel:v.translate("Use up and down arrows to move selection")}),L("RoundedRectangle",["scrollbar","thumb","horizontal"]).setAll({y:G.CI,centerY:G.CI,height:G.AQ,ariaLabel:v.translate("Use left and right arrows to move selection")});{const P=L("PointedRectangle",["axis","tooltip","background"]);P.setAll({cornerRadius:0}),R(P,"fill",X,"alternativeBackground")}L("Label",["axis","tooltip"]).setAll({role:void 0}),L("Label",["axis","tooltip","y"]).setAll({textAlign:"right"}),L("Label",["axis","tooltip","y","opposite"]).setAll({textAlign:"left"}),L("Label",["axis","tooltip","x"]).setAll({textAlign:"center"}),L("Tooltip",["categoryaxis"]).setAll({labelText:"{category}"}),L("Star").setAll({spikes:5,innerRadius:5,radius:10}),L("Tooltip",["stock"]).setAll({paddingTop:6,paddingBottom:5,paddingLeft:7,paddingRight:7}),L("PointedRectangle",["tooltip","stock","axis"]).setAll({pointerLength:0,pointerBaseWidth:0,cornerRadius:3}),L("Label",["tooltip","stock"]).setAll({fontSize:"0.8em"}),L("SpriteResizer").setAll({rotationStep:10}),L("Container",["resizer","grip"]).states.create("hover",{});{const P=L("RoundedRectangle",["resizer","grip"]);P.setAll({strokeOpacity:.7,strokeWidth:1,fillOpacity:1,width:12,height:12}),R(P,"fill",X,"background"),R(P,"stroke",X,"alternativeBackground")}{const P=L("RoundedRectangle",["resizer","grip","outline"]);P.setAll({strokeOpacity:0,fillOpacity:0,width:20,height:20}),P.states.create("hover",{fillOpacity:.3}),R(P,"fill",X,"alternativeBackground")}L("RoundedRectangle",["resizer","grip","left"]).setAll({cornerRadiusBL:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusTR:0}),L("RoundedRectangle",["resizer","grip","right"]).setAll({cornerRadiusBL:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusTR:0});{const P=L("Rectangle",["resizer","rectangle"]);P.setAll({strokeDasharray:[2,2],strokeOpacity:.5,strokeWidth:1}),R(P,"stroke",X,"alternativeBackground")}}}},5126:(Mt,Xe,F)=>{F.r(Xe),F.d(Xe,{ArrayDisposer:()=>ce.rk,Bullet:()=>c,Button:()=>m.z,CSVParser:()=>Us,Chart:()=>Fi.k,Circle:()=>p,CirclePattern:()=>Ms,Color:()=>Ue.Il,ColorSet:()=>Is.U,Component:()=>x.w,Container:()=>G.W,CounterDisposer:()=>ce.DM,DataItem:()=>x.z,DataProcessor:()=>Cs,DateFormatter:()=>xt,Disposer:()=>ce.ku,DurationFormatter:()=>lt,Ellipse:()=>w,Entity:()=>H.JH,Gradient:()=>$,Graphics:()=>M.T,GridLayout:()=>R.M,HeatLegend:()=>ge,HorizontalLayout:()=>_e.G,InterfaceColors:()=>ue,JSONParser:()=>Vs,JsonData:()=>qi.Q,Label:()=>C._,Layout:()=>oe.A,Legend:()=>ye,Line:()=>we.x,LinePattern:()=>hs,LinearGradient:()=>ae,ListData:()=>qi.k,Modal:()=>o,MultiDisposer:()=>ce.FV,MutableValueDisposer:()=>ce.cx,NumberFormatter:()=>Re,PathPattern:()=>Ji,Pattern:()=>Li.c,Percent:()=>Ie.gG,Picture:()=>Fe,PicturePattern:()=>Gs.v,PointedRectangle:()=>st.i,Polygon:()=>_,RadialGradient:()=>Ds,RadialLabel:()=>Be.x,RadialText:()=>qe.f,Rectangle:()=>W.A,RectanglePattern:()=>Yi,Root:()=>ie,RoundedRectangle:()=>K.c,Scrollbar:()=>Bt.L,SerialChart:()=>mr.j,Series:()=>fe.F,Slice:()=>us,Slider:()=>It,Sprite:()=>Ze.j,SpriteResizer:()=>Ss,Star:()=>T,Template:()=>ee.YS,Text:()=>xe.x,TextFormatter:()=>be.V,Theme:()=>e.Q,Tick:()=>br.d,Timezone:()=>pe,Tooltip:()=>N.u,Triangle:()=>rt,VerticalLayout:()=>he.Z,addLicense:()=>Ai.cP,array:()=>z,color:()=>Ue.$_,disposeAllRootElements:()=>Ai.UZ,ease:()=>rr,math:()=>Ve,net:()=>Ee,object:()=>Se,p0:()=>Ie.p0,p100:()=>Ie.AQ,p50:()=>Ie.CI,percent:()=>Ie.aQ,ready:()=>v.ready,registry:()=>Ai.i_,time:()=>mi,type:()=>U,utils:()=>v});var Ee={};F.r(Ee),F.d(Ee,{load:()=>wi,readBlob:()=>pi});var G=F(9239),xe=F(683),_e=F(6623),he=F(6053),R=F(680),ce=F(8362),z=F(3559),v=F(8261);class X{constructor(){Object.defineProperty(this,"_observer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_targets",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this._observer=new ResizeObserver(t=>{z.each(t,s=>{z.each(this._targets,a=>{a.target===s.target&&a.callback()})})})}addTarget(t,s){this._observer.observe(t,{box:"border-box"}),this._targets.push({target:t,callback:s})}removeTarget(t){this._observer.unobserve(t),z.keepIf(this._targets,s=>s.target!==t)}}class B{constructor(){Object.defineProperty(this,"_timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_targets",{enumerable:!0,configurable:!0,writable:!0,value:[]})}addTarget(t,s){if(null===this._timer){let l=null;const g=()=>{const f=Date.now();(null===l||f>l+B.delay)&&(l=f,z.each(this._targets,b=>{let I=b.target.getBoundingClientRect();(I.width!==b.size.width||I.height!==b.size.height)&&(b.size=I,b.callback())})),this._timer=0===this._targets.length?null:requestAnimationFrame(g)};this._timer=requestAnimationFrame(g)}this._targets.push({target:t,callback:s,size:{width:0,height:0,left:0,right:0,top:0,bottom:0,x:0,y:0}})}removeTarget(t){z.keepIf(this._targets,s=>s.target!==t),0===this._targets.length&&null!==this._timer&&(cancelAnimationFrame(this._timer),this._timer=null)}}Object.defineProperty(B,"delay",{enumerable:!0,configurable:!0,writable:!0,value:200});let ne=null;class P{constructor(t,s){Object.defineProperty(this,"_sensor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_listener",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this._sensor=function L(){return null===ne&&(ne=typeof ResizeObserver<"u"?new X:new B),ne}(),this._element=t,this._listener=v.onZoom(s),this._sensor.addTarget(t,s)}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._sensor.removeTarget(this._element),this._listener.dispose())}get sensor(){return this._sensor}}var H=F(4889);class ue extends H.JH{}Object.defineProperty(ue,"className",{enumerable:!0,configurable:!0,writable:!0,value:"InterfaceColors"}),Object.defineProperty(ue,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:H.JH.classNames.concat([ue.className])});var M=F(3232),W=F(3605),N=F(9084),be=F(398),Se=F(8148),U=F(2743);class Re extends H.JH{_setDefaults(){this._setDefault("negativeBase",0),this._setDefault("numberFormat","#,###.#####"),this._setDefault("smallNumberThreshold",1);const t="_big_number_suffix_",s="_small_number_suffix_",a="_byte_suffix_";this._setDefault("bigNumberPrefixes",[{number:1e3,suffix:this._t(t+"3")},{number:1e6,suffix:this._t(t+"6")},{number:1e9,suffix:this._t(t+"9")},{number:1e12,suffix:this._t(t+"12")},{number:1e15,suffix:this._t(t+"15")},{number:1e18,suffix:this._t(t+"18")},{number:1e21,suffix:this._t(t+"21")},{number:1e24,suffix:this._t(t+"24")}]),this._setDefault("smallNumberPrefixes",[{number:1e-24,suffix:this._t(s+"24")},{number:1e-21,suffix:this._t(s+"21")},{number:1e-18,suffix:this._t(s+"18")},{number:1e-15,suffix:this._t(s+"15")},{number:1e-12,suffix:this._t(s+"12")},{number:1e-9,suffix:this._t(s+"9")},{number:1e-6,suffix:this._t(s+"6")},{number:.001,suffix:this._t(s+"3")}]),this._setDefault("bytePrefixes",[{number:1,suffix:this._t(a+"B")},{number:1024,suffix:this._t(a+"KB")},{number:1048576,suffix:this._t(a+"MB")},{number:1073741824,suffix:this._t(a+"GB")},{number:1099511627776,suffix:this._t(a+"TB")},{number:0x4000000000000,suffix:this._t(a+"PB")}]),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(t,s,a){(null==s||U.isString(s)&&"number"===s.toLowerCase())&&(s=this.get("numberFormat",""));let l,g=Number(t);if(U.isObject(s))try{return this.get("intlLocales")?new Intl.NumberFormat(this.get("intlLocales"),s).format(g):new Intl.NumberFormat(void 0,s).format(g)}catch{return"Invalid"}else{s=v.cleanFormat(s);let b,f=this.parseFormat(s,this._root.language);b=g>this.get("negativeBase")?f.positive:g<this.get("negativeBase")?f.negative:f.zero,null!=a&&!b.mod&&(b=Se.copy(b),b.decimals.active=0==g?0:a),l=b.template.split(U.PLACEHOLDER).join(this.applyFormat(g,b))}return!0===this.get("forceLTR")&&(l="\u200e"+l),l}parseFormat(t,s){const a=s.translateEmpty("_thousandSeparator"),l=s.translateEmpty("_decimalSeparator");let g={positive:{thousands:{active:-1,passive:-1,interval:-1,separator:a},decimals:{active:-1,passive:-1,separator:l},template:"",source:"",parsed:!1},negative:{thousands:{active:-1,passive:-1,interval:-1,separator:a},decimals:{active:-1,passive:-1,separator:l},template:"",source:"",parsed:!1},zero:{thousands:{active:-1,passive:-1,interval:-1,separator:a},decimals:{active:-1,passive:-1,separator:l},template:"",source:"",parsed:!1}},f=(t=t.replace("||",U.PLACEHOLDER2)).split("|");return g.positive.source=f[0],typeof f[2]>"u"?g.zero=g.positive:g.zero.source=f[2],typeof f[1]>"u"?g.negative=g.positive:g.negative.source=f[1],Se.each(g,(b,I)=>{if(I.parsed)return;let k=I.source;"number"===k.toLowerCase()&&(k=this.get("numberFormat","#,###.#####"));let re=be.V.chunk(k,!0);for(let j=0;j<re.length;j++){let J=re[j];if(J.text=J.text.replace(U.PLACEHOLDER2,"|"),"value"===J.type){let S=J.text.match(/[#0.,]+[ ]?[abespABESP%!]?[abespABESP\u2030!]?/);if(S)if(null===S||""===S[0])I.template+=J.text;else{let Te=S[0].match(/[abespABESP%\u2030!]{2}|[abespABESP%\u2030]{1}$/);Te&&(I.mod=Te[0].toLowerCase(),I.modSpacing=!!S[0].match(/[ ]{1}[abespABESP%\u2030!]{1}$/));let A=S[0].split(".");if(""!==A[0]){I.thousands.active=(A[0].match(/0/g)||[]).length,I.thousands.passive=(A[0].match(/\#/g)||[]).length+I.thousands.active;let Pe=A[0].split(",");1===Pe.length||(I.thousands.interval=(Pe.pop()||"").length,0===I.thousands.interval&&(I.thousands.interval=-1))}typeof A[1]>"u"||(I.decimals.active=(A[1].match(/0/g)||[]).length,I.decimals.passive=(A[1].match(/\#/g)||[]).length+I.decimals.active),I.template+=J.text.split(S[0]).join(U.PLACEHOLDER)}}else I.template+=J.text}I.parsed=!0}),g}applyFormat(t,s){let a=t<0;t=Math.abs(t);let l="",g="",f=s.mod?s.mod.split(""):[];if(-1!==f.indexOf("b")){let j=this.applyPrefix(t,this.get("bytePrefixes"),-1!==f.indexOf("!"));t=j[0],l=j[1],g=j[2],s.modSpacing&&(g=" "+g)}else if(-1!==f.indexOf("a")){let j=this.applyPrefix(t,t<this.get("smallNumberThreshold")?this.get("smallNumberPrefixes"):this.get("bigNumberPrefixes"),-1!==f.indexOf("!"));t=j[0],l=j[1],g=j[2],s.modSpacing&&(g=" "+g)}else if(-1!==f.indexOf("p")){let j=Math.min(t.toString().length+2,21);t=parseFloat(t.toPrecision(j)),l=this._root.language.translate("_percentPrefix"),g=this._root.language.translate("_percentSuffix"),""==l&&""==g&&(g="%")}else if(-1!==f.indexOf("%")){let j=Math.min(t.toString().length+2,21);t*=100,t=parseFloat(t.toPrecision(j)),g="%"}else if(-1!==f.indexOf("\u2030")){let j=Math.min(t.toString().length+3,21);t*=1e3,t=parseFloat(t.toPrecision(j)),g="\u2030"}if(-1!==f.indexOf("e")){let j;j=s.decimals.passive>=0?t.toExponential(s.decimals.passive).split("e"):t.toExponential().split("e"),t=Number(j[0]),g="e"+j[1],s.modSpacing&&(g=" "+g)}else if(0===s.decimals.passive)t=Math.round(t);else if(s.decimals.passive>0){let j=Math.pow(10,s.decimals.passive);t=Math.round(t*j)/j}let b="",I=U.numberToString(t).split("."),k=I[0];if(k.length<s.thousands.active&&(k=Array(s.thousands.active-k.length+1).join("0")+k),s.thousands.interval>0){let j=[],J=k.split("").reverse().join("");for(let S=0,Te=k.length;S<=Te;S+=s.thousands.interval){let A=J.substr(S,s.thousands.interval).split("").reverse().join("");""!==A&&j.unshift(A)}k=j.join(s.thousands.separator)}b+=k,1===I.length&&I.push("");let re=I[1];return re.length<s.decimals.active&&(re+=Array(s.decimals.active-re.length+1).join("0")),""!==re&&(b+=s.decimals.separator+re),""===b&&(b="0"),0!==t&&a&&-1===f.indexOf("s")&&(b="-"+b),l&&(b=l+b),g&&(b+=g),b}applyPrefix(t,s,a=!1){let l=t,g="",f="",b=!1,I=1;for(let k=0,re=s.length;k<re;k++)s[k].number<=t&&(0===s[k].number?l=0:(l=t/s[k].number,I=s[k].number),g=s[k].prefix,f=s[k].suffix,b=!0);return!b&&a&&s.length&&0!=t&&(l=t/s[0].number,g=s[0].prefix,f=s[0].suffix,b=!0),b&&(l=parseFloat(l.toPrecision(Math.min(I.toString().length+Math.floor(l).toString().replace(/[^0-9]*/g,"").length,21)))),[l,g,f]}escape(t){return t.replace("||",U.PLACEHOLDER2)}unescape(t){return t.replace(U.PLACEHOLDER2,"|")}}function Ge(q,t){let s=0,a=0,l=1,g=0,f=0,b=0,I=0,k=0;return q.formatToParts(t).forEach(re=>{switch(re.type){case"year":s=+re.value;break;case"month":a=+re.value-1;break;case"day":l=+re.value;break;case"hour":g=+re.value;break;case"minute":f=+re.value;break;case"second":b=+re.value;break;case"fractionalSecond":I=+re.value;break;case"weekday":switch(re.value){case"Sun":k=0;break;case"Mon":k=1;break;case"Tue":k=2;break;case"Wed":k=3;break;case"Thu":k=4;break;case"Fri":k=5;break;case"Sat":k=6}}}),24===g&&(g=0),{year:s,month:a,day:l,hour:g,minute:f,second:b,millisecond:I,weekday:k}}function We(q,t){const{year:s,month:a,day:l,hour:g,minute:f,second:b,millisecond:I}=Ge(q,t);return Date.UTC(s,a,l,g,f,b,I)}class pe{constructor(t,s){if(Object.defineProperty(this,"_utc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dtf",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!s)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this.name=t,this._utc=new Intl.DateTimeFormat("UTC",{hour12:!1,timeZone:"UTC",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",weekday:"short",fractionalSecondDigits:3}),this._dtf=new Intl.DateTimeFormat("UTC",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",weekday:"short",fractionalSecondDigits:3})}static new(t){return new this(t,!0)}convertLocal(t){const s=this.offsetUTC(t),a=t.getTimezoneOffset(),l=new Date(t);l.setUTCMinutes(l.getUTCMinutes()-(s-a));const g=l.getTimezoneOffset();return a!=g&&l.setUTCMinutes(l.getUTCMinutes()+g-a),l}offsetUTC(t){return(We(this._utc,t)-We(this._dtf,t))/6e4}parseDate(t){return Ge(this._dtf,t)}}class xt extends H.JH{_setDefaults(){this._setDefault("capitalize",!0),this._setDefault("dateFormat","yyyy-MM-dd"),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(t,s){(typeof s>"u"||""===s)&&(s=this.get("dateFormat","yyyy-MM-dd"));let a,l=t;if(U.isObject(s))try{const b=this.get("intlLocales");return b?new Intl.DateTimeFormat(b,s).format(l):new Intl.DateTimeFormat(void 0,s).format(l)}catch{return"Invalid"}let g=this.parseFormat(s);const f=this._root.timezone;return f&&!this._root.utc&&(l=f.convertLocal(l)),U.isNumber(l.getTime())?(a=this.applyFormat(l,g),this.get("capitalize")&&(a=a.replace(/^.{1}/,a.substr(0,1).toUpperCase())),a):"Invalid date"}applyFormat(t,s){let l,g,f,b,I,k,re,j,a=s.template,J=t.getTime();this._root.utc?(l=t.getUTCFullYear(),g=t.getUTCMonth(),f=t.getUTCDay(),b=t.getUTCDate(),I=t.getUTCHours(),k=t.getUTCMinutes(),re=t.getUTCSeconds(),j=t.getUTCMilliseconds()):(l=t.getFullYear(),g=t.getMonth(),f=t.getDay(),b=t.getDate(),I=t.getHours(),k=t.getMinutes(),re=t.getSeconds(),j=t.getMilliseconds());for(let S=0,Te=s.parts.length;S<Te;S++){let A="";switch(s.parts[S]){case"G":A=this._t(l<0?"_era_bc":"_era_ad");break;case"yyyy":A=Math.abs(l).toString(),l<0&&(A+=this._t("_era_bc"));break;case"yyy":case"yy":case"y":A=Math.abs(l).toString().substr(-s.parts[S].length),l<0&&(A+=this._t("_era_bc"));break;case"YYYY":case"YYY":case"YY":case"Y":let Pe=v.getWeekYear(t,this._root.utc);A="YYYY"==s.parts[S]?Math.abs(Pe).toString():Math.abs(Pe).toString().substr(-s.parts[S].length),Pe<0&&(A+=this._t("_era_bc"));break;case"u":case"F":case"g":break;case"q":A=""+Math.ceil((t.getMonth()+1)/3);break;case"MMMMM":A=this._t(this._getMonth(g)).substr(0,1);break;case"MMMM":A=this._t(this._getMonth(g));break;case"MMM":A=this._t(this._getShortMonth(g));break;case"MM":A=v.padString(g+1,2,"0");break;case"M":A=(g+1).toString();break;case"ww":A=v.padString(v.getWeek(t,this._root.utc),2,"0");break;case"w":A=v.getWeek(t,this._root.utc).toString();break;case"W":A=v.getMonthWeek(t,this._root.utc).toString();break;case"dd":A=v.padString(b,2,"0");break;case"d":A=b.toString();break;case"DD":case"DDD":A=v.padString(v.getYearDay(t,this._root.utc).toString(),s.parts[S].length,"0");break;case"D":A=v.getYearDay(t,this._root.utc).toString();break;case"t":A=this._root.language.translateFunc("_dateOrd").call(this,b);break;case"E":A=(f||7).toString();break;case"EE":A=v.padString((f||7).toString(),2,"0");break;case"EEE":case"eee":A=this._t(this._getShortWeekday(f));break;case"EEEE":case"eeee":A=this._t(this._getWeekday(f));break;case"EEEEE":case"eeeee":A=this._t(this._getShortWeekday(f)).substr(0,1);break;case"e":case"ee":A=(f-(this._root.locale.firstDayOfWeek||1)+1).toString(),"ee"==s.parts[S]&&(A=v.padString(A,2,"0"));break;case"a":A=this._t(I>=12?"PM":"AM");break;case"aa":A=this._t(I>=12?"P.M.":"A.M.");break;case"aaa":A=this._t(I>=12?"P":"A");break;case"h":A=v.get12Hours(I).toString();break;case"hh":A=v.padString(v.get12Hours(I),2,"0");break;case"H":A=I.toString();break;case"HH":A=v.padString(I,2,"0");break;case"K":A=v.get12Hours(I,0).toString();break;case"KK":A=v.padString(v.get12Hours(I,0),2,"0");break;case"k":A=(I+1).toString();break;case"kk":A=v.padString(I+1,2,"0");break;case"m":A=k.toString();break;case"mm":A=v.padString(k,2,"0");break;case"s":A=re.toString();break;case"ss":A=v.padString(re,2,"0");break;case"S":case"SS":case"SSS":A=Math.round(j/1e3*Math.pow(10,s.parts[S].length)).toString();break;case"x":A=J.toString();break;case"n":case"nn":case"nnn":A=v.padString(j,s.parts[S].length,"0");break;case"z":A=v.getTimeZone(t,!1,!1,this._root.utc);break;case"zz":A=v.getTimeZone(t,!0,!1,this._root.utc);break;case"zzz":A=v.getTimeZone(t,!1,!0,this._root.utc);break;case"zzzz":A=v.getTimeZone(t,!0,!0,this._root.utc);break;case"Z":case"ZZ":let me=this._root.utc?"UTC":this._root.timezone;me instanceof pe&&(me=me.name);const Ne=me?v.getTimezoneOffset(me):t.getTimezoneOffset();let Ae=Math.abs(Ne)/60,De=Math.floor(Ae),He=60*Ae-60*De;this._root.utc&&(De=0,He=0),"Z"==s.parts[S]?(A="GMT",A+=Ne>0?"-":"+",A+=v.padString(De,2)+":"+v.padString(He,2)):(A=Ne>0?"-":"+",A+=v.padString(De,2)+v.padString(He,2));break;case"i":A=t.toISOString();break;case"I":A=t.toUTCString()}a=a.replace(U.PLACEHOLDER,A)}return a}parseFormat(t){let s={template:"",parts:[]},a=be.V.chunk(t,!0);for(let l=0;l<a.length;l++){let g=a[l];if("value"===g.type){if(g.text.match(/^date$/i)){let b=this.get("dateFormat","yyyy-MM-dd");U.isString(b)||(b="yyyy-MM-dd"),g.text=b}let f=g.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|q|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g);if(f)for(let b=0;b<f.length;b++)s.parts.push(f[b]),g.text=g.text.replace(f[b],U.PLACEHOLDER)}s.template+=g.text}return s}_months(){return["January","February","March","April","May","June","July","August","September","October","November","December"]}_getMonth(t){return this._months()[t]}_shortMonths(){return["Jan","Feb","Mar","Apr","May(short)","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}_getShortMonth(t){return this._shortMonths()[t]}_weekdays(){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}_getWeekday(t){return this._weekdays()[t]}_shortWeekdays(){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}_getShortWeekday(t){return this._shortWeekdays()[t]}parse(t,s){if(t instanceof Date)return t;if(U.isNumber(t))return new Date(t);U.isString(t)||(t=t.toString());let a,l="";s=(s=v.cleanFormat(s)).substr(0,t.length);let g=this.parseFormat(s),f={year:-1,year3:-1,year2:-1,year1:-1,month:-1,monthShort:-1,monthLong:-1,weekdayShort:-1,weekdayLong:-1,day:-1,yearDay:-1,week:-1,hourBase0:-1,hour12Base0:-1,hourBase1:-1,hour12Base1:-1,minute:-1,second:-1,millisecond:-1,millisecondDigits:-1,am:-1,zone:-1,timestamp:-1,iso:-1},b={year:1970,month:0,day:1,hour:0,minute:0,second:0,millisecond:0,timestamp:null,offset:0,utc:this._root.utc},I=0,k=0;for(let J=0;J<g.parts.length;J++){switch(k=J+I+1,g.parts[J]){case"yyyy":case"YYYY":l+="([0-9]{4})",f.year=k;break;case"yyy":case"YYY":l+="([0-9]{3})",f.year3=k;break;case"yy":case"YY":l+="([0-9]{2})",f.year2=k;break;case"y":case"Y":l+="([0-9]{1})",f.year1=k;break;case"MMMM":l+="("+this.getStringList(this._months()).join("|")+")",f.monthLong=k;break;case"MMM":l+="("+this.getStringList(this._shortMonths()).join("|")+")",f.monthShort=k;break;case"MM":case"M":l+="([0-9]{2}|[0-9]{1})",f.month=k;break;case"ww":case"w":l+="([0-9]{2}|[0-9]{1})",f.week=k;break;case"dd":case"d":l+="([0-9]{2}|[0-9]{1})",f.day=k;break;case"DDD":case"DD":case"D":l+="([0-9]{3}|[0-9]{2}|[0-9]{1})",f.yearDay=k;break;case"dddd":l+="("+this.getStringList(this._weekdays()).join("|")+")",f.weekdayLong=k;break;case"ddd":l+="("+this.getStringList(this._shortWeekdays()).join("|")+")",f.weekdayShort=k;break;case"aaa":case"aa":case"a":l+="("+this.getStringList(["AM","PM","A.M.","P.M.","A","P"]).join("|")+")",f.am=k;break;case"hh":case"h":l+="([0-9]{2}|[0-9]{1})",f.hour12Base1=k;break;case"HH":case"H":l+="([0-9]{2}|[0-9]{1})",f.hourBase0=k;break;case"KK":case"K":l+="([0-9]{2}|[0-9]{1})",f.hour12Base0=k;break;case"kk":case"k":l+="([0-9]{2}|[0-9]{1})",f.hourBase1=k;break;case"mm":case"m":l+="([0-9]{2}|[0-9]{1})",f.minute=k;break;case"ss":case"s":l+="([0-9]{2}|[0-9]{1})",f.second=k;break;case"SSS":case"SS":case"S":l+="([0-9]{3}|[0-9]{2}|[0-9]{1})",f.millisecond=k,f.millisecondDigits=g.parts[J].length;break;case"nnn":case"nn":case"n":l+="([0-9]{3}|[0-9]{2}|[0-9]{1})",f.millisecond=k;break;case"x":l+="([0-9]{1,})",f.timestamp=k;break;case"Z":l+="GMT([-+]+[0-9]{2}:[0-9]{2})",f.zone=k;break;case"ZZ":l+="([\\-+]+[0-9]{2}[0-9]{2})",f.zone=k;break;case"i":l+="([0-9]{4})-?([0-9]{2})-?([0-9]{2})T?([0-9]{2}):?([0-9]{2}):?([0-9]{2})\\.?([0-9]{0,3})([zZ]|[+\\-][0-9]{2}:?[0-9]{2}|$)",f.iso=k,I+=7;break;case"G":case"YYYY":case"YYY":case"YY":case"Y":case"MMMMM":case"W":case"EEEEE":case"EEEE":case"EEE":case"EE":case"E":case"eeeee":case"eeee":case"eee":case"ee":case"e":case"zzzz":case"zzz":case"zz":case"z":case"t":I--}l+="[^0-9]*"}let re=new RegExp(l),j=t.match(re);if(j){if(f.year>-1&&(b.year=parseInt(j[f.year])),f.year3>-1){let J=parseInt(j[f.year3]);J+=1e3,b.year=J}if(f.year2>-1){let J=parseInt(j[f.year2]);J+=J>50?1e3:2e3,b.year=J}if(f.year1>-1){let J=parseInt(j[f.year1]);J=10*Math.floor((new Date).getFullYear()/10)+J,b.year=J}if(f.monthLong>-1&&(b.month=this.resolveMonth(j[f.monthLong])),f.monthShort>-1&&(b.month=this.resolveShortMonth(j[f.monthShort])),f.month>-1&&(b.month=parseInt(j[f.month])-1),f.week>-1&&-1===f.day&&(b.month=0,b.day=v.getDayFromWeek(parseInt(j[f.week]),b.year,1,this._root.utc)),f.day>-1&&(b.day=parseInt(j[f.day])),f.yearDay>-1&&(b.month=0,b.day=parseInt(j[f.yearDay])),f.hourBase0>-1&&(b.hour=parseInt(j[f.hourBase0])),f.hourBase1>-1&&(b.hour=parseInt(j[f.hourBase1])-1),f.hour12Base0>-1){let J=parseInt(j[f.hour12Base0]);11==J&&(J=0),f.am>-1&&!this.isAm(j[f.am])&&(J+=12),b.hour=J}if(f.hour12Base1>-1){let J=parseInt(j[f.hour12Base1]);12==J&&(J=0),f.am>-1&&!this.isAm(j[f.am])&&(J+=12),b.hour=J}if(f.minute>-1&&(b.minute=parseInt(j[f.minute])),f.second>-1&&(b.second=parseInt(j[f.second])),f.millisecond>-1){let J=parseInt(j[f.millisecond]);2==f.millisecondDigits?J*=10:1==f.millisecondDigits&&(J*=100),b.millisecond=J}if(f.timestamp>-1){b.timestamp=parseInt(j[f.timestamp]);const J=new Date(b.timestamp);b.year=J.getUTCFullYear(),b.month=J.getUTCMonth(),b.day=J.getUTCDate(),b.hour=J.getUTCHours(),b.minute=J.getUTCMinutes(),b.second=J.getUTCSeconds(),b.millisecond=J.getUTCMilliseconds()}f.zone>-1&&(b.offset=this.resolveTimezoneOffset(new Date(b.year,b.month,b.day),j[f.zone])),f.iso>-1&&(b.year=U.toNumber(j[f.iso+0]),b.month=U.toNumber(j[f.iso+1])-1,b.day=U.toNumber(j[f.iso+2]),b.hour=U.toNumber(j[f.iso+3]),b.minute=U.toNumber(j[f.iso+4]),b.second=U.toNumber(j[f.iso+5]),b.millisecond=U.toNumber(j[f.iso+6]),"Z"==j[f.iso+7]||"z"==j[f.iso+7]?b.utc=!0:""!=j[f.iso+7]&&(b.offset=this.resolveTimezoneOffset(new Date(b.year,b.month,b.day),j[f.iso+7]))),a=b.utc?new Date(Date.UTC(b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond)):new Date(b.year,b.month,b.day,b.hour,b.minute+b.offset,b.second,b.millisecond)}else a=new Date(t);return a}resolveTimezoneOffset(t,s){if(s.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/)){let l=s.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/),g=l[1],b=l[3],I=60*parseInt(l[2])+parseInt(b);return"+"==g&&(I*=-1),I-(t||new Date).getTimezoneOffset()}return 0}resolveMonth(t){let s=this._months().indexOf(t);return s>-1||!this._root.language.isDefault()&&(s=this._root.language.translateAll(this._months()).indexOf(t),s>-1)?s:0}resolveShortMonth(t){let s=this._shortMonths().indexOf(t);return s>-1||(s=this._months().indexOf(t),s>-1)||this._root.language&&!this._root.language.isDefault()&&(s=this._root.language.translateAll(this._shortMonths()).indexOf(t),s>-1)?s:0}isAm(t){return this.getStringList(["AM","A.M.","A"]).indexOf(t.toUpperCase())>-1}getStringList(t){let s=[];for(let a=0;a<t.length;a++)s.push(v.escapeForRgex(this._root.language?this._t(t[a]):t[a]));return s}}class lt extends H.JH{constructor(){super(...arguments),Object.defineProperty(this,"_unitAliases",{enumerable:!0,configurable:!0,writable:!0,value:{Y:"y",D:"d",H:"h",K:"h",k:"h",n:"S"}})}_setDefaults(){const t="_duration_millisecond",s="_duration_second",a="_duration_minute",l="_duration_hour",g="_duration_day",f="_duration_week",b="_duration_month",re="_minute",j="_hour",J="_day",S="_week",Te="_week",A="_year";this._setDefault("negativeBase",0),this._setDefault("baseUnit","second"),this._setDefault("durationFormats",{millisecond:{millisecond:this._t(t),second:this._t(t+"_second"),minute:this._t(t+re),hour:this._t(t+j),day:this._t(t+J),week:this._t(t+S),month:this._t(t+Te),year:this._t(t+A)},second:{second:this._t(s),minute:this._t(s+re),hour:this._t(s+j),day:this._t(s+J),week:this._t(s+S),month:this._t(s+Te),year:this._t(s+A)},minute:{minute:this._t(a),hour:this._t(a+j),day:this._t(a+J),week:this._t(a+S),month:this._t(a+Te),year:this._t(a+A)},hour:{hour:this._t(l),day:this._t(l+J),week:this._t(l+S),month:this._t(l+Te),year:this._t(l+A)},day:{day:this._t(g),week:this._t(g+S),month:this._t(g+Te),year:this._t(g+A)},week:{week:this._t(f),month:this._t(f+Te),year:this._t(f+A)},month:{month:this._t(b),year:this._t(b+A)},year:{year:this._t("_duration_year")}}),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(t,s,a){let l=a||this.get("baseUnit");(typeof s>"u"||""===s)&&(s=null!=this.get("durationFormat")?this.get("durationFormat"):this.getFormat(U.toNumber(t),void 0,l)),s=v.cleanFormat(s);let b,g=this.parseFormat(s,l),f=Number(t);b=f>this.get("negativeBase")?g.positive:f<this.get("negativeBase")?g.negative:g.zero;let I=this.applyFormat(f,b);return""!==b.color&&(I="["+b.color+"]"+I+"[/]"),I}parseFormat(t,s){let a=s||this.get("baseUnit"),l={positive:{color:"",template:"",parts:[],source:"",baseUnit:a,parsed:!1,absolute:!1},negative:{color:"",template:"",parts:[],source:"",baseUnit:a,parsed:!1,absolute:!1},zero:{color:"",template:"",parts:[],source:"",baseUnit:a,parsed:!1,absolute:!1}},g=(t=t.replace("||",U.PLACEHOLDER2)).split("|");return l.positive.source=g[0],typeof g[2]>"u"?l.zero=l.positive:l.zero.source=g[2],typeof g[1]>"u"?l.negative=l.positive:l.negative.source=g[1],Se.each(l,(f,b)=>{if(b.parsed)return;let I=b.source,k=[];k=b.source.match(/^\[([^\]]*)\]/),k&&k.length&&""!==k[0]&&(I=b.source.substr(k[0].length),b.color=k[1]);let re=be.V.chunk(I,!0);for(let j=0;j<re.length;j++){let J=re[j];if(J.text=J.text.replace(U.PLACEHOLDER2,"|"),"value"===J.type){J.text.match(/[yYMdDwhHKkmsSn]+a/)&&(b.absolute=!0,J.text=J.text.replace(/([yYMdDwhHKkmsSn]+)a/,"$1"));let S=J.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);if(S)for(let Te=0;Te<S.length;Te++)null==S[Te]&&(S[Te]=this._unitAliases[S[Te]]),b.parts.push(S[Te]),J.text=J.text.replace(S[Te],U.PLACEHOLDER)}b.template+=J.text}b.parsed=!0}),l}applyFormat(t,s){let a=!s.absolute&&t<this.get("negativeBase");t=Math.abs(t);let l=this.toTimeStamp(t,s.baseUnit),g=s.template;for(let f=0,b=s.parts.length;f<b;f++){let I=s.parts[f],k=this._toTimeUnit(I.substr(0,1)),re=I.length,j=Math.floor(l/this._getUnitValue(k));g=g.replace(U.PLACEHOLDER,v.padString(j,re,"0")),l-=j*this._getUnitValue(k)}return a&&(g="-"+g),g}toTimeStamp(t,s){return t*this._getUnitValue(s)}_toTimeUnit(t){switch(t){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year"}}getFormat(t,s,a){if(null!=this.get("durationFormat"))return this.get("durationFormat");if(a||(a=this.get("baseUnit")),null!=s&&t!=s){t=Math.abs(t),s=Math.abs(s);let l=this.getValueUnit(Math.max(t,s),a);return this.get("durationFormats")[a][l]}{let l=this.getValueUnit(t,a);return this.get("durationFormats")[a][l]}}getValueUnit(t,s){s||(s=this.get("baseUnit"));let a,l=this.getMilliseconds(t,s);return Se.eachContinue(this._getUnitValues(),(g,f)=>{if(g==s||a){if(l/f<=1)return a||(a=g),!1;a=g}return!0}),a}getMilliseconds(t,s){return s||(s=this.get("baseUnit")),t*this._getUnitValue(s)}_getUnitValue(t){return this._getUnitValues()[t]}_getUnitValues(){return{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6}}}var Le=F(7551);class dt extends H.JH{_setDefaults(){this.setPrivate("defaultLocale",Le.default),super._setDefaults()}translate(t,s,...a){s||(s=this._root.locale||this.getPrivate("defaultLocale"));let l=t,g=s[t];if(null===g)l="";else if(null!=g)g&&(l=g);else if(s!==this.getPrivate("defaultLocale"))return this.translate(t,this.getPrivate("defaultLocale"),...a);if(a.length)for(let f=a.length,b=0;b<f;++b)l=l.split("%"+(b+1)).join(a[b]);return l}translateAny(t,s,...a){return this.translate(t,s,...a)}setTranslationAny(t,s,a){(a||this._root.locale)[t]=s}setTranslationsAny(t,s){Se.each(t,(a,l)=>{this.setTranslationAny(a,l,s)})}translateEmpty(t,s,...a){let l=this.translate(t,s,...a);return l==t?"":l}translateFunc(t,s){return this._root.locale[t]?this._root.locale[t]:s!==this.getPrivate("defaultLocale")?this.translateFunc(t,this.getPrivate("defaultLocale")):()=>""}translateAll(t,s){return this.isDefault()?t:z.map(t,a=>this.translate(a,s))}isDefault(){return this.getPrivate("defaultLocale")===this._root.locale}}var Qe=F(3895),gt=F(2231),pt=F(4686),Ue=F(796);class zt{constructor(t=1,s=0,a=0,l=1,g=0,f=0){Object.defineProperty(this,"a",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"b",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"c",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"d",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tx",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.a=t,this.b=s,this.c=a,this.d=l,this.tx=g,this.ty=f}setTransform(t,s,a,l,g,f=1){this.a=Math.cos(g)*f,this.b=Math.sin(g)*f,this.c=-Math.sin(g)*f,this.d=Math.cos(g)*f,this.tx=t-(a*this.a+l*this.c),this.ty=s-(a*this.b+l*this.d)}apply(t){return{x:this.a*t.x+this.c*t.y+this.tx,y:this.b*t.x+this.d*t.y+this.ty}}applyInverse(t){const s=1/(this.a*this.d+this.c*-this.b);return{x:this.d*s*t.x+-this.c*s*t.y+(this.ty*this.c-this.tx*this.d)*s,y:this.a*s*t.y+-this.b*s*t.x+(-this.ty*this.a+this.tx*this.b)*s}}append(t){const s=this.a,a=this.b,l=this.c,g=this.d;this.a=t.a*s+t.b*l,this.b=t.a*a+t.b*g,this.c=t.c*s+t.d*l,this.d=t.c*a+t.d*g,this.tx=t.tx*s+t.ty*l+this.tx,this.ty=t.tx*a+t.ty*g+this.ty}prepend(t){const s=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){const a=this.a,l=this.c;this.a=a*t.a+this.b*t.c,this.b=a*t.b+this.b*t.d,this.c=l*t.a+this.d*t.c,this.d=l*t.b+this.d*t.d}this.tx=s*t.a+this.ty*t.c+t.tx,this.ty=s*t.b+this.ty*t.d+t.ty}copyFrom(t){this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty}}var Ie=F(7039),Ve=F(9472),ci=2*Math.PI,yi=function(t,s,a,l,g,f,b){var I=t.x,k=t.y;return{x:l*(I*=s)-g*(k*=a)+f,y:g*I+l*k+b}},ds=function(t,s){var a=1.5707963267948966===s?.551915024494:-1.5707963267948966===s?-.551915024494:1.3333333333333333*Math.tan(s/4),l=Math.cos(t),g=Math.sin(t),f=Math.cos(t+s),b=Math.sin(t+s);return[{x:l-g*a,y:g+l*a},{x:f+b*a,y:b-f*a},{x:f,y:b}]},Wt=function(t,s,a,l){var f=t*a+s*l;return f>1&&(f=1),f<-1&&(f=-1),(t*l-s*a<0?-1:1)*Math.acos(f)};const Gi=function(t){var s=t.px,a=t.py,l=t.cx,g=t.cy,f=t.rx,b=t.ry,I=t.xAxisRotation,k=void 0===I?0:I,re=t.largeArcFlag,j=void 0===re?0:re,J=t.sweepFlag,S=void 0===J?0:J,Te=[];if(0===f||0===b)return[];var A=Math.sin(k*ci/360),Pe=Math.cos(k*ci/360),me=Pe*(s-l)/2+A*(a-g)/2,Ne=-A*(s-l)/2+Pe*(a-g)/2;if(0===me&&0===Ne)return[];f=Math.abs(f),b=Math.abs(b);var Ae=Math.pow(me,2)/Math.pow(f,2)+Math.pow(Ne,2)/Math.pow(b,2);Ae>1&&(f*=Math.sqrt(Ae),b*=Math.sqrt(Ae));var De=function(t,s,a,l,g,f,b,I,k,re,j,J){var S=Math.pow(g,2),Te=Math.pow(f,2),A=Math.pow(j,2),Pe=Math.pow(J,2),me=S*Te-S*Pe-Te*A;me<0&&(me=0),me/=S*Pe+Te*A;var Ne=(me=Math.sqrt(me)*(b===I?-1:1))*g/f*J,Ae=me*-f/g*j,De=re*Ne-k*Ae+(t+a)/2,He=k*Ne+re*Ae+(s+l)/2,it=(j-Ne)/g,ft=(J-Ae)/f,vt=(-j-Ne)/g,Tt=(-J-Ae)/f,ot=Wt(1,0,it,ft),bt=Wt(it,ft,vt,Tt);return 0===I&&bt>0&&(bt-=ci),1===I&&bt<0&&(bt+=ci),[De,He,ot,bt]}(s,a,l,g,f,b,j,S,A,Pe,me,Ne),He=function(t,s){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function q(t,s){var a=[],l=!0,g=!1,f=void 0;try{for(var I,b=t[Symbol.iterator]();!(l=(I=b.next()).done)&&(a.push(I.value),!s||a.length!==s);l=!0);}catch(k){g=!0,f=k}finally{try{!l&&b.return&&b.return()}finally{if(g)throw f}}return a}(t,s);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(De,4),it=He[0],ft=He[1],vt=He[2],Tt=He[3],ot=Math.abs(Tt)/(ci/4);Math.abs(1-ot)<1e-7&&(ot=1);var bt=Math.max(Math.ceil(ot),1);Tt/=bt;for(var Dt=0;Dt<bt;Dt++)Te.push(ds(vt,Tt)),vt+=Tt;return Te.map(function(ze){var at=yi(ze[0],f,b,Pe,A,it,ft),ht=at.x,ai=at.y,ut=yi(ze[1],f,b,Pe,A,it,ft),Et=ut.x,Gt=ut.y,Ut=yi(ze[2],f,b,Pe,A,it,ft);return{x1:ht,y1:ai,x2:Et,y2:Gt,x:Ut.x,y:Ut.y}})};function Di(q,t,s){if(t!==s)throw new Error("Required "+s+" arguments for "+q+" but got "+t)}function ii(q,t,s){if(t<s)throw new Error("Required at least "+s+" arguments for "+q+" but got "+t)}function Yt(q,t,s){if(ii(q,t,s),t%s!=0)throw new Error("Arguments for "+q+" must be in pairs of "+s)}function Nt(q){for(let t=0;t<q.length;t+=7){let s=t+3,a=q[s];if(a.length>1){const l=/^([01])([01])(.*)$/.exec(a);null!==l&&(q.splice(s,0,l[1]),++s,q.splice(s,0,l[2]),++s,l[3].length>0?q[s]=l[3]:q.splice(s,1))}if(++s,a=q[s],a.length>1){const l=/^([01])(.+)$/.exec(a);null!==l&&(q.splice(s,0,l[1]),++s,q[s]=l[2])}}}function di(q){if(0===q||1===q)return q;throw new Error("Flag must be 0 or 1")}function vi(q,t){for(;(!q.interactive||t(q))&&q._parent;)q=q._parent}function Ri(q,t,s){return v.addEventListener(q,v.getRendererEvent(t),a=>{const l=v.getEventTarget(a);let g=a.touches;g?(0==g.length&&(g=a.changedTouches),s(z.copy(g),l)):s([a],l)})}function fi(q){const t=document.createElement("canvas");t.width=1,t.height=1;const s=t.getContext("2d",{willReadFrequently:!0});s.drawImage(q,0,0,1,1);try{return s.getImageData(0,0,1,1),!1}catch{return console.warn('Image "'+q.src+'" is loaded from different host and is not covered by CORS policy. For more information about the implications read here: https://www.amcharts.com/docs/v5/concepts/cors'),!0}}function ni(q){q.width=0,q.height=0,q.style.width="0px",q.style.height="0px"}class Ii{constructor(){Object.defineProperty(this,"_x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_y",{enumerable:!0,configurable:!0,writable:!0,value:0})}get x(){return this._x}get y(){return this._y}set x(t){this._x=t}set y(t){this._y=t}}class qt extends ce.KK{constructor(t){super(),Object.defineProperty(this,"_layer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mask",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"exportable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"interactive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"inactive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"wheelable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"cancelTouch",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isMeasured",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"buttonMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"alpha",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"compoundAlpha",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"angle",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"scale",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"crisp",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"pivot",{enumerable:!0,configurable:!0,writable:!0,value:new Ii}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cursorOverStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_replacedCursorStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_localMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new zt}),Object.defineProperty(this,"_matrix",{enumerable:!0,configurable:!0,writable:!0,value:new zt}),Object.defineProperty(this,"_uMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new zt}),Object.defineProperty(this,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_localBounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_bounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._renderer=t}_dispose(){this._renderer._removeObject(this),this.getLayer().dirty=!0}getCanvas(){return this.getLayer().view}getLayer(){let t=this;for(;;){if(t._layer)return t._layer;if(!t._parent)return this._renderer.defaultLayer;t=t._parent}}setLayer(t,s){null==t?this._layer=void 0:(this._layer=this._renderer.getLayer(t,!0),this._layer.visible=!0,this._layer.margin=s,s&&v.setInteractive(this._layer.view,!1),this._renderer._ghostLayer.setMargin(this._renderer.layers),this._parent&&this._parent.registerChildLayer(this._layer),this._layer.dirty=!0,this._renderer.resizeLayer(this._layer),this._renderer.resizeGhost())}markDirtyLayer(){this.getLayer().dirty=!0}clear(){this.invalidateBounds()}invalidateBounds(){this._localBounds=void 0}_addBounds(t){}_getColorId(){return void 0===this._colorId&&(this._colorId=this._renderer.paintId(this)),this._colorId}_isInteractive(){return 0==this.inactive&&(this.interactive||this._renderer._forceInteractive>0)}_isInteractiveMask(){return this._isInteractive()}contains(t){for(;;){if(t===this)return!0;if(!t._parent)return!1;t=t._parent}}toGlobal(t){return this._matrix.apply(t)}toLocal(t){return this._matrix.applyInverse(t)}getLocalMatrix(){return this._uMatrix.setTransform(0,0,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale),this._uMatrix}getLocalBounds(){return this._localBounds||(this._localBounds={left:1e7,top:1e7,right:-1e7,bottom:-1e7},this._addBounds(this._localBounds)),this._localBounds}getAdjustedBounds(t){this._setMatrix();const s=this.getLocalMatrix(),a=s.apply({x:t.left,y:t.top}),l=s.apply({x:t.right,y:t.top}),g=s.apply({x:t.right,y:t.bottom}),f=s.apply({x:t.left,y:t.bottom});return{left:Math.min(a.x,l.x,g.x,f.x),top:Math.min(a.y,l.y,g.y,f.y),right:Math.max(a.x,l.x,g.x,f.x),bottom:Math.max(a.y,l.y,g.y,f.y)}}on(t,s,a){return this.interactive?this._renderer._addEvent(this,t,s,a):new ce.ku(()=>{})}_setMatrix(){this._localMatrix.setTransform(this.x,this.y,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale),this._matrix.copyFrom(this._localMatrix),this._parent&&this._matrix.prepend(this._parent._matrix)}_transform(t,s){const a=this._matrix;let l=a.tx*s,g=a.ty*s;this.crisp&&(l=Math.floor(l)+.5,g=Math.floor(g)+.5),t.setTransform(a.a*s,a.b*s,a.c*s,a.d*s,l,g)}_transformMargin(t,s,a){const l=this._matrix;t.setTransform(l.a*s,l.b*s,l.c*s,l.d*s,(l.tx+a.left)*s,(l.ty+a.top)*s)}_transformLayer(t,s,a){a.margin?this._transformMargin(t,a.scale||s,a.margin):this._transform(t,a.scale||s)}render(t){if(this.visible&&(!1!==this.exportable||!this._renderer._omitTainted)){this._setMatrix();const s=this._renderer.resolution,a=this._renderer.layers,l=this._renderer._ghostLayer,g=l.context,f=this.mask;f&&f._setMatrix(),z.each(a,b=>{if(b){const I=b.context;I.save(),f&&(f._transformLayer(I,s,b),f._runPath(I),I.clip()),I.globalAlpha=this.compoundAlpha*this.alpha,this._transformLayer(I,s,b),this.filter&&(I.filter=this.filter)}}),g.save(),f&&this._isInteractiveMask()&&(f._transformMargin(g,s,l.margin),f._runPath(g),g.clip()),this._transformMargin(g,s,l.margin),this._render(t),g.restore(),z.each(a,b=>{b&&b.context.restore()})}}_render(t){!1===this.exportable&&((this._layer||t).tainted=!0)}hovering(){return this._renderer._hovering.has(this)}dragging(){return this._renderer._dragging.some(t=>t.value===this)}shouldCancelTouch(){const t=this._renderer;return!(t.tapToActivate&&!t._touchActive)&&(!!this.cancelTouch||!!this._parent&&this._parent.shouldCancelTouch())}}class Vi extends qt{constructor(){super(...arguments),Object.defineProperty(this,"interactiveChildren",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_childLayers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_children",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_isInteractiveMask(){return this.interactiveChildren||super._isInteractiveMask()}addChild(t){t._parent=this,this._children.push(t),t._layer&&this.registerChildLayer(t._layer)}addChildAt(t,s){t._parent=this,this._children.splice(s,0,t),t._layer&&this.registerChildLayer(t._layer)}removeChild(t){t._parent=void 0,z.removeFirst(this._children,t)}_render(t){super._render(t);const s=this._renderer;this.interactive&&this.interactiveChildren&&++s._forceInteractive;const a=this._layer||t;z.each(this._children,l=>{l.compoundAlpha=this.compoundAlpha*this.alpha,l.render(a)}),this.interactive&&this.interactiveChildren&&--s._forceInteractive}registerChildLayer(t){this._childLayers||(this._childLayers=[]),z.pushOne(this._childLayers,t),this._parent&&this._parent.registerChildLayer(t)}markDirtyLayer(t=!1){super.markDirtyLayer(),t&&this._childLayers&&z.each(this._childLayers,s=>s.dirty=!0)}_dispose(){super._dispose(),this._childLayers&&z.each(this._childLayers,t=>{t.dirty=!0})}}function kt(q,t){q.left=Math.min(q.left,t.x),q.top=Math.min(q.top,t.y),q.right=Math.max(q.right,t.x),q.bottom=Math.max(q.bottom,t.y)}class wt{colorize(t,s){}path(t){}addBounds(t){}}class Ct extends wt{colorize(t,s){t.beginPath()}}class Ui extends wt{constructor(t){super(),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:t})}colorize(t,s){t.fillStyle=void 0!==s?s:this.color}}class fs extends wt{constructor(t){super(),Object.defineProperty(this,"clearShadow",{enumerable:!0,configurable:!0,writable:!0,value:t})}colorize(t,s){t.fill(),this.clearShadow&&(t.shadowColor="",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}}class gs extends wt{colorize(t,s){t.stroke()}}class ps extends wt{constructor(t,s,a){super(),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"lineJoin",{enumerable:!0,configurable:!0,writable:!0,value:a})}colorize(t,s){t.strokeStyle=void 0!==s?s:this.color,t.lineWidth=this.width,this.lineJoin&&(t.lineJoin=this.lineJoin)}}class Hi extends wt{constructor(t){super(),Object.defineProperty(this,"dash",{enumerable:!0,configurable:!0,writable:!0,value:t})}colorize(t,s){t.setLineDash(this.dash)}}class ks extends wt{constructor(t){super(),Object.defineProperty(this,"dashOffset",{enumerable:!0,configurable:!0,writable:!0,value:t})}colorize(t,s){t.lineDashOffset=this.dashOffset}}class ms extends wt{constructor(t,s,a,l){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:l})}path(t){t.rect(this.x,this.y,this.width,this.height)}addBounds(t){const s=this.x,a=this.y,l=s+this.width,g=a+this.height;kt(t,{x:s,y:a}),kt(t,{x:l,y:a}),kt(t,{x:s,y:g}),kt(t,{x:l,y:g})}}class Zt extends wt{constructor(t,s,a){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:a})}path(t){t.moveTo(this.x+this.radius,this.y),t.arc(this.x,this.y,this.radius,0,2*Math.PI)}addBounds(t){kt(t,{x:this.x-this.radius,y:this.y-this.radius}),kt(t,{x:this.x+this.radius,y:this.y+this.radius})}}class bs extends wt{constructor(t,s,a,l){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"radiusX",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"radiusY",{enumerable:!0,configurable:!0,writable:!0,value:l})}path(t){t.ellipse(0,0,this.radiusX,this.radiusY,0,0,2*Math.PI)}addBounds(t){kt(t,{x:this.x-this.radiusX,y:this.y-this.radiusY}),kt(t,{x:this.x+this.radiusX,y:this.y+this.radiusY})}}class Wi extends wt{constructor(t,s,a,l,g,f){super(),Object.defineProperty(this,"cx",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"cy",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"startAngle",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"endAngle",{enumerable:!0,configurable:!0,writable:!0,value:g}),Object.defineProperty(this,"anticlockwise",{enumerable:!0,configurable:!0,writable:!0,value:f})}path(t){this.radius>0&&t.arc(this.cx,this.cy,this.radius,this.startAngle,this.endAngle,this.anticlockwise)}addBounds(t){let s=Ve.getArcBounds(this.cx,this.cy,this.startAngle*Ve.DEGREES,this.endAngle*Ve.DEGREES,this.radius);kt(t,{x:s.left,y:s.top}),kt(t,{x:s.right,y:s.bottom})}}class _s extends wt{constructor(t,s,a,l,g){super(),Object.defineProperty(this,"x1",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"y1",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"x2",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"y2",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:g})}path(t){this.radius>0&&t.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)}addBounds(t){}}class ys extends wt{constructor(t,s){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:s})}path(t){t.lineTo(this.x,this.y)}addBounds(t){kt(t,{x:this.x,y:this.y})}}class vs extends wt{constructor(t,s){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:s})}path(t){t.moveTo(this.x,this.y)}addBounds(t){kt(t,{x:this.x,y:this.y})}}class xs extends wt{path(t){t.closePath()}}class Zi extends wt{constructor(t,s,a,l,g,f){super(),Object.defineProperty(this,"cpX",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"cpY",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"cpX2",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"cpY2",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"toX",{enumerable:!0,configurable:!0,writable:!0,value:g}),Object.defineProperty(this,"toY",{enumerable:!0,configurable:!0,writable:!0,value:f})}path(t){t.bezierCurveTo(this.cpX,this.cpY,this.cpX2,this.cpY2,this.toX,this.toY)}addBounds(t){kt(t,{x:this.cpX,y:this.cpY}),kt(t,{x:this.cpX2,y:this.cpY2}),kt(t,{x:this.toX,y:this.toY})}}class os extends wt{constructor(t,s,a,l){super(),Object.defineProperty(this,"cpX",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"cpY",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"toX",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"toY",{enumerable:!0,configurable:!0,writable:!0,value:l})}path(t){t.quadraticCurveTo(this.cpX,this.cpY,this.toX,this.toY)}addBounds(t){kt(t,{x:this.cpX,y:this.cpY}),kt(t,{x:this.toX,y:this.toY})}}class Qi extends wt{constructor(t,s,a,l,g){super(),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"blur",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"offsetX",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"offsetY",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"opacity",{enumerable:!0,configurable:!0,writable:!0,value:g})}colorize(t,s){this.opacity&&(t.fillStyle=this.color),t.shadowColor=this.color,t.shadowBlur=this.blur,t.shadowOffsetX=this.offsetX,t.shadowOffsetY=this.offsetY}}class ws extends wt{constructor(t,s,a,l,g){super(),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:g})}path(t){t.drawImage(this.image,this.x,this.y,this.width,this.height)}addBounds(t){kt(t,{x:this.x,y:this.y}),kt(t,{x:this.width,y:this.height})}}class Ps extends qt{constructor(){super(...arguments),Object.defineProperty(this,"_operations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"blendMode",{enumerable:!0,configurable:!0,writable:!0,value:pt.b.NORMAL}),Object.defineProperty(this,"_hasShadows",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_fillAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}clear(){super.clear(),this._operations.length=0}_pushOp(t){this._operations.push(t)}beginFill(t,s=1){this._fillAlpha=s,t?t instanceof Ue.Il?this._pushOp(new Ui(t.toCSS(s))):(this.isMeasured=!0,this._pushOp(new Ui(t))):this._pushOp(new Ui("rgba(0, 0, 0, "+s+")"))}endFill(){this._pushOp(new fs(this._hasShadows))}endStroke(){this._pushOp(new gs)}beginPath(){this._pushOp(new Ct)}lineStyle(t=0,s,a=1,l){this._strokeAlpha=a,this._pushOp(new ps(t,s?s instanceof Ue.Il?s.toCSS(a):s:"rgba(0, 0, 0, "+a+")",l))}setLineDash(t){this._pushOp(new Hi(t||[]))}setLineDashOffset(t=0){this._pushOp(new ks(t))}drawRect(t,s,a,l){this._pushOp(new ms(t,s,a,l))}drawCircle(t,s,a){this._pushOp(new Zt(t,s,a))}drawEllipse(t,s,a,l){this._pushOp(new bs(t,s,a,l))}arc(t,s,a,l,g,f=!1){this._pushOp(new Wi(t,s,a,l,g,f))}arcTo(t,s,a,l,g){this._pushOp(new _s(t,s,a,l,g))}lineTo(t,s){this._pushOp(new ys(t,s))}moveTo(t,s){this._pushOp(new vs(t,s))}bezierCurveTo(t,s,a,l,g,f){this._pushOp(new Zi(t,s,a,l,g,f))}quadraticCurveTo(t,s,a,l){this._pushOp(new os(t,s,a,l))}closePath(){this._pushOp(new xs)}shadow(t,s=0,a=0,l=0,g){this._hasShadows=!0,this._pushOp(new Qi(t.toCSS(g||this._fillAlpha||this._strokeAlpha),s,a,l))}image(t,s,a,l,g){this._pushOp(new ws(t,s,a,l,g))}svgPath(t){let s=0,a=0,l=null,g=null,f=null,b=null;const I=/([MmZzLlHhVvCcSsQqTtAa])([^MmZzLlHhVvCcSsQqTtAa]*)/g,k=/[\u0009\u0020\u000A\u000C\u000D]*([\+\-]?[0-9]*\.?[0-9]+(?:[eE][\+\-]?[0-9]+)?)[\u0009\u0020\u000A\u000C\u000D]*,?/g;let re;for(;null!==(re=I.exec(t));){const j=re[1],J=re[2],S=[];for(;null!==(re=k.exec(J));)S.push(re[1]);switch("S"!==j&&"s"!==j&&"C"!==j&&"c"!==j&&(l=null,g=null),"Q"!==j&&"q"!==j&&"T"!==j&&"t"!==j&&(f=null,b=null),j){case"M":Yt(j,S.length,2),s=+S[0],a=+S[1],this.moveTo(s,a);for(let A=2;A<S.length;A+=2)s=+S[A],a=+S[A+1],this.lineTo(s,a);break;case"m":Yt(j,S.length,2),s+=+S[0],a+=+S[1],this.moveTo(s,a);for(let A=2;A<S.length;A+=2)s+=+S[A],a+=+S[A+1],this.lineTo(s,a);break;case"L":Yt(j,S.length,2);for(let A=0;A<S.length;A+=2)s=+S[A],a=+S[A+1],this.lineTo(s,a);break;case"l":Yt(j,S.length,2);for(let A=0;A<S.length;A+=2)s+=+S[A],a+=+S[A+1],this.lineTo(s,a);break;case"H":ii(j,S.length,1);for(let A=0;A<S.length;++A)s=+S[A],this.lineTo(s,a);break;case"h":ii(j,S.length,1);for(let A=0;A<S.length;++A)s+=+S[A],this.lineTo(s,a);break;case"V":ii(j,S.length,1);for(let A=0;A<S.length;++A)a=+S[A],this.lineTo(s,a);break;case"v":ii(j,S.length,1);for(let A=0;A<S.length;++A)a+=+S[A],this.lineTo(s,a);break;case"C":Yt(j,S.length,6);for(let A=0;A<S.length;A+=6)l=+S[A+2],g=+S[A+3],s=+S[A+4],a=+S[A+5],this.bezierCurveTo(+S[A],+S[A+1],l,g,s,a);break;case"c":Yt(j,S.length,6);for(let A=0;A<S.length;A+=6){const Pe=+S[A]+s,me=+S[A+1]+a;l=+S[A+2]+s,g=+S[A+3]+a,s+=+S[A+4],a+=+S[A+5],this.bezierCurveTo(Pe,me,l,g,s,a)}break;case"S":Yt(j,S.length,4),(null===l||null===g)&&(l=s,g=a);for(let A=0;A<S.length;A+=4){const Pe=2*s-l,me=2*a-g;l=+S[A],g=+S[A+1],s=+S[A+2],a=+S[A+3],this.bezierCurveTo(Pe,me,l,g,s,a)}break;case"s":Yt(j,S.length,4),(null===l||null===g)&&(l=s,g=a);for(let A=0;A<S.length;A+=4){const Pe=2*s-l,me=2*a-g;l=+S[A]+s,g=+S[A+1]+a,s+=+S[A+2],a+=+S[A+3],this.bezierCurveTo(Pe,me,l,g,s,a)}break;case"Q":Yt(j,S.length,4);for(let A=0;A<S.length;A+=4)f=+S[A],b=+S[A+1],s=+S[A+2],a=+S[A+3],this.quadraticCurveTo(f,b,s,a);break;case"q":Yt(j,S.length,4);for(let A=0;A<S.length;A+=4)f=+S[A]+s,b=+S[A+1]+a,s+=+S[A+2],a+=+S[A+3],this.quadraticCurveTo(f,b,s,a);break;case"T":Yt(j,S.length,2),(null===f||null===b)&&(f=s,b=a);for(let A=0;A<S.length;A+=2)f=2*s-f,b=2*a-b,s=+S[A],a=+S[A+1],this.quadraticCurveTo(f,b,s,a);break;case"t":Yt(j,S.length,2),(null===f||null===b)&&(f=s,b=a);for(let A=0;A<S.length;A+=2)f=2*s-f,b=2*a-b,s+=+S[A],a+=+S[A+1],this.quadraticCurveTo(f,b,s,a);break;case"A":case"a":const Te="a"===j;Nt(S),Yt(j,S.length,7);for(let A=0;A<S.length;A+=7){let Pe=+S[A+5],me=+S[A+6];Te&&(Pe+=s,me+=a);const Ne=Gi({px:s,py:a,rx:+S[A],ry:+S[A+1],xAxisRotation:+S[A+2],largeArcFlag:di(+S[A+3]),sweepFlag:di(+S[A+4]),cx:Pe,cy:me});z.each(Ne,Ae=>{this.bezierCurveTo(Ae.x1,Ae.y1,Ae.x2,Ae.y2,Ae.x,Ae.y),s=Ae.x,a=Ae.y})}break;case"Z":case"z":Di(j,S.length,0),this.closePath()}}}_runPath(t){t.beginPath(),z.each(this._operations,s=>{s.path(t)})}_render(t){super._render(t);const s=this._layer||t,a=s.dirty,l=this._isInteractive();if(a||l){const g=s.context,f=this._renderer._ghostLayer.context;let b;a&&(g.globalCompositeOperation=this.blendMode,g.beginPath()),l&&(f.beginPath(),b=this._getColorId()),z.each(this._operations,I=>{a&&(I.path(g),I.colorize(g,void 0)),l&&(I.path(f),I.colorize(f,b))})}}renderDetached(t){if(this.visible){this._setMatrix(),t.save();const s=this.mask;s&&(s._setMatrix(),s._transform(t,1),s._runPath(t),t.clip()),t.globalAlpha=this.compoundAlpha*this.alpha,this._transform(t,1),this.filter&&(t.filter=this.filter),t.globalCompositeOperation=this.blendMode,t.beginPath(),z.each(this._operations,a=>{a.path(t),a.colorize(t,void 0)}),t.restore()}}_addBounds(t){this.visible&&this.isMeasured&&z.each(this._operations,s=>{s.addBounds(t)})}}class ji extends qt{constructor(t,s,a){super(t),Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"resolution",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"textVisible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_textInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_originalScale",{enumerable:!0,configurable:!0,writable:!0,value:1}),this.text=s,this.style=a}invalidateBounds(){super.invalidateBounds(),this._textInfo=void 0}_shared(t){this.style.textAlign&&(t.textAlign=this.style.textAlign),this.style.direction&&(t.direction=this.style.direction),this.style.textBaseline&&(t.textBaseline=this.style.textBaseline)}_prerender(t,s=!1,a=!1){super._render(t);const l=t.context,g=this._renderer._ghostLayer.context,f=this.style;let b=this._getFontStyle(void 0,a);l.font=b,this._isInteractive()&&!s&&(g.font=b),f.fill&&(l.fillStyle=f.fill instanceof Ue.Il?f.fill.toCSS(null!=f.fillOpacity?f.fillOpacity:1):f.fill),f.shadowColor&&(t.context.shadowColor=f.shadowColor.toCSS(f.shadowOpacity||1)),f.shadowBlur&&(t.context.shadowBlur=f.shadowBlur),f.shadowOffsetX&&(t.context.shadowOffsetX=f.shadowOffsetX),f.shadowOffsetY&&(t.context.shadowOffsetY=f.shadowOffsetY),this._shared(l),this._isInteractive()&&!s&&(g.fillStyle=this._getColorId(),this._shared(g))}_getFontStyle(t,s=!1){const a=this.style;let l=[];return t&&t.fontVariant?l.push(t.fontVariant):a.fontVariant&&l.push(a.fontVariant),s||(t&&t.fontWeight?l.push(t.fontWeight):a.fontWeight&&l.push(a.fontWeight)),t&&t.fontStyle?l.push(t.fontStyle):a.fontStyle&&l.push(a.fontStyle),t&&t.fontSize?(U.isNumber(t.fontSize)&&(t.fontSize=t.fontSize+"px"),l.push(t.fontSize)):a.fontSize&&(U.isNumber(a.fontSize)&&(a.fontSize=a.fontSize+"px"),l.push(a.fontSize)),t&&t.fontFamily?l.push(t.fontFamily):a.fontFamily?l.push(a.fontFamily):l.length&&l.push("Arial"),l.join(" ")}_render(t){const s=this._layer||t;if(this._textInfo||this._measure(s),this.textVisible){const a=this._isInteractive(),l=s.context,g=s.dirty,f=this._renderer._ghostLayer.context;l.save(),f.save(),this._prerender(s),z.each(this._textInfo,(b,I)=>{z.each(b.textChunks,(k,re)=>{if(k.style&&(l.save(),f.save(),l.font=k.style,this._isInteractive()&&(f.font=k.style)),k.fill&&(l.save(),l.fillStyle=k.fill.toCSS()),g&&l.fillText(k.text,k.offsetX,b.offsetY+k.offsetY),"underline"==k.textDecoration||"line-through"==k.textDecoration){let A,j=1,J=1,S=k.height,Te=k.offsetX;switch(this.style.textAlign){case"right":case"end":Te-=k.width;break;case"center":Te-=k.width/2}if(k.style)switch(be.V.getTextStyle(k.style).fontWeight){case"bolder":case"bold":case"700":case"800":case"900":j=2}S&&(J=S/20),A="line-through"==k.textDecoration?j+b.offsetY+k.offsetY-k.height/2:j+1.5*J+b.offsetY+k.offsetY,l.save(),l.beginPath(),k.fill?l.strokeStyle=k.fill.toCSS():this.style.fill&&this.style.fill instanceof Ue.Il&&(l.strokeStyle=this.style.fill.toCSS()),l.lineWidth=j*J,l.moveTo(Te,A),l.lineTo(Te+k.width,A),l.stroke(),l.restore()}a&&this.interactive&&f.fillText(k.text,k.offsetX,b.offsetY+k.offsetY),k.fill&&l.restore(),k.style&&(l.restore(),f.restore())})}),l.restore(),f.restore()}}_addBounds(t){if(this.visible&&this.isMeasured){const s=this._measure(this.getLayer());kt(t,{x:s.left,y:s.top}),kt(t,{x:s.right,y:s.bottom})}}_ignoreFontWeight(){return/apple/i.test(navigator.vendor)}_measure(t){const s=t.context,a=this._renderer._ghostLayer.context,l="rtl"==this.style.direction;this._textInfo=[];const g=this.style.oversizedBehavior,f=this.style.maxWidth,b=U.isNumber(f)&&"truncate"==g,I=U.isNumber(f)&&("wrap"==g||"wrap-no-break"==g);s.save(),a.save(),this._prerender(t,!0,this._ignoreFontWeight());const k="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",re=this.text.toString().replace(/\r/g,"").split(/\n/);let A,j=!0,J=0,S=0,Te=0;z.each(re,(me,Ne)=>{let Ae;for(Ae=""==me?[{type:"value",text:""}]:be.V.chunk(me,!1,this.style.ignoreFormatting);Ae.length>0;){let De={offsetY:Te,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]};const He=this._measureText(k,s);De.height=He.actualBoundingBoxAscent+He.actualBoundingBoxDescent,De.ascent=He.actualBoundingBoxAscent;let ft,Tt,ot,at,vt=this.style.textDecoration,bt=!1,Dt=!0,ze=[];z.eachContinue(Ae,(ht,ai)=>{if("format"==ht.type)if("[/]"==ht.text)j||(s.restore(),a.restore(),j=!0),Tt=void 0,A=void 0,ot=void 0,vt=this.style.textDecoration,at=void 0,ft=ht.text;else{j||(s.restore(),a.restore());let ut=be.V.getTextStyle(ht.text);const Et=this._getFontStyle(ut);s.save(),a.save(),s.font=Et,A=Et,ft=ht.text,ut.textDecoration&&(vt=ut.textDecoration),ut.fill&&(Tt=ut.fill),ut.width&&(ot=U.toNumber(ut.width)),ut.verticalAlign&&(at=ut.verticalAlign),j=!1;const Gt=this._measureText(k,s),Ut=Gt.actualBoundingBoxAscent+Gt.actualBoundingBoxDescent;Ut>De.height&&(De.height=Ut),Gt.actualBoundingBoxAscent>De.ascent&&(De.ascent=Gt.actualBoundingBoxAscent)}else if("value"==ht.type&&!bt){const ut=this._measureText(ht.text,s);let Et=ut.actualBoundingBoxLeft+ut.actualBoundingBoxRight;if(b){let Vt=Dt||this.style.breakWords||!1;const ti=this.style.ellipsis||"",Xi=this._measureText(ti,s);De.width+Et>f&&(ht.text=this._truncateText(s,ht.text,f-De.width-(Xi.actualBoundingBoxLeft+Xi.actualBoundingBoxRight),Vt),ht.text+=ti,bt=!0)}else if(I&&De.width+Et>f){const ti=this._truncateText(s,ht.text,f-De.width,!1,Dt&&"wrap-no-break"!=this.style.oversizedBehavior);if(""==ti)return this.textVisible=!0,!1;ze=Ae.slice(ai+1),v.trim(ti)!=v.trim(ht.text)&&(ze.unshift({type:"value",text:ht.text.substr(ti.length)}),ft&&ze.unshift({type:"format",text:ft})),ht.text=v.trim(ti),Ae=[],bt=!0}let Gt=1,Ut=1;if(A&&ot&&ot>Et){const Vt=Et/ot;switch(this.style.textAlign){case"right":case"end":Gt=Vt;break;case"center":Gt=Vt,Ut=Vt;break;default:Ut=Vt}Et=ot}const si=ut.actualBoundingBoxAscent+ut.actualBoundingBoxDescent;si>De.height&&(De.height=si),ut.actualBoundingBoxAscent>De.ascent&&(De.ascent=ut.actualBoundingBoxAscent),De.width+=Et,De.left+=ut.actualBoundingBoxLeft/Gt,De.right+=ut.actualBoundingBoxRight/Ut,De.textChunks.push({style:A,fill:Tt,text:ht.text,width:Et,height:si,left:ut.actualBoundingBoxLeft,right:ut.actualBoundingBoxRight,ascent:ut.actualBoundingBoxAscent,offsetX:0,offsetY:0,textDecoration:vt,verticalAlign:at}),Dt=!1}return!0}),this.style.lineHeight instanceof Ie.gG?(De.height*=this.style.lineHeight.value,De.ascent*=this.style.lineHeight.value):(De.height*=this.style.lineHeight||1.2,De.ascent*=this.style.lineHeight||1.2),J<De.left&&(J=De.left),S<De.right&&(S=De.right),this._textInfo.push(De),Te+=De.height,Ae=ze||[]}}),j||(s.restore(),a.restore()),z.each(this._textInfo,(me,Ne)=>{let Ae=0;z.each(me.textChunks,De=>{if(De.offsetX=Ae+De.left-me.left,De.offsetY+=me.height-me.height*(this.style.baselineRatio||.19),Ae+=De.width,De.verticalAlign)switch(De.verticalAlign){case"super":De.offsetY-=me.height/2-De.height/2;break;case"sub":De.offsetY+=De.height/2}})});const Pe={left:l?-S:-J,top:0,right:l?J:S,bottom:Te};if("none"!==g){const me=this._fitRatio(Pe);if(me<1)if("fit"==g)U.isNumber(this.style.minScale)&&me<this.style.minScale?(this.textVisible=!1,Pe.left=0,Pe.top=0,Pe.right=0,Pe.bottom=0):((!this._originalScale||1==this._originalScale)&&(this._originalScale=this.scale),this.scale=me,this.textVisible=!0);else if("hide"==g)this.textVisible=!1,Pe.left=0,Pe.top=0,Pe.right=0,Pe.bottom=0;else{switch(this.style.textAlign){case"right":case"end":Pe.left=-f,Pe.right=0;break;case"center":Pe.left=-f/2,Pe.right=f/2;break;default:Pe.left=0,Pe.right=f}this.scale=this._originalScale||1,this._originalScale=void 0,this.textVisible=!0}else this.scale=this._originalScale||1,this._originalScale=void 0,this.textVisible=!0}return s.restore(),a.restore(),Pe}_fitRatio(t){const s=this.style.maxWidth,a=this.style.maxHeight;return U.isNumber(s)||U.isNumber(a)?Math.min(s/(t.right-t.left)||1,a/(t.bottom-t.top)||1):1}_truncateText(t,s,a,l=!1,g=!0){let f;do{if(l)s=s.slice(0,-1);else{let I=s.replace(/[^,;:!?\\\/\s\u200b]+[,;:!?\\\/\s\u200b]*$/g,"");if(""==I&&g)l=!0;else{if(""==I)return s;s=I}}const b=this._measureText(s,t);f=b.actualBoundingBoxLeft+b.actualBoundingBoxRight}while(f>a&&""!=s);return s}_measureText(t,s){let a=s.measureText(t),l={};if(null==a.actualBoundingBoxAscent){const f=document.createElement("div");f.innerText=t,f.style.visibility="hidden",f.style.position="absolute",f.style.top="-1000000px;",f.style.fontFamily=this.style.fontFamily||"",f.style.fontSize=this.style.fontSize+"",document.body.appendChild(f);const b=f.getBoundingClientRect();document.body.removeChild(f);const I=b.height,k=a.width;l={actualBoundingBoxAscent:I,actualBoundingBoxDescent:0,actualBoundingBoxLeft:0,actualBoundingBoxRight:k,fontBoundingBoxAscent:I,fontBoundingBoxDescent:0,width:k}}else l={actualBoundingBoxAscent:a.actualBoundingBoxAscent,actualBoundingBoxDescent:a.actualBoundingBoxDescent,actualBoundingBoxLeft:a.actualBoundingBoxLeft,actualBoundingBoxRight:a.actualBoundingBoxRight,fontBoundingBoxAscent:a.actualBoundingBoxAscent,fontBoundingBoxDescent:a.actualBoundingBoxDescent,width:a.width};const g=a.width;switch(this.style.textAlign){case"right":case"end":l.actualBoundingBoxLeft=g,l.actualBoundingBoxRight=0;break;case"center":l.actualBoundingBoxLeft=g/2,l.actualBoundingBoxRight=g/2;break;default:l.actualBoundingBoxLeft=0,l.actualBoundingBoxRight=g}return l}}class gi{constructor(){Object.defineProperty(this,"fill",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fillOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textAlign",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontFamily",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontWeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontVariant",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textDecoration",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lineHeight",{enumerable:!0,configurable:!0,writable:!0,value:(0,Ie.aQ)(120)}),Object.defineProperty(this,"baselineRatio",{enumerable:!0,configurable:!0,writable:!0,value:.19}),Object.defineProperty(this,"direction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textBaseline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"oversizedBehavior",{enumerable:!0,configurable:!0,writable:!0,value:"none"}),Object.defineProperty(this,"breakWords",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ellipsis",{enumerable:!0,configurable:!0,writable:!0,value:"\u2026"}),Object.defineProperty(this,"maxWidth",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxHeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"minScale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreFormatting",{enumerable:!0,configurable:!0,writable:!0,value:!1})}}class Mi extends ji{constructor(){super(...arguments),Object.defineProperty(this,"textType",{enumerable:!0,configurable:!0,writable:!0,value:"circular"}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startAngle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inside",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"orientation",{enumerable:!0,configurable:!0,writable:!0,value:"auto"}),Object.defineProperty(this,"kerning",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_textReversed",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_render(t){"circular"===this.textType?this._renderCircular(t):super._render(t)}_renderCircular(t){if(this.textVisible){const s=this._layer||t;this._prerender(s);const a=this._isInteractive(),l=s.context,g=s.dirty,f=this._renderer._ghostLayer.context;l.save(),a&&f.save(),this._textInfo||this._measure(s);let b=this.radius||0,I=this.startAngle||0,k=0,re=this.orientation,j="auto"==re?"auto":"inward"==re;const J=this.inside,S=this.style.textAlign||"left",Te=this.kerning||0;let A="left"==S?1:-1;const Pe=!this._textReversed;if("auto"==j){let me=0,Ne=0;z.each(this._textInfo,(Ae,De)=>{const He=I+Ae.width/(b-Ae.height)/2*-A;He>me&&(me=He)}),Ne="left"==S?(me+k/2)*Ve.DEGREES:"right"==S?(me-k/2)*Ve.DEGREES:I*Ve.DEGREES,Ne=Ve.normalizeAngle(Ne),j=Ne>=270||Ne<=90}1==j&&Pe&&(this._textInfo.reverse(),this._textReversed=!0),z.each(this._textInfo,(me,Ne)=>{const Ae=me.height;J||(b+=Ae),(-1==A&&j||1==A&&!j)&&Pe&&me.textChunks.reverse();let De=I;k=0,"center"==S&&(De+=me.width/(b-Ae)/2*-A,k=De-I),De+=Math.PI*(j?0:1),l.save(),a&&f.save(),l.rotate(De),a&&f.rotate(De);let He=0;z.each(me.textChunks,(it,ft)=>{const vt=it.text,Tt=it.width;He=Tt/2/(b-Ae)*A,l.rotate(He),a&&f.rotate(He),it.style&&(l.save(),f.save(),l.font=it.style,a&&(f.font=it.style)),it.fill&&(l.save(),l.fillStyle=it.fill.toCSS()),l.textBaseline="middle",l.textAlign="center",a&&(f.textBaseline="middle",f.textAlign="center"),g&&l.fillText(vt,0,(j?1:-1)*(0-b+Ae/2)),a&&f.fillText(vt,0,(j?1:-1)*(0-b+Ae/2)),it.fill&&l.restore(),it.style&&(l.restore(),f.restore()),He=(Tt/2+Te)/(b-Ae)*A,l.rotate(He),a&&f.rotate(He)}),l.restore(),a&&f.restore(),J&&(b-=Ae)}),l.restore(),a&&f.restore()}}_measure(t){return"circular"===this.textType?this._measureCircular(t):super._measure(t)}_measureCircular(t){const s=t.context,a=this._renderer._ghostLayer.context,l="rtl"==this.style.direction,g=this.style.oversizedBehavior,f=this.style.maxWidth,b=U.isNumber(f)&&"truncate"==g,I=this.style.ellipsis||"";let k;this.textVisible=!0,this._textInfo=[],this._textReversed=!1,s.save(),a.save(),this._prerender(t,!0);const re=this.text.toString().replace(/\r/g,"").split(/\n/);let j=!0,J=0,S=0;return z.each(re,(Te,A)=>{let Ne,Ae,De,Pe=be.V.chunk(Te,!1,this.style.ignoreFormatting),me={offsetY:S,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]};z.each(Pe,(He,it)=>{if("format"==He.type){if("[/]"==He.text)j||(s.restore(),a.restore(),j=!0),Ae=void 0,Ne=void 0,De=void 0;else{let ft=be.V.getTextStyle(He.text);const vt=this._getFontStyle(ft);s.save(),a.save(),s.font=vt,Ne=vt,ft.fill&&(Ae=ft.fill),ft.width&&(De=U.toNumber(ft.width)),j=!1}b&&(k=this._measureText(I,s))}else if("value"==He.type){const ft=He.text.match(/./gu)||[];l&&ft.reverse();for(let vt=0;vt<ft.length;vt++){const Tt=ft[vt],ot=this._measureText(Tt,s);let bt=ot.width;Ne&&De&&De>bt&&(bt=De);const Dt=ot.actualBoundingBoxAscent+ot.actualBoundingBoxDescent;if(Dt>me.height&&(me.height=Dt),ot.actualBoundingBoxAscent>me.ascent&&(me.ascent=ot.actualBoundingBoxAscent),me.width+=bt,me.left+=ot.actualBoundingBoxLeft,me.right+=ot.actualBoundingBoxRight,me.textChunks.push({style:Ne,fill:Ae,text:Tt,width:bt,height:Dt+ot.actualBoundingBoxDescent,left:ot.actualBoundingBoxLeft,right:ot.actualBoundingBoxRight,ascent:ot.actualBoundingBoxAscent,offsetX:0,offsetY:Dt,textDecoration:void 0}),J+=bt,b){k||(k=this._measureText(I,s));const ze=k.actualBoundingBoxLeft+k.actualBoundingBoxRight;if(J+=ze,J+ze>f){1==me.textChunks.length?this.textVisible=!1:(me.width+=ze,me.left+=k.actualBoundingBoxLeft,me.right+=k.actualBoundingBoxRight,me.textChunks.push({style:Ne,fill:Ae,text:I,width:ze,height:Dt+k.actualBoundingBoxDescent,left:k.actualBoundingBoxLeft,right:k.actualBoundingBoxRight,ascent:k.actualBoundingBoxAscent,offsetX:0,offsetY:Dt,textDecoration:void 0}));break}}if(l)break}}}),me.height*=this.style.lineHeight instanceof Ie.gG?this.style.lineHeight.value:this.style.lineHeight||1.2,this._textInfo.push(me),S+=me.height}),j||(s.restore(),a.restore()),"hide"==g&&J>f&&(this.textVisible=!1),z.each(this._textInfo,Te=>{z.each(Te.textChunks,A=>{A.offsetY+=Math.round((Te.height-A.height+(Te.ascent-A.ascent))/2)})}),s.restore(),a.restore(),{left:0,top:0,right:0,bottom:0}}}class Ci extends qt{constructor(t,s){super(t),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tainted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_imageMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.image=s}_dispose(){super._dispose(),this._imageMask&&ni(this._imageMask)}getLocalBounds(){if(!this._localBounds){let t=0,s=0;this.width&&(t=this.width),this.height&&(s=this.height),this._localBounds={left:0,top:0,right:t,bottom:s},this._addBounds(this._localBounds)}return this._localBounds}_render(t){if(super._render(t),this.image){const s=this._layer||t;if(void 0===this.tainted&&(this.tainted=fi(this.image),s.tainted=!0),this.tainted&&this._renderer._omitTainted)return;if(s.dirty&&(this.shadowColor&&(s.context.shadowColor=this.shadowColor.toCSS(this.shadowOpacity||1)),this.shadowBlur&&(s.context.shadowBlur=this.shadowBlur),this.shadowOffsetX&&(s.context.shadowOffsetX=this.shadowOffsetX),this.shadowOffsetY&&(s.context.shadowOffsetY=this.shadowOffsetY),s.context.drawImage(this.image,0,0,this.width||this.image.naturalWidth,this.height||this.image.naturalHeight)),this.interactive&&this._isInteractive()){const a=this._getMask(this.image);this._renderer._ghostLayer.context.drawImage(a,0,0)}}}clear(){super.clear(),this.image=void 0,this._imageMask=void 0}_getMask(t){if(void 0===this._imageMask){const s=this.width||t.naturalWidth,a=this.height||t.naturalHeight,l=document.createElement("canvas");l.width=s,l.height=a;const g=l.getContext("2d");g.imageSmoothingEnabled=!1,g.fillStyle=this._getColorId(),g.fillRect(0,0,s,a),fi(t)||(g.globalCompositeOperation="destination-in",g.drawImage(t,0,0,s,a)),this._imageMask=l}return this._imageMask}}class ls{constructor(t,s,a,l){Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"originalPoint",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"point",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"bbox",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"simulated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"native",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.id=v.supports("touchevents")&&t instanceof Touch?t.identifier:null}}class Ki extends ce.rk{constructor(t){if(super(),Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"_layerDom",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"layers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_dirtyLayers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"defaultLayer",{enumerable:!0,configurable:!0,writable:!0,value:this.getLayer(0)}),Object.defineProperty(this,"_ghostLayer",{enumerable:!0,configurable:!0,writable:!0,value:new Si}),Object.defineProperty(this,"_patternCanvas",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("canvas")}),Object.defineProperty(this,"_patternContext",{enumerable:!0,configurable:!0,writable:!0,value:this._patternCanvas.getContext("2d")}),Object.defineProperty(this,"_domWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_domHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_canvasWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_canvasHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"resolution",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interactionsEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_listeners",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_events",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_colorMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_forceInteractive",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_omitTainted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_hovering",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"_dragging",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_mousedown",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_lastPointerMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tapToActivate",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"tapToActivateTimeout",{enumerable:!0,configurable:!0,writable:!0,value:3e3}),Object.defineProperty(this,"_touchActive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_touchActiveTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.resolution=null==t?window.devicePixelRatio:t,this.view.style.position="absolute",this.view.setAttribute("aria-hidden","true"),this.view.appendChild(this._layerDom),this._disposers.push(new ce.ku(()=>{Se.each(this._events,(s,a)=>{a.disposer.dispose()}),z.each(this.layers,s=>{ni(s.view),s.exportableView&&ni(s.exportableView)}),ni(this._ghostLayer.view),ni(this._patternCanvas)})),this._disposers.push(v.onZoom(()=>{null==t&&(this.resolution=window.devicePixelRatio)})),v.supports("touchevents")){const s=a=>{0!==this._dragging.length&&z.eachContinue(this._dragging,l=>!l.value.shouldCancelTouch()||(a.preventDefault(),!1)),this._touchActiveTimeout&&this._delayTouchDeactivate()};this._disposers.push(v.addEventListener(window,"touchstart",s,{passive:!1})),this._disposers.push(v.addEventListener(this.view,"touchstart",s,{passive:!1})),this._disposers.push(v.addEventListener(this.view,"touchmove",()=>{this._touchActiveTimeout&&this._delayTouchDeactivate()},{passive:!0})),this._disposers.push(v.addEventListener(window,"click",a=>{this._touchActive=!1},{passive:!0})),this._disposers.push(v.addEventListener(this.view,"click",a=>{window.setTimeout(()=>{this._touchActive=!0,this._delayTouchDeactivate()},100)},{passive:!0}))}v.supports("wheelevents")&&this._disposers.push(v.addEventListener(this.view,"wheel",s=>{let a=!1;this._hovering.forEach(l=>{if(l.wheelable)return a=!0,!1}),a&&s.preventDefault()},{passive:!1}))}_delayTouchDeactivate(){this._touchActiveTimeout&&clearTimeout(this._touchActiveTimeout),this.tapToActivateTimeout>0&&(this._touchActiveTimeout=window.setTimeout(()=>{this._touchActive=!1},this.tapToActivateTimeout))}get debugGhostView(){return!!this._ghostLayer.view.parentNode}set debugGhostView(t){t?this._ghostLayer.view.parentNode||this.view.appendChild(this._ghostLayer.view):this._ghostLayer.view.parentNode&&this._ghostLayer.view.parentNode.removeChild(this._ghostLayer.view)}createLinearGradient(t,s,a,l){return this.defaultLayer.context.createLinearGradient(t,s,a,l)}createRadialGradient(t,s,a,l,g,f){return this.defaultLayer.context.createRadialGradient(t,s,a,l,g,f)}createPattern(t,s,a,l,g){return this._patternCanvas.width=l,this._patternCanvas.height=g,this._patternContext.clearRect(0,0,l,g),s.renderDetached(this._patternContext),t.renderDetached(this._patternContext),this._patternContext.createPattern(this._patternCanvas,a)}makeContainer(){return new Vi(this)}makeGraphics(){return new Ps(this)}makeText(t,s){return new ji(this,t,s)}makeTextStyle(){return new gi}makeRadialText(t,s){return new Mi(this,t,s)}makePicture(t){return new Ci(this,t)}resizeLayer(t){t.resize(this._canvasWidth,this._canvasHeight,this._domWidth,this._domHeight,this.resolution)}resizeGhost(){this._ghostLayer.resize(this._canvasWidth,this._canvasHeight,this._domWidth,this._domHeight,this.resolution)}resize(t,s,a,l){this._canvasWidth=t,this._canvasHeight=s,this._domWidth=a,this._domHeight=l,z.each(this.layers,g=>{g&&(g.dirty=!0,this.resizeLayer(g))}),this.resizeGhost(),this.view.style.width=a+"px",this.view.style.height=l+"px"}createDetachedLayer(t=!1){const s=document.createElement("canvas"),a=s.getContext("2d",{willReadFrequently:t}),l=new Ni(s,a);return s.style.position="absolute",s.style.top="0px",s.style.left="0px",l}getLayerByOrder(t){const s=this.layers,a=s.length;for(let l=0;l<a;l++){const g=s[l];if(g.order==t)return g}}getLayer(t,s=!0){let a=this.getLayerByOrder(t);if(a)return a;const l=this.createDetachedLayer(99==t);l.order=t,l.visible=s,l.visible&&this.resizeLayer(l);const g=this.layers;g.push(l),g.sort((k,re)=>k.order>re.order?1:k.order<re.order?-1:0);const f=g.length;let I;for(let k=z.indexOf(g,l)+1;k<f;k++)if(g[k].visible){I=g[k];break}return l.visible&&(void 0===I?this._layerDom.appendChild(l.view):this._layerDom.insertBefore(l.view,I.view)),l}render(t){if(this._dirtyLayers.length=0,z.each(this.layers,s=>{s&&s.dirty&&s.visible&&(this._dirtyLayers.push(s),s.clear())}),this._ghostLayer.clear(),t.render(this.defaultLayer),this._ghostLayer.context.restore(),z.each(this.layers,s=>{if(s){const a=s.context;a.beginPath(),a.moveTo(0,0),a.stroke()}}),z.each(this._dirtyLayers,s=>{s.context.restore(),s.dirty=!1}),this._hovering.size&&this._lastPointerMoveEvent){const{events:s,target:a,native:l}=this._lastPointerMoveEvent;z.each(s,g=>{this._dispatchGlobalMousemove(g,a,l)})}}paintId(t){const s=function as(q){const t=[0,0,0];for(let s=0;s<24;s++)t[s%3]<<=1,t[s%3]|=1&q,q>>=1;return(0|t[2])+(t[1]<<8)+(t[0]<<16)}(++this._colorId),a=Ue.Il.fromHex(s).toCSS();return this._colorMap[a]=t,a}_removeObject(t){void 0!==t._colorId&&delete this._colorMap[t._colorId]}_adjustBoundingBox(t){const s=this._ghostLayer.margin;return new DOMRect(t.left-s.left,t.top-s.top,t.width+s.left+s.right,t.height+s.top+s.bottom)}getEvent(t,s=!0){const a=this.view.getBoundingClientRect(),l={x:t.clientX||0,y:t.clientY||0};return new ls(t,l,{x:l.x-(s?a.left:0),y:l.y-(s?a.top:0)},this._adjustBoundingBox(a))}_getHitTarget(t,s,a){if(0===s.width||0===s.height||t.x<s.left||t.x>s.right||t.y<s.top||t.y>s.bottom||!a||!this._layerDom.contains(a))return;const l=this._ghostLayer.getImageData(t,s);if(0===l.data[0]&&0===l.data[1]&&0===l.data[2])return!1;const g=Ue.Il.fromRGB(l.data[0],l.data[1],l.data[2]).toCSS();return this._colorMap[g]}_withEvents(t,s){const a=this._events[t];if(void 0!==a){a.dispatching=!0;try{s(a)}finally{a.dispatching=!1,a.cleanup&&(a.cleanup=!1,z.keepIf(a.callbacks,l=>!l.disposed),0===a.callbacks.length&&(a.disposer.dispose(),delete this._events[t]))}}}_dispatchEventAll(t,s){this.interactionsEnabled&&this._withEvents(t,a=>{z.each(a.callbacks,l=>{l.disposed||l.callback.call(l.context,s)})})}_dispatchEvent(t,s,a){if(!this.interactionsEnabled)return!1;let l=!1;return this._withEvents(t,g=>{z.each(g.callbacks,f=>{!f.disposed&&f.object===s&&(f.callback.call(f.context,a),l=!0)})}),l}_dispatchMousedown(t,s){const a=t.button;if(0!=a&&2!=a&&1!=a&&void 0!==a)return;const l=this.getEvent(t),g=this._getHitTarget(l.originalPoint,l.bbox,s);if(g){const f=l.id;let b=!1;vi(g,I=>{const k={id:f,value:I};return this._mousedown.push(k),!b&&this._dispatchEvent("pointerdown",I,l)&&(b=!0,this._dragging.some(j=>j.value===I&&j.id===f)||this._dragging.push(k)),!0})}}_dispatchGlobalMousemove(t,s,a){const l=this.getEvent(t),g=this._getHitTarget(l.originalPoint,l.bbox,s);l.native=a,g?(this._hovering.forEach(f=>{f.contains(g)||(this._hovering.delete(f),f.cursorOverStyle&&v.setStyle(document.body,"cursor",f._replacedCursorStyle),this._dispatchEvent("pointerout",f,l))}),l.native&&vi(g,f=>(this._hovering.has(f)||(this._hovering.add(f),f.cursorOverStyle&&(f._replacedCursorStyle=v.getStyle(document.body,"cursor"),v.setStyle(document.body,"cursor",f.cursorOverStyle)),this._dispatchEvent("pointerover",f,l)),!0))):(this._hovering.forEach(f=>{f.cursorOverStyle&&v.setStyle(document.body,"cursor",f._replacedCursorStyle),this._dispatchEvent("pointerout",f,l)}),this._hovering.clear()),this._dispatchEventAll("globalpointermove",l)}_dispatchGlobalMouseup(t,s){const a=this.getEvent(t);a.native=s,this._dispatchEventAll("globalpointerup",a)}_dispatchDragMove(t){if(0!==this._dragging.length){const s=this.getEvent(t),a=s.id;this._dragging.forEach(l=>{l.id===a&&this._dispatchEvent("pointermove",l.value,s)})}}_dispatchDragEnd(t,s){const a=t.button;let l;if(0==a||void 0===a)l="click";else if(2==a)l="rightclick";else{if(1!=a)return;l="middleclick"}const g=this.getEvent(t),f=g.id;if(0!==this._mousedown.length){const b=this._getHitTarget(g.originalPoint,g.bbox,s);b&&this._mousedown.forEach(I=>{I.id===f&&I.value.contains(b)&&this._dispatchEvent(l,I.value,g)}),this._mousedown.length=0}0!==this._dragging.length&&(this._dragging.forEach(b=>{b.id===f&&this._dispatchEvent("pointerup",b.value,g)}),this._dragging.length=0)}_dispatchDoubleClick(t,s){const a=this.getEvent(t),l=this._getHitTarget(a.originalPoint,a.bbox,s);l&&vi(l,g=>!this._dispatchEvent("dblclick",g,a))}_dispatchWheel(t,s){const a=this.getEvent(t),l=this._getHitTarget(a.originalPoint,a.bbox,s);l&&vi(l,g=>!this._dispatchEvent("wheel",g,a))}_makeSharedEvent(t,s){if(void 0===this._listeners[t]){const a=s();this._listeners[t]=new ce.DM(()=>{delete this._listeners[t],a.dispose()})}return this._listeners[t].increment()}_onPointerEvent(t,s){let a=!1,l=null;function g(){l=null,a=!1}return new ce.FV([new ce.ku(()=>{null!==l&&clearTimeout(l),g()}),v.addEventListener(this.view,v.getRendererEvent(t),f=>{a=!0,null!==l&&clearTimeout(l),l=window.setTimeout(g,0)}),Ri(window,t,(f,b)=>{null!==l&&(clearTimeout(l),l=null),s(f,b,a),a=!1})])}_initEvent(t){switch(t){case"globalpointermove":case"pointerover":case"pointerout":return this._makeSharedEvent("pointermove",()=>{const s=(a,l,g)=>{this._lastPointerMoveEvent={events:a,target:l,native:g},z.each(a,f=>{this._dispatchGlobalMousemove(f,l,g)})};return new ce.FV([this._onPointerEvent("pointerdown",s),this._onPointerEvent("pointermove",s)])});case"globalpointerup":return this._makeSharedEvent("pointerup",()=>{const s=this._onPointerEvent("pointerup",(l,g,f)=>{z.each(l,b=>{this._dispatchGlobalMouseup(b,f)}),this._lastPointerMoveEvent={events:l,target:g,native:f}}),a=this._onPointerEvent("pointercancel",(l,g,f)=>{z.each(l,b=>{this._dispatchGlobalMouseup(b,f)}),this._lastPointerMoveEvent={events:l,target:g,native:f}});return new ce.ku(()=>{s.dispose(),a.dispose()})});case"click":case"rightclick":case"middleclick":case"pointerdown":case"pointermove":case"pointerup":return this._makeSharedEvent("pointerdown",()=>{const s=this._onPointerEvent("pointerdown",(f,b)=>{z.each(f,I=>{this._dispatchMousedown(I,b)})}),a=this._onPointerEvent("pointermove",f=>{z.each(f,b=>{this._dispatchDragMove(b)})}),l=this._onPointerEvent("pointerup",(f,b)=>{z.each(f,I=>{this._dispatchDragEnd(I,b)})}),g=this._onPointerEvent("pointercancel",(f,b)=>{z.each(f,I=>{this._dispatchDragEnd(I,b)})});return new ce.ku(()=>{s.dispose(),a.dispose(),l.dispose(),g.dispose()})});case"dblclick":return this._makeSharedEvent("dblclick",()=>this._onPointerEvent("dblclick",(s,a)=>{z.each(s,l=>{this._dispatchDoubleClick(l,a)})}));case"wheel":return this._makeSharedEvent("wheel",()=>v.addEventListener(window,v.getRendererEvent("wheel"),s=>{this._dispatchWheel(s,v.getEventTarget(s))},{passive:!1}))}}_addEvent(t,s,a,l){let g=this._events[s];void 0===g&&(g=this._events[s]={disposer:this._initEvent(s),callbacks:[],dispatching:!1,cleanup:!1});const f={object:t,context:l,callback:a,disposed:!1};return g.callbacks.push(f),new ce.ku(()=>{f.disposed=!0,g.dispatching?g.cleanup=!0:(z.removeFirst(g.callbacks,f),0===g.callbacks.length&&(g.disposer.dispose(),delete this._events[s]))})}getCanvas(t,s){this.render(t),s||(s={});let a=this.resolution,l=Math.floor(this._canvasWidth*this.resolution),g=Math.floor(this._canvasHeight*this.resolution);if(s.minWidth&&s.minWidth>l){let S=s.minWidth/l;S>a&&(a=S*this.resolution)}if(s.minHeight&&s.minHeight>g){let S=s.minHeight/g;S>a&&(a=S*this.resolution)}if(s.maxWidth&&s.maxWidth<l){let S=s.maxWidth/l;S<a&&(a=S*this.resolution)}if(s.maxHeight&&s.maxHeight>g){let S=s.maxHeight/g;S<a&&(a=S*this.resolution)}s.maintainPixelRatio&&(a/=this.resolution);const f=[];let b=!1;const I=document.createElement("canvas");a!=this.resolution&&(b=!0,l=l*a/this.resolution,g=g*a/this.resolution),I.width=l,I.height=g,I.style.position="fixed",I.style.top="-10000px",this.view.appendChild(I),f.push(I);const k=I.getContext("2d");let re=0,j=0,J=!1;return z.each(this.layers,S=>{if(S&&S.visible&&(S.tainted||b)){J=!0,S.exportableView=S.view,S.exportableContext=S.context,S.view=document.createElement("canvas"),S.view.style.position="fixed",S.view.style.top="-10000px",this.view.appendChild(S.view),f.push(S.view);let Te=0,A=0;S.margin&&(Te+=S.margin.left||0+S.margin.right||0,A+=S.margin.top||0+S.margin.bottom||0),S.view.width=l+Te,S.view.height=g+A,S.context=S.view.getContext("2d"),S.dirty=!0,S.scale=a}}),J&&(this._omitTainted=!0,this.render(t),this._omitTainted=!1),z.each(this.layers,S=>{if(S&&S.visible){let Te=0,A=0;S.margin&&(Te=-(S.margin.left||0)*this.resolution,A=-(S.margin.top||0)*this.resolution),k.drawImage(S.view,Te,A),S.exportableView&&(S.view=S.exportableView,S.exportableView=void 0),S.exportableContext&&(S.context=S.exportableContext,S.exportableContext=void 0),re<S.view.clientWidth&&(re=S.view.clientWidth),j<S.view.clientHeight&&(j=S.view.clientHeight),S.scale=void 0}}),I.style.width=re+"px",I.style.height=j+"px",z.each(f,S=>{S.style.position="",S.style.top="",this.view.removeChild(S)}),I}}class Si{constructor(){Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_height",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.view=document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.context.imageSmoothingEnabled=!1,this.view.style.position="absolute",this.view.style.top="0px",this.view.style.left="0px"}resize(t,s,a,l,g){t+=this.margin.left+this.margin.right,s+=this.margin.top+this.margin.bottom,a+=this.margin.left+this.margin.right,l+=this.margin.top+this.margin.bottom,this.view.style.left=-this.margin.left+"px",this.view.style.top=-this.margin.top+"px",this._width=Math.floor(t*g),this._height=Math.floor(s*g),this.view.width=this._width,this.view.style.width=a+"px",this.view.height=this._height,this.view.style.height=l+"px"}getImageData(t,s){return this.context.getImageData(Math.round((t.x-s.left)/s.width*this._width),Math.round((t.y-s.top)/s.height*this._height),1,1)}setMargin(t){this.margin.left=0,this.margin.right=0,this.margin.top=0,this.margin.bottom=0,z.each(t,s=>{s.margin&&(this.margin.left=Math.max(this.margin.left,s.margin.left),this.margin.right=Math.max(this.margin.right,s.margin.right),this.margin.top=Math.max(this.margin.top,s.margin.top),this.margin.bottom=Math.max(this.margin.bottom,s.margin.bottom))})}clear(){this.context.save(),this.context.fillStyle="#000",this.context.fillRect(0,0,this._width,this._height)}}class Ni{constructor(t,s){Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tainted",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"order",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dirty",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"exportableView",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exportableContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_height",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.view=t,this.context=s}resize(t,s,a,l,g){null!=this.width&&(t=this.width,a=this.width),null!=this.height&&(s=this.height,l=this.height),this.margin?(t+=this.margin.left+this.margin.right,s+=this.margin.top+this.margin.bottom,a+=this.margin.left+this.margin.right,l+=this.margin.top+this.margin.bottom,this.view.style.left=-this.margin.left+"px",this.view.style.top=-this.margin.top+"px"):(this.view.style.left="0px",this.view.style.top="0px"),this._width=Math.floor(t*g),this._height=Math.floor(s*g),this.view.width=this._width,this.view.style.width=a+"px",this.view.height=this._height,this.view.style.height=l+"px"}clear(){this.context.save(),this.context.clearRect(0,0,this._width,this._height)}}var er=F(8018),Ai=F(5411),Ls=F(4178);function Bi(q,t){null==q?requestAnimationFrame(t):setTimeout(()=>{requestAnimationFrame(t)},1e3/q)}class ie{constructor(t,s={},a){if(Object.defineProperty(this,"dom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_inner",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDirtyParents",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dirty",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyParents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyBounds",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyPositions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_ticker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_tickers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_updateTick",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Qe.p}),Object.defineProperty(this,"animationTime",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_animations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rootContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tooltipContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipContainerSettings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltip",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"language",{enumerable:!0,configurable:!0,writable:!0,value:dt.new(this,{})}),Object.defineProperty(this,"locale",{enumerable:!0,configurable:!0,writable:!0,value:Le.default}),Object.defineProperty(this,"utc",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timezone",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numberFormatter",{enumerable:!0,configurable:!0,writable:!0,value:Re.new(this,{})}),Object.defineProperty(this,"dateFormatter",{enumerable:!0,configurable:!0,writable:!0,value:xt.new(this,{})}),Object.defineProperty(this,"durationFormatter",{enumerable:!0,configurable:!0,writable:!0,value:lt.new(this,{})}),Object.defineProperty(this,"tabindex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_tabindexes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_a11yD",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_focusElementDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_focusElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_focusedSprite",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isShift",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_keyboardDragPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_readerAlertElement",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_logo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipDiv",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nonce",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interfaceColors",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"verticalLayout",{enumerable:!0,configurable:!0,writable:!0,value:he.Z.new(this,{})}),Object.defineProperty(this,"horizontalLayout",{enumerable:!0,configurable:!0,writable:!0,value:_e.G.new(this,{})}),Object.defineProperty(this,"gridLayout",{enumerable:!0,configurable:!0,writable:!0,value:R.M.new(this,{})}),Object.defineProperty(this,"_paused",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"autoResize",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_fontHash",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"_isDisposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_resizeSensorDisposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltips",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_htmlElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_htmlEnabledContainers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),!a)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");let l,g;if(this._settings=s,0==s.accessible&&(this._a11yD=!0),null==s.useSafeResolution&&(s.useSafeResolution=!0),s.useSafeResolution&&(l=v.getSafeResolution()),this._renderer=new Ki(l),g=t instanceof HTMLElement?t:document.getElementById(t),z.each(Ai.i_.rootElements,I=>{if(I.dom===g)throw new Error("You cannot have multiple Roots on the same DOM node")}),this.interfaceColors=ue.new(this,{}),null===g)throw new Error("Could not find HTML element with id `"+t+"`");this.dom=g;let f=document.createElement("div");f.style.position="relative",f.style.height="100%",g.appendChild(f);const b=s.tooltipContainerBounds;b&&(this._tooltipContainerSettings=b),this._inner=f,this._updateComputedStyles(),Ai.i_.rootElements.push(this)}static new(t,s){const a=new ie(t,s,!0);return a._init(),a}moveDOM(t){let s;if(s=t instanceof HTMLElement?t:document.getElementById(t),s){for(;this.dom.childNodes.length>0;)s.appendChild(this.dom.childNodes[0]);this.dom=s,this._initResizeSensor(),this.resize()}}_handleLogo(){this._logo&&(this.dom.offsetWidth<=150||this.dom.offsetHeight<=60?this._logo.hide():this._logo.show())}_showBranding(){if(!this._logo){const t=this.tooltipContainer.children.push(G.W.new(this,{interactive:!0,interactiveChildren:!1,position:"absolute",setStateOnChildren:!0,paddingTop:9,paddingRight:9,paddingBottom:9,paddingLeft:9,scale:.6,y:(0,Ie.aQ)(100),centerY:Ie.AQ,tooltipText:"Created using amCharts 5",tooltipX:Ie.AQ,cursorOverStyle:"pointer",background:W.A.new(this,{fill:(0,Ue.$_)(4671320),fillOpacity:0,tooltipY:5})})),s=N.u.new(this,{pointerOrientation:"horizontal",paddingTop:4,paddingRight:7,paddingBottom:4,paddingLeft:7});s.label.setAll({fontSize:12}),s.get("background").setAll({fill:this.interfaceColors.get("background"),stroke:this.interfaceColors.get("grid"),strokeOpacity:.3}),t.set("tooltip",s),t.events.on("click",()=>{window.open("https://www.amcharts.com/","_blank")}),t.states.create("hover",{}),t.children.push(M.T.new(this,{stroke:(0,Ue.$_)(13421772),strokeWidth:3,svgPath:"M5 25 L13 25h13.6c3.4 0 6 0 10.3-4.3s5.2-12 8.6-12c3.4 0 4.3 8.6 7.7 8.6M83.4 25H79.8c-3.4 0-6 0-10.3-4.3s-5.2-12-8.6-12-4.3 8.6-7.7 8.6"})).states.create("hover",{stroke:(0,Ue.$_)(3976191)}),t.children.push(M.T.new(this,{stroke:(0,Ue.$_)(8947848),strokeWidth:3,svgPath:"M83.4 25h-31C37 25 39.5 4.4 28.4 4.4S18.9 24.2 4.3 25H0"})).states.create("hover",{stroke:(0,Ue.$_)(4671320)}),this._logo=t,this._handleLogo()}}_getRealSize(){return this.dom.getBoundingClientRect()}_getCalculatedSize(t){return this._settings.calculateSize?this._settings.calculateSize(t):{width:t.width,height:t.height}}_init(){const t=this._settings;!1!==t.accessible&&(t.focusable&&(this._inner.setAttribute("focusable","true"),this._inner.setAttribute("tabindex",this.tabindex+"")),t.ariaLabel&&this._inner.setAttribute("aria-label",t.ariaLabel));const s=this._renderer,a=this._getRealSize(),l=this._getCalculatedSize(a),g=Math.floor(l.width),f=Math.floor(l.height),b=Math.floor(a.width),I=Math.floor(a.height),k=G.W.new(this,{visible:!0,width:b,height:I});this._rootContainer=k,this._rootContainer._defaultThemes.push(gt.X.new(this));const re=k.children.push(G.W.new(this,{visible:!0,width:Ie.AQ,height:Ie.AQ}));this.container=re,s.resize(b,I,g,f),this._inner.appendChild(s.view),this._initResizeSensor();const j=document.createElement("div");if(this._htmlElementContainer=j,j.className="am5-html-container",j.style.position="absolute",j.style.pointerEvents="none",this._tooltipContainerSettings||(j.style.overflow="hidden"),this._inner.appendChild(j),!0!==this._a11yD){const J=document.createElement("div");J.className="am5-reader-container",J.setAttribute("role","alert"),J.style.position="absolute",J.style.width="1px",J.style.height="1px",J.style.overflow="hidden",J.style.clip="rect(1px, 1px, 1px, 1px)",this._readerAlertElement=J,this._inner.appendChild(this._readerAlertElement);const S=document.createElement("div");S.className="am5-focus-container",S.style.position="absolute",S.style.pointerEvents="none",S.style.top="0px",S.style.left="0px",S.style.overflow="hidden",S.style.width=g+"px",S.style.height=f+"px",S.setAttribute("role","graphics-document"),v.setInteractive(S,!1),this._focusElementContainer=S,this._inner.appendChild(this._focusElementContainer);const Te=document.createElement("div");this._tooltipElementContainer=Te,Te.className="am5-tooltip-container",this._inner.appendChild(Te),v.supports("keyboardevents")&&(this._disposers.push(v.addEventListener(window,"keydown",A=>{16==A.keyCode?this._isShift=!0:9==A.keyCode&&(this._isShift=A.shiftKey)})),this._disposers.push(v.addEventListener(window,"keyup",A=>{16==A.keyCode&&(this._isShift=!1)})),this._disposers.push(v.addEventListener(S,"keydown",A=>{const Pe=this._focusedSprite;if(Pe){27==A.keyCode&&(v.blur(),this._focusedSprite=void 0);let me=0,Ne=0;switch(A.keyCode){case 13:A.preventDefault();const Ae=s.getEvent(new MouseEvent("click"));return void Pe.events.dispatch("click",{type:"click",originalEvent:Ae.event,point:Ae.point,simulated:!0,target:Pe});case 37:me=-6;break;case 39:me=6;break;case 38:Ne=-6;break;case 40:Ne=6;break;default:return}if(0!=me||0!=Ne){if(A.preventDefault(),!Pe.isDragging()){this._keyboardDragPoint={x:0,y:0};const He=s.getEvent(new MouseEvent("mousedown",{clientX:0,clientY:0}));Pe.events.isEnabled("pointerdown")&&Pe.events.dispatch("pointerdown",{type:"pointerdown",originalEvent:He.event,point:He.point,simulated:!0,target:Pe})}const Ae=this._keyboardDragPoint;Ae.x+=me,Ae.y+=Ne;const De=s.getEvent(new MouseEvent("mousemove",{clientX:Ae.x,clientY:Ae.y}),!1);Pe.events.isEnabled("globalpointermove")&&Pe.events.dispatch("globalpointermove",{type:"globalpointermove",originalEvent:De.event,point:De.point,simulated:!0,target:Pe})}}})),this._disposers.push(v.addEventListener(S,"keyup",A=>{if(this._focusedSprite){const Pe=this._focusedSprite,me=A.keyCode;switch(me){case 37:case 39:case 38:case 40:if(Pe.isDragging()){const Ne=this._keyboardDragPoint,Ae=s.getEvent(new MouseEvent("mouseup",{clientX:Ne.x,clientY:Ne.y}));return Pe.events.isEnabled("globalpointerup")&&Pe.events.dispatch("globalpointerup",{type:"globalpointerup",originalEvent:Ae.event,point:Ae.point,simulated:!0,target:Pe}),void(this._keyboardDragPoint=void 0)}if(Pe.get("focusableGroup")){const Ne=Pe.get("focusableGroup"),Ae=this._tabindexes.filter(it=>it.get("focusableGroup")==Ne&&!1!==it.getPrivate("focusable"));let De=Ae.indexOf(Pe);const He=Ae.length-1;De+=39==me||40==me?1:-1,De<0?De=He:De>He&&(De=0),v.focus(Ae[De].getPrivate("focusElement").dom)}}}})))}this._startTicker(),this.setThemes([]),this._addTooltip(),this._hasLicense()||this._showBranding()}_initResizeSensor(){this._resizeSensorDisposer&&this._resizeSensorDisposer.dispose(),this._resizeSensorDisposer=new P(this.dom,()=>{this.autoResize&&this.resize()}),this._disposers.push(this._resizeSensorDisposer)}resize(){const t=this._getRealSize(),s=this._getCalculatedSize(t),a=Math.floor(s.width),l=Math.floor(s.height);if(a>0&&l>0){const g=Math.floor(t.width),f=Math.floor(t.height),b=this._htmlElementContainer;if(b.style.width=a+"px",b.style.height=l+"px",!0!==this._a11yD){const k=this._focusElementContainer;k.style.width=a+"px",k.style.height=l+"px"}this._renderer.resize(g,f,a,l);const I=this._rootContainer;I.setPrivate("width",g),I.setPrivate("height",f),this._render(),this._handleLogo()}}_render(){this._renderer.render(this._rootContainer._display),this._focusElementDirty&&(this._updateCurrentFocus(),this._focusElementDirty=!1)}_runTickers(t){z.each(this._tickers,s=>{s(t)})}_runAnimations(t){z.keepIf(this._animations,s=>s._runAnimation(t))}_runDirties(){let t={};for(;this._isDirtyParents;)this._isDirtyParents=!1,Se.keys(this._dirtyParents).forEach(f=>{const b=this._dirtyParents[f];delete this._dirtyParents[f],b.isDisposed()||(t[b.uid]=b,b._prepareChildren())});Se.keys(t).forEach(f=>{t[f]._updateChildren()});const s=[];Se.keys(this._dirty).forEach(f=>{const b=this._dirty[f];b.isDisposed()?delete this._dirty[b.uid]:(s.push(b),b._beforeChanged())}),s.forEach(f=>{f._changed(),delete this._dirty[f.uid],f._clearDirty()}),this._isDirty=!1;const a={},l=[];Se.keys(this._dirtyBounds).forEach(f=>{const b=this._dirtyBounds[f];delete this._dirtyBounds[f],b.isDisposed()||(a[b.uid]=b.depth(),l.push(b))}),this._positionHTMLElements(),l.sort((f,b)=>Ls.qu(a[b.uid],a[f.uid])),l.forEach(f=>{f._updateBounds()});const g=this._dirtyPositions;Se.keys(g).forEach(f=>{const b=g[f];delete g[f],b.isDisposed()||b._updatePosition()}),s.forEach(f=>{f._afterChanged()})}_renderFrame(t){return!this._updateTick||(this.events.isEnabled("framestarted")&&this.events.dispatch("framestarted",{type:"framestarted",target:this,timestamp:t}),this._checkComputedStyles(),this._runTickers(t),this._runAnimations(t),this._runDirties(),this._render(),this._positionHTMLElements(),this.events.isEnabled("frameended")&&this.events.dispatch("frameended",{type:"frameended",target:this,timestamp:t}),0===this._tickers.length&&0===this._animations.length&&!this._isDirty)}_runTicker(t,s){this.isDisposed()||(this.animationTime=t,this._renderFrame(t)?(this._ticker=null,this.animationTime=null):this._paused||s||Bi(this.fps,this._ticker))}_runTickerNow(t=1e4){if(!this.isDisposed()){const s=performance.now()+t;for(;;){const a=performance.now();if(a>=s){this.animationTime=null;break}if(this.animationTime=a,this._renderFrame(a)){this.animationTime=null;break}}}}_startTicker(){null===this._ticker&&(this.animationTime=null,this._ticker=t=>{this._runTicker(t)},Bi(this.fps,this._ticker))}get updateTick(){return this._updateTick}set updateTick(t){this._updateTick=t,t&&this._startTicker()}_addDirtyEntity(t){void 0===this._dirty[t.uid]&&(this._isDirty=!0,this._dirty[t.uid]=t,this._startTicker())}_addDirtyParent(t){void 0===this._dirtyParents[t.uid]&&(this._isDirty=!0,this._isDirtyParents=!0,this._dirtyParents[t.uid]=t,this._startTicker())}_addDirtyBounds(t){void 0===this._dirtyBounds[t.uid]&&(this._isDirty=!0,this._dirtyBounds[t.uid]=t,this._startTicker())}_addDirtyPosition(t){void 0===this._dirtyPositions[t.uid]&&(this._isDirty=!0,this._dirtyPositions[t.uid]=t,this._startTicker())}_addAnimation(t){-1===this._animations.indexOf(t)&&(this._animations.push(t),this._startTicker())}_markDirty(){this._isDirty=!0}_markDirtyRedraw(){this.events.once("frameended",()=>{this._isDirty=!0,this._startTicker()})}eachFrame(t){return this._tickers.push(t),this._startTicker(),new ce.ku(()=>{z.removeFirst(this._tickers,t)})}markDirtyGlobal(t){t||(t=this.container),t.walkChildren(s=>{s instanceof G.W&&this.markDirtyGlobal(s),s.markDirty(),s.markDirtyBounds()})}width(){return Math.floor(this._getCalculatedSize(this._getRealSize()).width)}height(){return Math.floor(this._getCalculatedSize(this._getRealSize()).height)}dispose(){this._isDisposed||(this._isDisposed=!0,this._rootContainer.dispose(),this._renderer.dispose(),this.horizontalLayout.dispose(),this.verticalLayout.dispose(),this.interfaceColors.dispose(),z.each(this._disposers,t=>{t.dispose()}),this._inner&&v.removeElement(this._inner),z.remove(Ai.i_.rootElements,this))}isDisposed(){return this._isDisposed}readerAlert(t){!0!==this._a11yD&&(this._readerAlertElement.innerHTML=v.stripTags(t))}setThemes(t){this._rootContainer.set("themes",t);const s=this.tooltipContainer;s&&s._applyThemes();const a=this.interfaceColors;a&&a._applyThemes()}_addTooltip(){if(!this.tooltipContainer){const t=this._tooltipContainerSettings,s=this._rootContainer.children.push(G.W.new(this,{position:"absolute",isMeasured:!1,width:Ie.AQ,height:Ie.AQ,layer:t?35:30,layerMargin:t||void 0}));this.tooltipContainer=s;const a=N.u.new(this,{});this.container.set("tooltip",a),a.hide(0),this._tooltip=a}}_registerTabindexOrder(t){1!=this._a11yD&&(t.get("focusable")?z.pushOne(this._tabindexes,t):z.remove(this._tabindexes,t),this._invalidateTabindexes())}_unregisterTabindexOrder(t){1!=this._a11yD&&(z.remove(this._tabindexes,t),this._invalidateTabindexes())}_invalidateTabindexes(){if(1==this._a11yD)return;this._tabindexes.sort((s,a)=>{const l=s.get("tabindexOrder",0),g=a.get("tabindexOrder",0);return l==g?0:l>g?1:-1});const t=[];z.each(this._tabindexes,(s,a)=>{s.getPrivate("focusElement")?this._moveFocusElement(a,s):this._makeFocusElement(a,s);const l=s.get("focusableGroup");l&&!1!==s.getPrivate("focusable")&&(-1!==t.indexOf(l)?s.getPrivate("focusElement").dom.setAttribute("tabindex","-1"):t.push(l))})}_updateCurrentFocus(){1!=this._a11yD&&this._focusedSprite&&(this._decorateFocusElement(this._focusedSprite),this._positionFocusElement(this._focusedSprite))}_decorateFocusElement(t,s){if(1==this._a11yD||(s||(s=t.getPrivate("focusElement").dom),!s))return;t.get("visible")&&"tooltip"!=t.get("role")&&!t.isHidden()&&!1!==t.getPrivate("focusable")?"-1"!=s.getAttribute("tabindex")&&s.setAttribute("tabindex",""+this.tabindex):s.removeAttribute("tabindex");const a=t.get("role");a?s.setAttribute("role",a):s.removeAttribute("role");const l=t.get("ariaLabel");if(l){const S=(0,er.q)(t,l);s.setAttribute("aria-label",S)}else s.removeAttribute("aria-label");const g=t.get("ariaLive");g?s.setAttribute("aria-live",g):s.removeAttribute("aria-live");const f=t.get("ariaChecked");null!=f?s.setAttribute("aria-checked",f?"true":"false"):s.removeAttribute("aria-checked"),t.get("ariaHidden")?s.setAttribute("aria-hidden","hidden"):s.removeAttribute("aria-hidden");const b=t.get("ariaOrientation");b?s.setAttribute("aria-orientation",b):s.removeAttribute("aria-orientation");const I=t.get("ariaValueNow");I?s.setAttribute("aria-valuenow",I):s.removeAttribute("aria-valuenow");const k=t.get("ariaValueMin");k?s.setAttribute("aria-valuemin",k):s.removeAttribute("aria-valuemin");const re=t.get("ariaValueMax");re?s.setAttribute("aria-valuemax",re):s.removeAttribute("aria-valuemax");const j=t.get("ariaValueText");j?s.setAttribute("aria-valuetext",j):s.removeAttribute("aria-valuetext");const J=t.get("ariaControls");J?s.setAttribute("aria-controls",J):s.removeAttribute("aria-controls")}_makeFocusElement(t,s){if(s.getPrivate("focusElement")||1==this._a11yD)return;const a=document.createElement("div");"tooltip"!=s.get("role")&&(a.tabIndex=this.tabindex),a.style.position="absolute",v.setInteractive(a,!1);const l=[];s.setPrivate("focusElement",{dom:a,disposers:l}),this._decorateFocusElement(s),l.push(v.addEventListener(a,"focus",g=>{this._handleFocus(g,t)})),l.push(v.addEventListener(a,"blur",g=>{this._handleBlur(g,t)})),this._moveFocusElement(t,s)}_removeFocusElement(t){if(1==this._a11yD)return;z.remove(this._tabindexes,t);const s=t.getPrivate("focusElement");s&&(this._focusElementContainer.removeChild(s.dom),z.each(s.disposers,l=>{l.dispose()}))}_hideFocusElement(t){1!=this._a11yD&&(t.getPrivate("focusElement").dom.style.display="none")}_moveFocusElement(t,s){if(1==this._a11yD)return;const a=this._focusElementContainer,l=s.getPrivate("focusElement").dom;if(l===this._focusElementContainer.children[t])return;const g=this._focusElementContainer.children[t+1];g?a.insertBefore(l,g):a.append(l)}_positionFocusElement(t){if(1==this._a11yD)return;const s=t.globalBounds();let a=s.right==s.left?t.width():s.right-s.left,l=s.top==s.bottom?t.height():s.bottom-s.top,g=s.left-2,f=s.top-2;a<0&&(g+=a,a=Math.abs(a)),l<0&&(f+=l,l=Math.abs(l));const b=t.getPrivate("focusElement").dom;b.style.top=f+"px",b.style.left=g+"px",b.style.width=a+4+"px",b.style.height=l+4+"px"}_handleFocus(t,s){if(1==this._a11yD)return;const a=this._tabindexes[s];a.isVisibleDeep()?(this._positionFocusElement(a),this._focusedSprite=a,a.events.isEnabled("focus")&&a.events.dispatch("focus",{type:"focus",originalEvent:t,target:a})):this._focusNext(t.target,this._isShift?-1:1)}_focusNext(t,s){if(1==this._a11yD)return;const a=Array.from(document.querySelectorAll(["a[href]","area[href]","button:not([disabled])","details","input:not([disabled])","iframe:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[contentEditable=""]','[contentEditable="true"]','[contentEditable="TRUE"]','[tabindex]:not([tabindex^="-"])'].join(",")));let l=a.indexOf(t)+s;l<0?l=a.length-1:l>=a.length&&(l=0),a[l].focus()}_handleBlur(t,s){if(1==this._a11yD)return;const a=this._focusedSprite;a&&a.events.isEnabled("blur")&&a.events.dispatch("blur",{type:"blur",originalEvent:t,target:a}),this._focusedSprite=void 0}updateTooltip(t){if(1==this._a11yD)return;const s=v.stripTags(t._getText());let a=t.getPrivate("tooltipElement");"tooltip"==t.get("role")&&""!=s?(a||(a=this._makeTooltipElement(t)),a.innerHTML!=s&&(a.innerHTML=s)):a&&(a.remove(),t.removePrivate("tooltipElement"))}_makeTooltipElement(t){const s=this._tooltipElementContainer,a=document.createElement("div");return a.style.position="absolute",a.style.width="1px",a.style.height="1px",a.style.overflow="hidden",a.style.clip="rect(1px, 1px, 1px, 1px)",v.setInteractive(a,!1),this._decorateFocusElement(t,a),s.append(a),t.setPrivate("tooltipElement",a),a}_removeTooltipElement(t){if(1==this._a11yD)return;const s=t.getPrivate("tooltipElement");if(s){const a=s.parentElement;a&&a.removeChild(s)}}_invalidateAccessibility(t){if(1==this._a11yD)return;this._focusElementDirty=!0;const s=t.getPrivate("focusElement");t.get("focusable")?s&&(this._decorateFocusElement(t),this._positionFocusElement(t)):s&&this._removeFocusElement(t)}focused(t){return this._focusedSprite===t}documentPointToRoot(t){const s=this.dom.getBoundingClientRect();return{x:t.x-s.left,y:t.y-s.top}}rootPointToDocument(t){const s=this.dom.getBoundingClientRect();return{x:t.x+s.left,y:t.y+s.top}}addDisposer(t){return this._disposers.push(t),t}_updateComputedStyles(){const t=window.getComputedStyle(this.dom);let s="";Se.each(t,(l,g)=>{U.isString(l)&&l.match(/^font/)&&(s+=g)});const a=s!=this._fontHash;return a&&(this._fontHash=s),a}_checkComputedStyles(){this._updateComputedStyles()&&this._invalidateLabelBounds(this.container)}_invalidateLabelBounds(t){t instanceof G.W?t.children.each(s=>{this._invalidateLabelBounds(s)}):t instanceof xe.x&&t.markDirtyBounds()}_hasLicense(){for(let t=0;t<Ai.i_.licenses.length;t++)if(Ai.i_.licenses[t].match(/^AM5C.{5,}/i))return!0;return!1}_licenseApplied(){this._logo&&this._logo.set("forceHidden",!0)}get debugGhostView(){return this._renderer.debugGhostView}set debugGhostView(t){this._renderer.debugGhostView=t}set tapToActivate(t){this._renderer.tapToActivate=t}get tapToActivate(){return this._renderer.tapToActivate}set tapToActivateTimeout(t){this._renderer.tapToActivateTimeout=t}get tapToActivateTimeout(){return this._renderer.tapToActivateTimeout}_makeHTMLElement(t){const s=this._htmlElementContainer,a=document.createElement("div");return t.setPrivate("htmlElement",a),a.style.position="absolute",a.style.overflow="auto",a.style.boxSizing="border-box",v.setInteractive(a,t.get("interactive",!1)),t.events.isEnabled("click")&&(v.setInteractive(a,!0),this._disposers.push(v.addEventListener(a,"click",l=>{const g=this._renderer.getEvent(l);t.events.dispatch("click",{type:"click",originalEvent:g.event,point:g.point,simulated:!1,target:t})}))),this._positionHTMLElement(t),s.append(a),z.pushOne(this._htmlEnabledContainers,t),a}_positionHTMLElements(){z.each(this._htmlEnabledContainers,t=>{this._positionHTMLElement(t)})}_positionHTMLElement(t){const s=t.getPrivate("htmlElement");if(s){z.each(["paddingTop","paddingRight","paddingBottom","paddingLeft","minWidth","minHeight","maxWidth","maxHeight"],j=>{const J=t.get(j);s.style[j]=J?J+"px":""});const l=t.compositeOpacity();setTimeout(()=>{s.style.opacity=l+""},10);const g=t.isVisibleDeep();g&&(s.style.display="block");const f=t.globalBounds();s.style.top=f.top+"px",s.style.left=f.left+"px";const b=t.get("width"),I=t.get("height");let k=0,re=0;if(b&&(k=t.width()),I&&(re=t.height()),b&&I)t.removePrivate("minWidth"),t.removePrivate("minHeight");else{s.style.position="fixed",s.style.width="",s.style.height="";const j=s.getBoundingClientRect();s.style.position="absolute",k=j.width,re=j.height,t._adjustedLocalBounds={left:0,right:0,top:0,bottom:0},t.setPrivate("minWidth",k),t.setPrivate("minHeight",re)}k>0&&(s.style.minWidth=k+"px"),re>0&&(s.style.minHeight=re+"px"),(!g||0==l)&&(s.style.display="none")}}_setHTMLContent(t,s){let a=t.getPrivate("htmlElement");a||(a=this._makeHTMLElement(t)),a.innerHTML!=s&&(a.innerHTML=s)}_removeHTMLContent(t){let s=t.getPrivate("htmlElement");s&&this._htmlElementContainer.removeChild(s),z.remove(this._htmlEnabledContainers,t)}}var e=F(5013);let i;class o extends H.JH{_afterNew(){super._afterNewApplyThemes(),this._setRawDefault("deactivateRoot",!0),function r(q,t,s){const a=t.interfaceColors,l=a.get("secondaryButton").toCSS(),g=a.get("text").toCSS(),f=a.get("alternativeBackground").toCSS(.45);if(!i){const b=new ce.FV([new v.StyleRule(q,".am5-modal",{width:"100%",height:"100%",position:"absolute","z-index":"100000",top:"0",left:"0"}),new v.StyleRule(q,".am5-modal-curtain",{top:"0",left:"0",width:"100%",height:"100%",position:"absolute",background:a.get("background").toCSS(.5),"z-index":"100"}),new v.StyleRule(q,".am5-modal-wrapper",{top:"0",left:"0",width:"100%",height:"100%",position:"absolute","text-align":"center","white-space":"nowrap",background:a.get("background").toCSS(.5),"z-index":"101"}),new v.StyleRule(q,".am5-modal-wrapper:before",{content:"''",display:"inline-block",height:"100%","vertical-align":"middle","margin-right":"-0.25em"}),new v.StyleRule(q,".am5-modal-content",{display:"inline-block",padding:"1.2em","vertical-align":"middle","text-align":"left","white-space":"normal",background:a.get("background").toCSS(),"border-radius":"4px","-webkit-box-shadow":"0px 0px 36px 0px "+f,"box-shadow":"0px 0px 36px 0px "+f,color:g}),new v.StyleRule(q,".am5-modal-content h1",{"font-size":"1em",margin:"0 0 0.5em 0"}),new v.StyleRule(q,".am5-modal-table",{display:"table",margin:"1em 0"}),new v.StyleRule(q,".am5-modal-table-row",{display:"table-row"}),new v.StyleRule(q,".am5-modal-table-heading",{display:"table-heading",padding:"3px 10px 3px 0"}),new v.StyleRule(q,".am5-modal-table-cell",{display:"table-cell",padding:"3px 0 3px 0"}),new v.StyleRule(q,".am5-modal-table-cell > *",{"vertical-align":"middle"}),new v.StyleRule(q,".am5-modal-content input[type=text], .am5-modal-content input[type=number], .am5-modal-content select",{border:"1px solid "+l,"border-radius":"4px",padding:"3px 5px",margin:"2px"}),new v.StyleRule(q,".am5-modal-input-narrow",{width:"50px"}),new v.StyleRule(q,".am5-modal-button",{"font-weight":"400",color:a.get("secondaryButtonText").toCSS(),"line-height":"1.5","text-align":"center","text-decoration":"none","vertical-align":"middle",cursor:"pointer",padding:"0.2em 0.8em","font-size":"1em","border-radius":"0.25em",margin:"0 0.25em 0 0",border:"1px solid "+a.get("secondaryButtonStroke").toCSS(),background:a.get("secondaryButton").toCSS()}),new v.StyleRule(q,".am5-modal-button:hover",{background:a.get("secondaryButtonHover").toCSS()}),new v.StyleRule(q,".am5-modal-button.am5-modal-primary",{color:a.get("primaryButtonText").toCSS(),border:"1px solid "+a.get("primaryButtonStroke").toCSS(),background:a.get("primaryButton").toCSS()}),new v.StyleRule(q,".am5-modal-button.am5-modal-primary:hover",{background:a.get("primaryButtonHover").toCSS()})]);i=new ce.DM(()=>{i=void 0,b.dispose()})}i.increment()}(v.getShadowRoot(this._root.dom),this._root);const t=document.createElement("div");t.className="am5-modal",t.style.display="none",this.root._inner.appendChild(t),this.setPrivate("container",t);const s=document.createElement("div");s.className="am5-modal-curtain",t.appendChild(s),this.setPrivate("curtain",s),this._disposers.push(v.addEventListener(s,"click",()=>{this.cancel()}));const a=document.createElement("div");a.className="am5-modal-wrapper",t.appendChild(a),this.setPrivate("wrapper",a);const l=document.createElement("div");l.className="am5-modal-content",a.appendChild(l),this.setPrivate("content",l);const g=this.get("content");g&&(l.innerHTML=g),v.supports("keyboardevents")&&this._disposers.push(v.addEventListener(document,"keydown",f=>{this.isOpen()&&27==f.keyCode&&this.cancel()}))}_beforeChanged(){super._beforeChanged(),this.isDirty("content")&&(this.getPrivate("content").innerHTML=this.get("content",""))}isOpen(){return"none"!=this.getPrivate("container").style.display}open(){this.getPrivate("container").style.display="block",this.get("deactivateRoot")&&this.setTimeout(()=>{this._root._renderer.interactionsEnabled=!1},10),this.events.dispatch("opened",{type:"opened",target:this})}close(){this.getPrivate("container").style.display="none",this.get("deactivateRoot")&&(this._root._renderer.interactionsEnabled=!0),this.events.dispatch("closed",{type:"closed",target:this})}cancel(){this.getPrivate("container").style.display="none",this.get("deactivateRoot")&&(this._root._renderer.interactionsEnabled=!0),this.events.dispatch("cancelled",{type:"cancelled",target:this})}dispose(){super.dispose(),this.root.dom.removeChild(this.getPrivate("container"))}}Object.defineProperty(o,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Modal"}),Object.defineProperty(o,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:H.JH.classNames.concat([o.className])});class c extends H.JH{constructor(){super(...arguments),Object.defineProperty(this,"_index",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"series",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNewApplyThemes()}_beforeChanged(){if(super._beforeChanged(),this.isDirty("sprite")){const t=this.get("sprite");t&&(t.setAll({position:"absolute",role:"figure"}),this._disposers.push(t))}(this.isDirty("locationX")||this.isDirty("locationY"))&&this.series&&this.series._positionBullet(this)}}Object.defineProperty(c,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Bullet"}),Object.defineProperty(c,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:H.JH.classNames.concat([c.className])});var m=F(4618);class p extends M.T{_beforeChanged(){super._beforeChanged(),this.isDirty("radius")&&(this._clear=!0)}_changed(){super._changed(),this._clear&&this._display.drawCircle(0,0,this.get("radius",10))}}Object.defineProperty(p,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Circle"}),Object.defineProperty(p,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:M.T.classNames.concat([p.className])});class _ extends M.T{constructor(){super(...arguments),Object.defineProperty(this,"morphAnimation",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_beforeChanged(){if(super._beforeChanged(),this.isDirty("coordinates")){const t=[],s=this.get("coordinates");s&&z.each(s,a=>{t.push({x:a[0],y:a[1]})}),this.set("points",t)}if(this.isPrivateDirty("points")&&(this._clear=!0),this.isDirty("points")){this._clear=!0;const t=this.get("points"),s=this._prevSettings.points;if(s){if(t){let b=z.copy(t),I=z.copy(s),k=b.length,re=I.length;if(k>re){let j=z.copy(b);for(let J=0;J<k;J++){let S=Math.floor(J/k*re);j[J]={x:I[S].x,y:I[S].y}}I=j}else if(re>k){let j=z.copy(I);for(let J=0;J<re;J++){let S=Math.floor(J/re*k);j[J]={x:b[S].x,y:b[S].y}}b=j}this.setPrivateRaw("previousPoints",I),this.setPrivateRaw("points",b),this.morphAnimation=this.animatePrivate({key:"morphProgress",from:0,to:1,duration:this.get("animationDuration",0),easing:this.get("animationEasing")})}}else this.setPrivateRaw("previousPoints",t),this.setPrivateRaw("points",t);let a=1/0,l=-1/0,g=1/0,f=-1/0;if(t)for(let b=1,I=t.length;b<I;b++){const k=t[b];a=Math.min(a,k.x),l=Math.max(l,k.x),g=Math.min(g,k.y),f=Math.max(f,k.y)}this.setPrivate("minX",a),this.setPrivate("maxX",l),this.setPrivate("minY",g),this.setPrivate("maxY",g)}this.isPrivateDirty("morphProgress")&&(this._clear=!0)}_changed(){super._changed(),this._clear&&this._draw()}_draw(){const t=this.getPrivate("previousPoints"),s=this.getPrivate("points"),a=this.getPrivate("morphProgress",1);if(s&&t){const l=s[0],g=t[0];l&&this._display.moveTo(g.x+(l.x-g.x)*a,g.y+(l.y-g.y)*a);for(let f=1,b=s.length;f<b;f++){const I=s[f],k=t[f];this._display.lineTo(k.x+(I.x-k.x)*a,k.y+(I.y-k.y)*a)}this._display.closePath()}}_updateSize(){this.markDirty(),this._clear=!0}}Object.defineProperty(_,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Polygon"}),Object.defineProperty(_,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:M.T.classNames.concat([_.className])});class w extends M.T{_beforeChanged(){super._beforeChanged(),(this.isDirty("radiusX")||this.isDirty("radiusY")||this.isDirty("rotation"))&&(this._clear=!0)}_changed(){super._changed(),this._clear&&this._display.drawEllipse(0,0,Math.abs(this.get("radiusX")),Math.abs(this.get("radiusY")))}}Object.defineProperty(w,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Ellipse"}),Object.defineProperty(w,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:M.T.classNames.concat([w.className])});class T extends M.T{_beforeChanged(){super._beforeChanged(),(this.isDirty("radius")||this.isDirty("innerRadius")||this.isDirty("spikes"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){const t=this._display,s=this.get("radius",0),a=v.relativeToValue(this.get("innerRadius",0),s),l=this.get("spikes",0),g=Math.PI/l;let f=Math.PI/2*3;t.moveTo(0,-s);for(let b=0;b<l;b++)t.lineTo(Math.cos(f)*s,Math.sin(f)*s),f+=g,t.lineTo(Math.cos(f)*a,Math.sin(f)*a),f+=g;t.lineTo(0,-s),t.closePath()}}}Object.defineProperty(T,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Star"}),Object.defineProperty(T,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:M.T.classNames.concat([T.className])});var x=F(7313),C=F(1262),K=F(867),ee=F(1371),te=F(434);class $ extends H.JH{_afterNew(){super._afterNewApplyThemes()}getFill(t){return{addColorStop:(s,a)=>{}}}_changed(){super._changed()}getBounds(t){const s=this.get("target");if(s){let a=s.globalBounds();const l=t.toLocal({x:a.left,y:a.top}),g=t.toLocal({x:a.right,y:a.top}),f=t.toLocal({x:a.right,y:a.bottom}),b=t.toLocal({x:a.left,y:a.bottom});return{left:Math.min(l.x,g.x,f.x,b.x),top:Math.min(l.y,g.y,f.y,b.y),right:Math.max(l.x,g.x,f.x,b.x),bottom:Math.max(l.y,g.y,f.y,b.y)}}return t._display.getLocalBounds()}}Object.defineProperty($,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Gradient"}),Object.defineProperty($,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:H.JH.classNames.concat([$.className])});class ae extends ${getFill(t){const s=this.get("rotation",0);let a=this.getBounds(t),l=a.left||0,g=a.right||0,f=a.top||0,b=a.bottom||0,I=Ve.cos(s),k=Ve.sin(s),J=Math.max(I*(g-l),k*(b-f));const S=this._root._renderer.createLinearGradient(l,f,l+J*I,f+J*k),Te=this.get("stops");if(Te){let A=0;z.each(Te,Pe=>{let me=Pe.offset;U.isNumber(me)||(me=A/(Te.length-1));let Ne=Pe.opacity;U.isNumber(Ne)||(Ne=1);let Ae=Pe.color;if(Ae){const De=Pe.lighten;De&&(Ae=Ue.Il.lighten(Ae,De));const He=Pe.brighten;He&&(Ae=Ue.Il.brighten(Ae,He)),S.addColorStop(me,"rgba("+Ae.r+","+Ae.g+","+Ae.b+","+Ne+")")}A++})}return S}}Object.defineProperty(ae,"className",{enumerable:!0,configurable:!0,writable:!0,value:"LinearGradient"}),Object.defineProperty(ae,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:$.classNames.concat([ae.className])});class ge extends G.W{constructor(){super(...arguments),Object.defineProperty(this,"labelContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(G.W.new(this._root,{}))}),Object.defineProperty(this,"markerContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(G.W.new(this._root,{}))}),Object.defineProperty(this,"startLabel",{enumerable:!0,configurable:!0,writable:!0,value:this.labelContainer.children.push(C._.new(this._root,{themeTags:["start"]}))}),Object.defineProperty(this,"endLabel",{enumerable:!0,configurable:!0,writable:!0,value:this.labelContainer.children.push(C._.new(this._root,{themeTags:["end"]}))}),Object.defineProperty(this,"markers",{enumerable:!0,configurable:!0,writable:!0,value:new te.o(ee.YS.new({}),()=>K.c._new(this._root,{themeTags:v.mergeTags(this.markers.template.get("themeTags",[]),[this.get("orientation"),"heatlegend","marker"])},[this.markers.template]))})}_afterNew(){this._settings.themeTags=v.mergeTags(this._settings.themeTags,["heatlegend",this._settings.orientation]),super._afterNew(),this.set("tooltip",N.u.new(this._root,{themeTags:["heatlegend"]}))}makeMarker(){const t=this.markers.make();return t.states.create("disabled",{}),t}showValue(t,s,a){const l=this.getTooltip();if(l&&U.isNumber(t)){const g=this.get("startValue",0),b=(t-g)/(this.get("endValue",1)-g),I=this.get("startColor"),k=this.get("endColor");let re;s||(s=this.getNumberFormatter().format(t)),a||(a=Ue.Il.interpolate(b,I,k)),l.label.set("text",s),re="vertical"==this.get("orientation")?this.markerContainer.toGlobal({x:0,y:this.innerHeight()*(1-b)}):this.markerContainer.toGlobal({x:this.innerWidth()*b,y:0});let j=l.get("background");j&&j.set("fill",Ue.Il.interpolate(b,I,k)),l.set("pointTo",re),l.show()}}_prepareChildren(){super._prepareChildren();const t=this.labelContainer,s=this.get("orientation"),a=this.startLabel,l=this.endLabel,g=this.getTooltip();if(this.isDirty("orientation")&&("vertical"==s?(this.markerContainer.setAll({layout:this._root.verticalLayout,height:Ie.AQ}),this.set("layout",this._root.horizontalLayout),a.setAll({y:Ie.AQ,x:void 0,centerY:Ie.AQ,centerX:Ie.AQ}),l.setAll({y:0,x:void 0,centerY:0,centerX:Ie.AQ}),t.setAll({height:Ie.AQ,width:void 0}),g&&g.set("pointerOrientation","horizontal")):(this.markerContainer.setAll({layout:this._root.horizontalLayout,width:Ie.AQ}),this.set("layout",this._root.verticalLayout),a.setAll({x:0,y:void 0,centerX:0,centerY:0}),l.setAll({x:Ie.AQ,y:void 0,centerX:Ie.AQ,centerY:0}),t.setAll({width:Ie.AQ,height:void 0}),g&&g.set("pointerOrientation","vertical"))),this.isDirty("stepCount")){const f=this.get("stepCount",1),b=this.get("startColor"),I=this.get("endColor");if(this.markerContainer.children.clear(),f>1)for(let k=0;k<f;k++){const re=this.makeMarker();"vertical"==s?this.markerContainer.children.moveValue(re,0):this.markerContainer.children.push(re),b&&I&&re.set("fill",Ue.Il.interpolate(k/f,b,I))}else if(1==f){const k=this.makeMarker();this.markerContainer.children.push(k);const re=ae.new(this._root,{stops:[{color:b},{color:I}]});if("vertical"==s){re.set("rotation",90);let j=re.get("stops");j&&j.reverse()}else re.set("rotation",0);b&&I&&k.set("fillGradient",re)}}(this.isDirty("startText")||this.isDirty("startValue"))&&a.set("text",this.get("startText",this.getNumberFormatter().format(this.get("startValue",0)))),(this.isDirty("endText")||this.isDirty("endValue"))&&l.set("text",this.get("endText",this.getNumberFormatter().format(this.get("endValue",1))))}}Object.defineProperty(ge,"className",{enumerable:!0,configurable:!0,writable:!0,value:"HeatLegend"}),Object.defineProperty(ge,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:G.W.classNames.concat([ge.className])});var oe=F(7591),fe=F(3164);class ye extends fe.F{constructor(){super(...arguments),Object.defineProperty(this,"itemContainers",{enumerable:!0,configurable:!0,writable:!0,value:new te.o(ee.YS.new({}),()=>G.W._new(this._root,{themeTags:v.mergeTags(this.itemContainers.template.get("themeTags",[]),["legend","item"]),themeTagsSelf:v.mergeTags(this.itemContainers.template.get("themeTagsSelf",[]),["itemcontainer"]),background:K.c.new(this._root,{themeTags:v.mergeTags(this.itemContainers.template.get("themeTags",[]),["legend","item","background"]),themeTagsSelf:v.mergeTags(this.itemContainers.template.get("themeTagsSelf",[]),["itemcontainer"])})},[this.itemContainers.template]))}),Object.defineProperty(this,"markers",{enumerable:!0,configurable:!0,writable:!0,value:new te.o(ee.YS.new({}),()=>G.W._new(this._root,{themeTags:v.mergeTags(this.markers.template.get("themeTags",[]),["legend","marker"])},[this.markers.template]))}),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:new te.o(ee.YS.new({}),()=>C._._new(this._root,{themeTags:v.mergeTags(this.labels.template.get("themeTags",[]),["legend","label"])},[this.labels.template]))}),Object.defineProperty(this,"valueLabels",{enumerable:!0,configurable:!0,writable:!0,value:new te.o(ee.YS.new({}),()=>C._._new(this._root,{themeTags:v.mergeTags(this.valueLabels.template.get("themeTags",[]),["legend","label","value"])},[this.valueLabels.template]))}),Object.defineProperty(this,"markerRectangles",{enumerable:!0,configurable:!0,writable:!0,value:new te.o(ee.YS.new({}),()=>K.c._new(this._root,{themeTags:v.mergeTags(this.markerRectangles.template.get("themeTags",[]),["legend","marker","rectangle"])},[this.markerRectangles.template]))})}_afterNew(){this._settings.themeTags=v.mergeTags(this._settings.themeTags,["legend"]),this.fields.push("name","stroke","fill"),super._afterNew()}makeItemContainer(t){const s=this.children.push(this.itemContainers.make());return s._setDataItem(t),this.itemContainers.push(s),s.states.create("disabled",{}),s}makeMarker(){const t=this.markers.make();return this.markers.push(t),t.states.create("disabled",{}),t}makeLabel(){const t=this.labels.make();return t.states.create("disabled",{}),t}makeValueLabel(){const t=this.valueLabels.make();return t.states.create("disabled",{}),t}makeMarkerRectangle(){const t=this.markerRectangles.make();return t.states.create("disabled",{}),t}processDataItem(t){super.processDataItem(t);const s=this.makeItemContainer(t),a=this.get("nameField"),l=this.get("fillField"),g=this.get("strokeField");if(s){const f=this.get("clickTarget","itemContainer"),b=t.dataContext;b&&b.set&&b.set("legendDataItem",t),s._setDataItem(t),t.set("itemContainer",s);const I=this.makeMarker();if(I){s.children.push(I),I._setDataItem(t),t.set("marker",I);const j=this.get("useDefaultMarker"),J=I.children.push(this.makeMarkerRectangle());let S=t.get("fill"),Te=t.get("stroke");t.set("markerRectangle",J),b&&b.get&&(S=b.get(l,S),Te=b.get(g,Te)),Te||(Te=S),j?b.on&&(b.on(l,()=>{J.set("fill",b.get(l))}),b.on(g,()=>{J.set("stroke",b.get(g))})):b&&b.createLegendMarker&&b.createLegendMarker(),J.setAll({fill:S,stroke:Te});const A=b.component;A&&A.updateLegendMarker&&A.updateLegendMarker(b)}const k=this.makeLabel();if(k){s.children.push(k),k._setDataItem(t),t.set("label",k),k.text.on("text",()=>{s.setRaw("ariaLabel",k.text._getText()+("none"!==this.get("clickTarget")?"; "+this._t("Press ENTER to toggle"):"")),s.markDirtyAccessibility()}),b&&b.get&&t.set("name",b.get(a));let j=t.get("name");j&&k.set("text",j)}const re=this.makeValueLabel();if(re&&(s.children.push(re),re._setDataItem(t),t.set("valueLabel",re)),b&&b.show&&(b.on("visible",j=>{s.set("disabled",!j)}),b.get("visible")||s.set("disabled",!0),"none"!=f)){let j=s;"marker"==f&&(j=I),this._addClickEvents(j,b,t)}this.children.values.sort((j,J)=>{const S=j.dataItem.dataContext,Te=J.dataItem.dataContext;if(S&&Te){const A=this.data.indexOf(S),Pe=this.data.indexOf(Te);if(A>Pe)return 1;if(A<Pe)return-1}return 0}),b&&b.updateLegendValue&&b.updateLegendValue()}}_addClickEvents(t,s,a){t.set("cursorOverStyle","pointer"),t.events.on("pointerover",()=>{const l=s.component;l&&l.hoverDataItem&&l.hoverDataItem(s)}),t.events.on("pointerout",()=>{const l=s.component;l&&l.hoverDataItem&&l.unhoverDataItem(s)}),t.events.on("click",()=>{const l=a.get("label").text._getText();s.show&&s.isHidden&&(s.isHidden()||!1===s.get("visible"))?(s.show(),t.set("disabled",!1),this._root.readerAlert(this._t("%1 shown",this._root.locale,l))):s.hide&&(s.hide(),t.set("disabled",!0),this._root.readerAlert(this._t("%1 hidden",this._root.locale,l)))})}disposeDataItem(t){super.disposeDataItem(t);const s=t.dataContext;s&&s.get&&s.get("legendDataItem")==t&&s.set("legendDataItem",void 0);let a=t.get("itemContainer");a&&(this.itemContainers.removeValue(a),a.dispose());let l=t.get("marker");l&&(this.markers.removeValue(l),l.dispose());let g=t.get("markerRectangle");g&&(this.markerRectangles.removeValue(g),g.dispose());let f=t.get("label");f&&(this.labels.removeValue(f),f.dispose());let b=t.get("valueLabel");b&&(this.valueLabels.removeValue(b),b.dispose())}}Object.defineProperty(ye,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Legend"}),Object.defineProperty(ye,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:fe.F.classNames.concat([ye.className])});var we=F(6606),Ze=F(6290);class Fe extends Ze.j{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makePicture(void 0)})}_changed(){if(super._changed(),this.isDirty("width")){const t=this.get("width");this._display.width=U.isNumber(t)?t:void 0}if(this.isDirty("height")){const t=this.get("height");this._display.height=U.isNumber(t)?t:void 0}if(this.isDirty("shadowColor")){this._display.clear();const t=this.get("shadowColor");this._display.shadowColor=t??void 0}this.isDirty("shadowBlur")&&(this._display.clear(),this._display.shadowBlur=this.get("shadowBlur")),this.isDirty("shadowOffsetX")&&(this._display.clear(),this._display.shadowOffsetX=this.get("shadowOffsetX")),this.isDirty("shadowOffsetY")&&(this._display.clear(),this._display.shadowOffsetY=this.get("shadowOffsetY")),this.isDirty("shadowOpacity")&&(this._display.clear(),this._display.shadowOpacity=this.get("shadowOpacity")),(this.isDirty("src")||this.isDirty("cors"))&&(this._display.clear(),this._load())}_load(){const t=this.get("src");if(t){let s="loaded";const a=new Image;a.crossOrigin=this.get("cors","anonymous"),a.src=t,a.decode().then(()=>{this._display.image=a,this._updateSize()}).catch(l=>{s="loaderror"}),this.events.isEnabled(s)&&this.events.dispatch(s,{type:s,target:this})}}_updateSize(){super._updateSize();const t=this._display.image;if(t){let s=this.getPrivate("width",this.get("width")),a=this.getPrivate("height",this.get("height"));const l=t.width&&t.height?t.width/t.height:0;U.isNumber(s)&&U.isNumber(a)?(this._display.width=s,this._display.height=a):U.isNumber(s)&&l?a=s/l:U.isNumber(a)&&l?s=a*l:(s=t.width,a=t.height),U.isNumber(s)&&(this._display.width=s),U.isNumber(a)&&(this._display.height=a),this.markDirtyBounds(),this.markDirty()}}}Object.defineProperty(Fe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Picture"}),Object.defineProperty(Fe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ze.j.classNames.concat([Fe.className])});var st=F(7707),Be=F(9005),qe=F(8490);class rt extends M.T{_beforeChanged(){super._beforeChanged(),(this.isDirty("width")||this.isDirty("height")||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}_changed(){super._changed(),this._clear&&!this.get("draw")&&this._draw()}_draw(){const t=this.width(),s=this.height(),a=this._display;a.moveTo(-t/2,s/2),a.lineTo(0,-s/2),a.lineTo(t/2,s/2),a.lineTo(-t/2,s/2),a.closePath()}_updateSize(){this.markDirty(),this._clear=!0}}Object.defineProperty(rt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Triangle"}),Object.defineProperty(rt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:M.T.classNames.concat([rt.className])});var Bt=F(4248);class It extends Bt.L{_afterNew(){this._addOrientationClass(),super._afterNew(),this.endGrip.setPrivate("visible",!1),this.thumb.setPrivate("visible",!1)}updateGrips(){super.updateGrips();const t=this.startGrip;this.endGrip.setAll({x:t.x(),y:t.y()}),this.setRaw("end",this.get("start"))}}Object.defineProperty(It,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Slider"}),Object.defineProperty(It,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Bt.L.classNames.concat([It.className])});var Lt=F(6979);const mt=Math.abs,Je=Math.atan2,nt=Math.cos,et=Math.max,Oi=Math.min,ei=Math.sin,xi=Math.sqrt,Pt=1e-12,Qt=Math.PI,ki=Qt/2,St=2*Qt;function $i(q){return q>=1?ki:q<=-1?-ki:Math.asin(q)}var Rs=F(5831);function tr(q){return q.innerRadius}function ir(q){return q.outerRadius}function pr(q){return q.startAngle}function Ys(q){return q.endAngle}function Xs(q){return q&&q.padAngle}function Ts(q,t,s,a,l,g,f){var b=q-s,I=t-a,k=(f?g:-g)/xi(b*b+I*I),re=k*I,j=-k*b,J=q+re,S=t+j,Te=s+re,A=a+j,Pe=(J+Te)/2,me=(S+A)/2,Ne=Te-J,Ae=A-S,De=Ne*Ne+Ae*Ae,He=l-g,it=J*A-Te*S,ft=(Ae<0?-1:1)*xi(et(0,He*He*De-it*it)),vt=(it*Ae-Ne*ft)/De,Tt=(-it*Ne-Ae*ft)/De,ot=(it*Ae+Ne*ft)/De,bt=(-it*Ne+Ae*ft)/De,Dt=vt-Pe,ze=Tt-me,at=ot-Pe,ht=bt-me;return Dt*Dt+ze*ze>at*at+ht*ht&&(vt=ot,Tt=bt),{cx:vt,cy:Tt,x01:-re,y01:-j,x11:vt*(l/He-1),y11:Tt*(l/He-1)}}function zs(){var q=tr,t=ir,s=(0,Lt.Z)(0),a=null,l=pr,g=Ys,f=Xs,b=null,I=(0,Rs.d)(k);function k(){var re,j,J=+q.apply(this,arguments),S=+t.apply(this,arguments),Te=l.apply(this,arguments)-ki,A=g.apply(this,arguments)-ki,Pe=mt(A-Te),me=A>Te;if(b||(b=re=I()),S<J&&(j=S,S=J,J=j),S>Pt)if(Pe>St-Pt)b.moveTo(S*nt(Te),S*ei(Te)),b.arc(0,0,S,Te,A,!me),J>Pt&&(b.moveTo(J*nt(A),J*ei(A)),b.arc(0,0,J,A,Te,me));else{var ze,at,Ne=Te,Ae=A,De=Te,He=A,it=Pe,ft=Pe,vt=f.apply(this,arguments)/2,Tt=vt>Pt&&(a?+a.apply(this,arguments):xi(J*J+S*S)),ot=Oi(mt(S-J)/2,+s.apply(this,arguments)),bt=ot,Dt=ot;if(Tt>Pt){var ht=$i(Tt/J*ei(vt)),ai=$i(Tt/S*ei(vt));(it-=2*ht)>Pt?(De+=ht*=me?1:-1,He-=ht):(it=0,De=He=(Te+A)/2),(ft-=2*ai)>Pt?(Ne+=ai*=me?1:-1,Ae-=ai):(ft=0,Ne=Ae=(Te+A)/2)}var ut=S*nt(Ne),Et=S*ei(Ne),Gt=J*nt(He),Ut=J*ei(He);if(ot>Pt){var ri,si=S*nt(Ae),Vt=S*ei(Ae),ti=J*nt(De),Xi=J*ei(De);if(Pe<Qt)if(ri=function sr(q,t,s,a,l,g,f,b){var I=s-q,k=a-t,re=f-l,j=b-g,J=j*I-re*k;if(!(J*J<Pt))return[q+(J=(re*(t-g)-j*(q-l))/J)*I,t+J*k]}(ut,Et,ti,Xi,si,Vt,Gt,Ut)){var es=ut-ri[0],js=Et-ri[1],Ns=si-ri[0],Ht=Vt-ri[1],Kt=1/ei(function Es(q){return q>1?0:q<-1?Qt:Math.acos(q)}((es*Ns+js*Ht)/(xi(es*es+js*js)*xi(Ns*Ns+Ht*Ht)))/2),$t=xi(ri[0]*ri[0]+ri[1]*ri[1]);bt=Oi(ot,(J-$t)/(Kt-1)),Dt=Oi(ot,(S-$t)/(Kt+1))}else bt=Dt=0}ft>Pt?Dt>Pt?(ze=Ts(ti,Xi,ut,Et,S,Dt,me),at=Ts(si,Vt,Gt,Ut,S,Dt,me),b.moveTo(ze.cx+ze.x01,ze.cy+ze.y01),Dt<ot?b.arc(ze.cx,ze.cy,Dt,Je(ze.y01,ze.x01),Je(at.y01,at.x01),!me):(b.arc(ze.cx,ze.cy,Dt,Je(ze.y01,ze.x01),Je(ze.y11,ze.x11),!me),b.arc(0,0,S,Je(ze.cy+ze.y11,ze.cx+ze.x11),Je(at.cy+at.y11,at.cx+at.x11),!me),b.arc(at.cx,at.cy,Dt,Je(at.y11,at.x11),Je(at.y01,at.x01),!me))):(b.moveTo(ut,Et),b.arc(0,0,S,Ne,Ae,!me)):b.moveTo(ut,Et),J>Pt&&it>Pt?bt>Pt?(ze=Ts(Gt,Ut,si,Vt,J,-bt,me),at=Ts(ut,Et,ti,Xi,J,-bt,me),b.lineTo(ze.cx+ze.x01,ze.cy+ze.y01),bt<ot?b.arc(ze.cx,ze.cy,bt,Je(ze.y01,ze.x01),Je(at.y01,at.x01),!me):(b.arc(ze.cx,ze.cy,bt,Je(ze.y01,ze.x01),Je(ze.y11,ze.x11),!me),b.arc(0,0,J,Je(ze.cy+ze.y11,ze.cx+ze.x11),Je(at.cy+at.y11,at.cx+at.x11),me),b.arc(at.cx,at.cy,bt,Je(at.y11,at.x11),Je(at.y01,at.x01),!me))):b.arc(0,0,J,He,De,me):b.lineTo(Gt,Ut)}else b.moveTo(0,0);if(b.closePath(),re)return b=null,re+""||null}return k.centroid=function(){var re=(+q.apply(this,arguments)+ +t.apply(this,arguments))/2,j=(+l.apply(this,arguments)+ +g.apply(this,arguments))/2-Qt/2;return[nt(j)*re,ei(j)*re]},k.innerRadius=function(re){return arguments.length?(q="function"==typeof re?re:(0,Lt.Z)(+re),k):q},k.outerRadius=function(re){return arguments.length?(t="function"==typeof re?re:(0,Lt.Z)(+re),k):t},k.cornerRadius=function(re){return arguments.length?(s="function"==typeof re?re:(0,Lt.Z)(+re),k):s},k.padRadius=function(re){return arguments.length?(a=null==re?null:"function"==typeof re?re:(0,Lt.Z)(+re),k):a},k.startAngle=function(re){return arguments.length?(l="function"==typeof re?re:(0,Lt.Z)(+re),k):l},k.endAngle=function(re){return arguments.length?(g="function"==typeof re?re:(0,Lt.Z)(+re),k):g},k.padAngle=function(re){return arguments.length?(f="function"==typeof re?re:(0,Lt.Z)(+re),k):f},k.context=function(re){return arguments.length?(b=re??null,k):b},k}class us extends M.T{constructor(){super(...arguments),Object.defineProperty(this,"ix",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"iy",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_generator",{enumerable:!0,configurable:!0,writable:!0,value:zs()})}_getTooltipPoint(){let t=this.get("tooltipX"),s=this.get("tooltipY"),a=0,l=0;U.isNumber(t)&&(a=t),U.isNumber(s)&&(l=s);let g=this.get("radius",0),f=this.get("innerRadius",0);return g+=this.get("dRadius",0),f+=this.get("dInnerRadius",0),f<0&&(f=g+f),t instanceof Ie.gG&&(a=this.ix*(f+(g-f)*t.value)),s instanceof Ie.gG&&(l=this.iy*(f+(g-f)*s.value)),this.get("arc")>=360&&0==f&&(a=0,l=0),{x:a,y:l}}_beforeChanged(){super._beforeChanged(),(this.isDirty("radius")||this.isDirty("arc")||this.isDirty("innerRadius")||this.isDirty("startAngle")||this.isDirty("dRadius")||this.isDirty("dInnerRadius")||this.isDirty("cornerRadius"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){let t=this.get("startAngle",0),s=this.get("arc",0);const a=this._generator;s<0&&(t+=s,s*=-1),s>.1&&a.cornerRadius(this.get("cornerRadius",0)),a.context(this._display);let l=this.get("radius",0),g=this.get("innerRadius",0);l+=this.get("dRadius",0),g+=this.get("dInnerRadius",0),g<0&&(g=l+g),a({innerRadius:g,outerRadius:l,startAngle:(t+90)*Ve.RADIANS,endAngle:(t+s+90)*Ve.RADIANS});let I=t+s/2;this.ix=Ve.cos(I),this.iy=Ve.sin(I)}if(this.isDirty("shiftRadius")){const t=this.get("shiftRadius",0);this.setRaw("dx",this.ix*t),this.setRaw("dy",this.iy*t),this.markDirtyPosition()}}}Object.defineProperty(us,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Slice"}),Object.defineProperty(us,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:M.T.classNames.concat([us.className])});var Fi=F(6288),mr=F(3704),br=F(9879);class Ds extends ${getFill(t){const s=this.getBounds(t);let a=0,l=0;const k=(s.right||0)-(s.left||0),re=(s.bottom||0)-(s.top||0);let j=t.get("radius");U.isNumber(j)?(a=0,l=0):(j=Math.min(k,re)/2,a=k/2,l=re/2);let J=this.get("x"),S=this.get("y");null!=J&&(a=v.relativeToValue(J,k)),null!=S&&(l=v.relativeToValue(S,re));const Te=this._root._renderer.createRadialGradient(a,l,0,a,l,j),A=this.get("stops");if(A){let Pe=0;z.each(A,me=>{let Ne=me.offset;U.isNumber(Ne)||(Ne=Pe/(A.length-1));let Ae=me.opacity;U.isNumber(Ae)||(Ae=1);let De=me.color;if(De){const He=me.lighten;He&&(De=Ue.Il.lighten(De,He));const it=me.brighten;it&&(De=Ue.Il.brighten(De,it)),Te.addColorStop(Ne,"rgba("+De.r+","+De.g+","+De.b+","+Ae+")")}Pe++})}return Te}}Object.defineProperty(Ds,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RadialGradient"}),Object.defineProperty(Ds,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:$.classNames.concat([Ds.className])});var Li=F(4555);class Ms extends Li.c{_beforeChanged(){super._beforeChanged(),this.isDirty("gap")&&(this._clear=!0)}_draw(){super._draw();const t=this.get("checkered",!1),s=this.get("centered",!0),a=this.get("gap",0),l=this.get("rotation",0);let g=this.get("width",100),f=this.get("height",100),b=this.get("radius",3),I=2*b+a,k=2*b+a,re=Math.round(g/I),j=Math.round(f/k);I=g/re,k=f/j,0!=l&&(this._display.x=I*Ve.cos(l),this._display.y=k*Ve.sin(l));const J=this.get("color"),S=this.get("colorOpacity");(J||S)&&this._display.beginFill(J,S);for(let Te=0==l?0:2*-j;Te<2*j;Te++)for(let A=0==l?0:2*-re;A<2*re;A++)if(!t||1!=(1&Te)&&1!=(1&A)||1==(1&Te)&&1==(1&A)){let Pe=A*I,me=Te*k;s&&(Pe+=I+a/2,me+=k+a/2),this._display.drawCircle(Pe-b,me-b,b)}t?(g=g/2-2*a,f=f/2-2*a):(g-=a,f-=a),(J||S)&&this._display.endFill()}}Object.defineProperty(Ms,"className",{enumerable:!0,configurable:!0,writable:!0,value:"CirclePattern"}),Object.defineProperty(Ms,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Li.c.classNames.concat([Ms.className])});class hs extends Li.c{_beforeChanged(){super._beforeChanged(),this.isDirty("gap")&&(this._clear=!0)}_draw(){super._draw();const t=this.get("width",100),s=this.get("height",100),a=this.get("gap",0),l=this.get("strokeWidth",1);if(a){let b=a+l,I=s/b;for(let k=-I;k<2*I;k++){const re=Math.round(k*b-b/2)+.5;this._display.moveTo(-t,re),this._display.lineTo(2*t,re)}}else this._display.moveTo(0,0),this._display.lineTo(t,0);this._display.lineStyle(l,this.get("color"),this.get("colorOpacity"));let g=this.get("strokeDasharray");U.isNumber(g)&&(g=g<.5?[0]:[g]),this._display.setLineDash(g);const f=this.get("strokeDashoffset");f&&this._display.setLineDashOffset(f),this._display.endStroke()}}Object.defineProperty(hs,"className",{enumerable:!0,configurable:!0,writable:!0,value:"LinePattern"}),Object.defineProperty(hs,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Li.c.classNames.concat([hs.className])});var Gs=F(1701);class Yi extends Li.c{_beforeChanged(){super._beforeChanged(),this.isDirty("gap")&&(this._clear=!0)}_draw(){super._draw();const t=this.get("checkered",!1),s=this.get("centered",!0),a=this.get("gap",0),l=this.get("rotation",0);let g=this.get("width",100),f=this.get("height",100),b=this.get("maxWidth",5),I=this.get("maxHeight",5),k=b+a,re=I+a,j=Math.round(g/k),J=Math.round(f/re);k=g/j,re=f/J,0!=l&&(this._display.x=k/2*Ve.cos(l),this._display.y=-re/2*Ve.sin(l));for(let A=0==l?0:2*-J;A<2*J;A++)for(let Pe=0==l?0:2*-j;Pe<2*j;Pe++)if(!t||1!=(1&A)&&1!=(1&Pe)||1==(1&A)&&1==(1&Pe)){let me=Pe*k,Ne=A*re;s&&(me+=(k-b)/2,Ne+=(re-I)/2),this._display.drawRect(me,Ne,b,I)}t?(g=g/2-2*a,f=f/2-2*a):(g-=a,f-=a);const S=this.get("color"),Te=this.get("colorOpacity");(S||Te)&&(this._display.beginFill(S,Te),this._display.endFill())}}Object.defineProperty(Yi,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RectanglePattern"}),Object.defineProperty(Yi,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Li.c.classNames.concat([Yi.className])});class Ji extends Li.c{_beforeChanged(){super._beforeChanged(),this.isDirty("svgPath")&&(this._clear=!0)}_draw(){super._draw();const t=this.get("svgPath");null!=t&&this._display.svgPath(t);const s=this.get("color"),a=this.get("colorOpacity");(s||a)&&(this._display.beginFill(s,a),this._display.endFill())}}Object.defineProperty(Ji,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PathPattern"}),Object.defineProperty(Ji,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Li.c.classNames.concat([Ji.className])});var Is=F(2661),qi=F(1171);class Vs{static parse(t,s){s=this._applyDefaults(s);try{if(U.isString(t)){let a=JSON.parse(t);return s.reverse&&U.isArray(a)&&a.reverse(),a}if(U.isArray(t)||U.isObject(t))return t;throw"Unable to parse JSON data"}catch{return}}static _applyDefaults(t){const s={};return t||(t={}),Se.each({reverse:!1},(l,g)=>{s[l]=t[l]||g}),s}}class Us{static parse(t,s){s=this._applyDefaults(s);let f,b,I,a=this.CSVToArray(t,s.delimiter),l=[],g=[];for(b=0;b<s.skipRows;b++)a.shift();if(s.useColumnNames){g=a.shift();for(let k=0;k<g.length;k++)f=null!=g[k]?g[k].replace(/^\s+|\s+$/gm,""):"",""===f&&(f="col"+k),g[k]=f}for(;I=s.reverse?a.pop():a.shift(),I;){if(s.skipEmpty&&1===I.length&&""===I[0])continue;let k={};for(b=0;b<I.length;b++)f=void 0===g[b]?"col"+b:g[b],k[f]=I[b];l.push(k)}return l}static CSVToArray(t,s){s=s||",";let a=new RegExp("(\\"+s+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+s+"\\r\\n]*))","gi"),l=[[]],g=null;for(;g=a.exec(t),g;){let b,f=g[1];f.length&&f!==s&&l.push([]),b=g[2]?g[2].replace(new RegExp('""',"g"),'"'):g[3],l[l.length-1].push(b)}return l}static _applyDefaults(t){const s={};return t||(t={}),Se.each({delimiter:",",reverse:!1,skipRows:0,skipEmpty:!0,useColumnNames:!1},(l,g)=>{s[l]=t[l]||g}),s}}class Cs extends H.JH{constructor(){super(...arguments),Object.defineProperty(this,"_checkDates",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_checkNumbers",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_checkColors",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_checkEmpty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_checkDeep",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){super._afterNew(),this._checkFeatures(),this.on("dateFields",()=>this._checkFeatures()),this.on("dateFormat",()=>this._checkFeatures()),this.on("numericFields",()=>this._checkFeatures()),this.on("colorFields",()=>this._checkFeatures()),this.on("emptyAs",()=>this._checkFeatures())}_checkFeatures(){(this.isDirty("dateFields")||this.isDirty("dateFormat"))&&(this._checkDates=this.get("dateFields")&&this.get("dateFields").length>0),this.isDirty("numericFields")&&(this._checkNumbers=this.get("numericFields")&&this.get("numericFields").length>0),this.isDirty("colorFields")&&(this._checkColors=this.get("colorFields")&&this.get("colorFields").length>0),this.isDirty("emptyAs")&&(this._checkEmpty=null!=this.get("emptyAs")),this._checkDeepFeatures()}_checkDeepFeatures(){const t=[];z.each(["dateFields","numericFields","colorFields"],s=>{z.each(this.get(s,[]),a=>{const l=a.split(".");for(l.pop();l.length>0;)t.push(l.join(".")),l.pop()})}),this._checkDeep=t.length>0,this.setPrivate("deepFields",t)}processMany(t){U.isArray(t)&&(this._checkDates||this._checkNumbers||this._checkColors||this._checkEmpty)&&z.each(t,s=>{this.processRow(s)})}processRow(t,s=""){Se.each(t,(a,l)=>{const g=s+a;this._checkEmpty&&(t[a]=this._maybeToEmpty(t[a])),this._checkNumbers&&(t[a]=this._maybeToNumber(g,t[a])),this._checkDates&&(t[a]=this._maybeToDate(g,t[a])),this._checkColors&&(t[a]=this._maybeToColor(g,t[a])),this._checkDeep&&-1!==this.getPrivate("deepFields",[]).indexOf(g)&&U.isObject(t[a])&&this.processRow(t[a],g+".")})}_maybeToNumber(t,s){return-1!==this.get("numericFields").indexOf(t)?U.toNumber(s):s}_maybeToDate(t,s){return-1!==this.get("dateFields").indexOf(t)?this._root.dateFormatter.parse(s,this.get("dateFormat","")).getTime():s}_maybeToEmpty(t){return null!=t&&""!=t||null==this.get("emptyAs")?t:this.get("emptyAs")}_maybeToColor(t,s){return-1!==this.get("colorFields").indexOf(t)?Ue.Il.fromAny(s):s}}class Ss extends G.W{constructor(){super(...arguments),Object.defineProperty(this,"rectangle",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(W.A.new(this._root,{themeTags:["rectangle"],fillOpacity:0,fill:(0,Ue.$_)(16777215)}))}),Object.defineProperty(this,"gripL",{enumerable:!0,configurable:!0,writable:!0,value:this._createGrip("left")}),Object.defineProperty(this,"gripR",{enumerable:!0,configurable:!0,writable:!0,value:this._createGrip("right")}),Object.defineProperty(this,"gripT",{enumerable:!0,configurable:!0,writable:!0,value:this._createGrip("top")}),Object.defineProperty(this,"gripB",{enumerable:!0,configurable:!0,writable:!0,value:this._createGrip("bottom")}),Object.defineProperty(this,"_is",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_ix",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_iw",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_positionDP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isHover",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){super._afterNew(),this.addTag("resizer"),this.set("visible",!1),this.gripL.events.on("dragged",t=>{this._resize(t.target,-1)}),this.gripR.events.on("dragged",t=>{this._resize(t.target,1)}),this.gripL.events.on("dragstart",t=>{this._resizeStart(t.target)}),this.gripR.events.on("dragstart",t=>{this._resizeStart(t.target)}),this.gripT.events.on("dragged",t=>{this._rotate(t,90)}),this.gripB.events.on("dragged",t=>{this._rotate(t,-90)}),this.gripT.events.on("dragstart",t=>{this._resizeStart(t.target)}),this.gripB.events.on("dragstart",t=>{this._resizeStart(t.target)})}_resizeStart(t){const s=this.get("sprite");s&&(this._is=s.get("scale",1),this._ix=t.x(),this._iw=this.width()/2)}_resize(t,s){const a=this.get("sprite"),l=this.get("spriteTemplate");if(a){const g=Math.max(.01,this._is*(1+s*(t.x()-this._ix)/this._iw));l?l.set("scale",g):a.set("scale",g),a.states.lookup("default").set("scale",g),this._updatePositions()}}_rotate(t,s){const a=this.get("sprite"),l=this.get("spriteTemplate");if(a){const g=this.parent;if(g){const f=this.get("rotationStep",10);let b=Math.round((Ve.getAngle({x:this.x(),y:this.y()},g.toLocal(t.point))+s)/f)*f;l?l.set("rotation",b):a.set("rotation",b),a.states.lookup("default").set("rotation",b),this._updatePositions()}}}_createGrip(t){const s=this.children.push(G.W.new(this._root,{themeTags:["grip",t],setStateOnChildren:!0,draggable:!0}));return s.children.push(K.c.new(this._root,{themeTags:["outline"],centerX:Ie.CI,centerY:Ie.CI})),s.children.push(K.c.new(this._root,{centerX:Ie.CI,centerY:Ie.CI})),s}_updateChildren(){if(super._updateChildren(),this.isDirty("sprite")){const t=this.get("sprite");if(t){this.show(0),this.setPrivate("visible",!0),this._updatePositions();const s=t.parent;s&&s.children.moveValue(this,0),this._positionDP=t.events.on("positionchanged",()=>{this._updatePositions()})}else this.hide(0),this.setPrivate("visible",!1),this._positionDP&&this._positionDP.dispose()}(this.isDirty("width")||this.isDirty("height")||this.isDirty("rotation"))&&this._updatePositions()}_updatePositions(){const t=this.get("sprite");if(t){let s=t.localBounds(),a=t.get("scale",1),l=20,g=(s.right-s.left)*a+l,f=(s.bottom-s.top)*a+l,b=t.get("rotation",0);const I=this.rectangle;let k=t.get("centerX",Ie.CI),re=t.get("centerY",Ie.CI),j=0;k instanceof Ie.gG&&(j=k.value);let J=0;re instanceof Ie.gG&&(J=re.value),I.setAll({centerX:k,centerY:re,width:g,height:f}),this.setAll({x:t.x()+l*(j-.5)*Ve.cos(b)-l*(J-.5)*Ve.sin(b),y:t.y()+l*(J-.5)*Ve.cos(b)+l*(j-.5)*Ve.sin(b),width:g,height:f,rotation:b}),this.gripT.setAll({x:(.5-j)*g,y:-J*f}),this.gripB.setAll({x:(.5-j)*g,y:(1-J)*f}),this.gripL.setAll({x:-j*g,y:(.5-J)*f}),this.gripR.setAll({x:(1-j)*g,y:(.5-J)*f}),this.rectangle.setAll({width:g,height:f})}}}Object.defineProperty(Ss,"className",{enumerable:!0,configurable:!0,writable:!0,value:"SpriteResizer"}),Object.defineProperty(Ss,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:G.W.classNames.concat([Ss.className])});var rr=F(5770);function wi(q,t,s){return new Promise((a,l)=>{let g=null!=s&&"blob"==s.responseType,f=new XMLHttpRequest;if(f.onload=()=>{if(200===f.status){let b,I;if(g)return I=f.response,void pi(I).then(re=>{let j={xhr:f,error:!1,response:re,blob:I,type:f.getResponseHeader("Content-Type"),target:t};a(j)});b=f.responseText||f.response;let k={xhr:f,error:!1,response:b,blob:I,type:f.getResponseHeader("Content-Type"),target:t};a(k)}else l({xhr:f,error:!0,type:f.getResponseHeader("Content-Type"),target:t})},f.onerror=()=>{l({xhr:f,error:!0,type:f.getResponseHeader("Content-Type"),target:t})},f.open("GET",q,!0),s&&s.withCredentials&&(f.withCredentials=!0),null!=s){if(null!=s.requestHeaders)for(let b=0;b<s.requestHeaders.length;b++){let I=s.requestHeaders[b];f.setRequestHeader(I.key,I.value)}null!=s.responseType&&(f.responseType=s.responseType)}f.send()})}function pi(q){return new Promise((t,s)=>{const a=new FileReader;a.onload=l=>{t(a.result)},a.onerror=l=>{s(l)},a.readAsText(q)})}var mi=F(1445)},6109:(Mt,Xe,F)=>{F.r(Xe),F.d(Xe,{default:()=>Ee});const Ee={_decimalSeparator:",",_thousandSeparator:".",_percentPrefix:null,_percentSuffix:"%",_big_number_suffix_3:"K",_big_number_suffix_6:"Mio",_big_number_suffix_9:"Mrd",_big_number_suffix_12:"Bio",_big_number_suffix_15:"Brd",_big_number_suffix_18:"Trill",_big_number_suffix_21:"Trd",_big_number_suffix_24:"Y",_small_number_suffix_3:"m",_small_number_suffix_6:"\u03bc",_small_number_suffix_9:"n",_small_number_suffix_12:"p",_small_number_suffix_15:"f",_small_number_suffix_18:"a",_small_number_suffix_21:"z",_small_number_suffix_24:"y",_byte_suffix_B:"B",_byte_suffix_KB:"KB",_byte_suffix_MB:"MB",_byte_suffix_GB:"GB",_byte_suffix_TB:"TB",_byte_suffix_PB:"PB",_date_millisecond:"mm:ss SSS",_date_millisecond_full:"HH:mm:ss SSS",_date_second:"HH:mm:ss",_date_second_full:"HH:mm:ss",_date_minute:"HH:mm",_date_minute_full:"HH:mm - dd. MMM, yyyy",_date_hour:"HH:mm",_date_hour_full:"HH:mm - dd. MMM, yyyy",_date_day:"dd. MMM",_date_day_full:"dd. MMM, yyyy",_date_week:"ww",_date_week_full:"dd. MMM, yyyy",_date_month:"MMM",_date_month_full:"MMM, yyyy",_date_year:"yyyy",_duration_millisecond:"SSS",_duration_second:"ss",_duration_minute:"mm",_duration_hour:"hh",_duration_day:"dd",_duration_week:"ww",_duration_month:"MM",_duration_year:"yyyy",_era_ad:"v. Chr.",_era_bc:"n. Chr.",A:"",P:"",AM:"",PM:"","A.M.":"","P.M.":"",January:"Januar",February:"Februar",March:"M\xe4rz",April:"April",May:"Mai",June:"Juni",July:"Juli",August:"August",September:"September",October:"Oktober",November:"November",December:"Dezember",Jan:"Jan.",Feb:"Febr.",Mar:"M\xe4rz",Apr:"Apr.","May(short)":"Mai",Jun:"Juni",Jul:"Juli",Aug:"Aug.",Sep:"Sept.",Oct:"Okt.",Nov:"Nov.",Dec:"Dez.",Sunday:"Sonntag",Monday:"Montag",Tuesday:"Dienstag",Wednesday:"Mittwoch",Thursday:"Donnerstag",Friday:"Freitag",Saturday:"Samstag",Sun:"So.",Mon:"Mo.",Tue:"Di.",Wed:"Mi.",Thu:"Do.",Fri:"Fr.",Sat:"Sa.",_dateOrd:function(G){return G+"."},"Zoom Out":"Herauszoomen",Play:"Abspielen",Stop:"Stop",Legend:"Legende","Press ENTER to toggle":"Klicken, tippen oder ENTER dr\xfccken zum Umschalten",Loading:"Wird geladen",Home:"Home",Chart:"Diagramm","Serial chart":"Seriendiagramm","X/Y chart":"X-Y-Diagramm","Pie chart":"Kreisdiagramm","Gauge chart":"Messdiagramm","Radar chart":"Netzdiagramm","Sankey diagram":"Sankey-Diagramm","Chord diagram":"","Flow diagram":"Flussdiagramm","TreeMap chart":"Baumdiagramm",Series:"Serie","Candlestick Series":"Kerzendiagramm","Column Series":"Balkendiagramm","Line Series":"Liniendiagramm","Pie Slice Series":"Kreisdiagramm","X/Y Series":"Punktdiagramm",Map:"Karte","Press ENTER to zoom in":"Dr\xfccke ENTER zum Hereinzoomen","Press ENTER to zoom out":"Dr\xfccke ENTER zum Herauszoomen","Use arrow keys to zoom in and out":"Benutze die Pfeiltasten zum Zoomen","Use plus and minus keys on your keyboard to zoom in and out":"Benutze Plus- und Minustasten zum Zoomen",Export:"Export",Image:"Bild",Data:"Daten",Print:"Drucken","Press ENTER to open":"Zum \xd6ffnen klicken, tippen oder ENTER dr\xfccken","Press ENTER to print.":"Zum Drucken klicken, tippen oder ENTER dr\xfccken.","Press ENTER to export as %1.":"Klicken, tippen oder ENTER dr\xfccken um als %1 zu exportieren","(Press ESC to close this message)":"ESC dr\xfccken um diese Nachricht zu schlie\xdfen","Image Export Complete":"Bildexport komplett","Export operation took longer than expected. Something might have gone wrong.":"Der Export dauert l\xe4nger als geplant. Vielleicht ist etwas schiefgelaufen.","Saved from":"Gespeichert von",PNG:"",JPG:"",GIF:"",SVG:"",PDF:"",JSON:"",CSV:"",XLSX:"",HTML:"","Use TAB to select grip buttons or left and right arrows to change selection":"TAB nutzen, um Ankerpunkte auszuw\xe4hlen oder linke und rechte Pfeiltaste um die Auswahl zu \xe4ndern","Use left and right arrows to move selection":"Linke und rechte Pfeiltaste nutzen um die Auswahl zu verschieben","Use left and right arrows to move left selection":"Linke und rechte Pfeiltaste nutzen um die linke Auswahl zu verschieben","Use left and right arrows to move right selection":"Linke und rechte Pfeiltaste nutzen um die rechte Auswahl zu verschieben","Use TAB select grip buttons or up and down arrows to change selection":"TAB nutzen, um Ankerpunkte auszuw\xe4hlen oder Pfeiltaste nach oben und unten dr\xfccken, um die Auswahl zu \xe4ndern","Use up and down arrows to move selection":"Pfeiltaste nach oben und unten dr\xfccken, um die Auswahl zu verschieben","Use up and down arrows to move lower selection":"Pfeiltaste nach oben und unten dr\xfccken, um die untere Auswahl zu verschieben","Use up and down arrows to move upper selection":"Pfeiltaste nach oben und unten dr\xfccken, um die obere Auswahl zu verschieben","From %1 to %2":"Von %1 bis %2","From %1":"Von %1","To %1":"Bis %1","No parser available for file: %1":"Kein Parser f\xfcr Datei %1 verf\xfcgbar","Error parsing file: %1":"Fehler beim Parsen von Datei %1","Unable to load file: %1":"Datei %1 konnte nicht geladen werden","Invalid date":"Kein Datum"}},7551:(Mt,Xe,F)=>{F.r(Xe),F.d(Xe,{default:()=>Ee});const Ee={firstDayOfWeek:1,_decimalSeparator:".",_thousandSeparator:",",_percentPrefix:null,_percentSuffix:"%",_big_number_suffix_3:"k",_big_number_suffix_6:"M",_big_number_suffix_9:"G",_big_number_suffix_12:"T",_big_number_suffix_15:"P",_big_number_suffix_18:"E",_big_number_suffix_21:"Z",_big_number_suffix_24:"Y",_small_number_suffix_3:"m",_small_number_suffix_6:"\u03bc",_small_number_suffix_9:"n",_small_number_suffix_12:"p",_small_number_suffix_15:"f",_small_number_suffix_18:"a",_small_number_suffix_21:"z",_small_number_suffix_24:"y",_byte_suffix_B:"B",_byte_suffix_KB:"KB",_byte_suffix_MB:"MB",_byte_suffix_GB:"GB",_byte_suffix_TB:"TB",_byte_suffix_PB:"PB",_date:"yyyy-MM-dd",_date_millisecond:"mm:ss SSS",_date_millisecond_full:"HH:mm:ss SSS",_date_second:"HH:mm:ss",_date_second_full:"HH:mm:ss",_date_minute:"HH:mm",_date_minute_full:"HH:mm - MMM dd, yyyy",_date_hour:"HH:mm",_date_hour_full:"HH:mm - MMM dd, yyyy",_date_day:"MMM dd",_date_day_full:"MMM dd, yyyy",_date_week:"ww",_date_week_full:"MMM dd, yyyy",_date_month:"MMM",_date_month_full:"MMM, yyyy",_date_year:"yyyy",_duration_millisecond:"SSS",_duration_millisecond_second:"ss.SSS",_duration_millisecond_minute:"mm:ss SSS",_duration_millisecond_hour:"hh:mm:ss SSS",_duration_millisecond_day:"d'd' mm:ss SSS",_duration_millisecond_week:"d'd' mm:ss SSS",_duration_millisecond_month:"M'm' dd'd' mm:ss SSS",_duration_millisecond_year:"y'y' MM'm' dd'd' mm:ss SSS",_duration_second:"ss",_duration_second_minute:"mm:ss",_duration_second_hour:"hh:mm:ss",_duration_second_day:"d'd' hh:mm:ss",_duration_second_week:"d'd' hh:mm:ss",_duration_second_month:"M'm' dd'd' hh:mm:ss",_duration_second_year:"y'y' MM'm' dd'd' hh:mm:ss",_duration_minute:"mm",_duration_minute_hour:"hh:mm",_duration_minute_day:"d'd' hh:mm",_duration_minute_week:"d'd' hh:mm",_duration_minute_month:"M'm' dd'd' hh:mm",_duration_minute_year:"y'y' MM'm' dd'd' hh:mm",_duration_hour:"hh'h'",_duration_hour_day:"d'd' hh'h'",_duration_hour_week:"d'd' hh'h'",_duration_hour_month:"M'm' dd'd' hh'h'",_duration_hour_year:"y'y' MM'm' dd'd' hh'h'",_duration_day:"d'd'",_duration_day_week:"d'd'",_duration_day_month:"M'm' dd'd'",_duration_day_year:"y'y' MM'm' dd'd'",_duration_week:"w'w'",_duration_week_month:"w'w'",_duration_week_year:"w'w'",_duration_month:"M'm'",_duration_month_year:"y'y' MM'm'",_duration_year:"y'y'",_era_ad:"AD",_era_bc:"BC",A:"",P:"",AM:"",PM:"","A.M.":"","P.M.":"",January:"",February:"",March:"",April:"",May:"",June:"",July:"",August:"",September:"",October:"",November:"",December:"",Jan:"",Feb:"",Mar:"",Apr:"","May(short)":"May",Jun:"",Jul:"",Aug:"",Sep:"",Oct:"",Nov:"",Dec:"",Sunday:"",Monday:"",Tuesday:"",Wednesday:"",Thursday:"",Friday:"",Saturday:"",Sun:"",Mon:"",Tue:"",Wed:"",Thu:"",Fri:"",Sat:"",_dateOrd:function(G){let xe="th";if(G<11||G>13)switch(G%10){case 1:xe="st";break;case 2:xe="nd";break;case 3:xe="rd"}return xe},"Zoom Out":"",Play:"",Stop:"",Legend:"","Press ENTER to toggle":"",Loading:"",Home:"",Chart:"","Serial chart":"","X/Y chart":"","Pie chart":"","Gauge chart":"","Radar chart":"","Sankey diagram":"","Flow diagram":"","Chord diagram":"","TreeMap chart":"","Force directed tree":"","Sliced chart":"",Series:"","Candlestick Series":"","OHLC Series":"","Column Series":"","Line Series":"","Pie Slice Series":"","Funnel Series":"","Pyramid Series":"","X/Y Series":"",Map:"","Press ENTER to zoom in":"","Press ENTER to zoom out":"","Use arrow keys to zoom in and out":"","Use plus and minus keys on your keyboard to zoom in and out":"",Export:"",Image:"",Data:"",Print:"","Press ENTER or use arrow keys to navigate":"","Press ENTER to open":"","Press ENTER to print.":"","Press ENTER to export as %1.":"","(Press ESC to close this message)":"","Image Export Complete":"","Export operation took longer than expected. Something might have gone wrong.":"","Saved from":"",PNG:"",JPG:"",GIF:"",SVG:"",PDF:"",JSON:"",CSV:"",XLSX:"",HTML:"","Use TAB to select grip buttons or left and right arrows to change selection":"","Use left and right arrows to move selection":"","Use left and right arrows to move left selection":"","Use left and right arrows to move right selection":"","Use TAB select grip buttons or up and down arrows to change selection":"","Use up and down arrows to move selection":"","Use up and down arrows to move lower selection":"","Use up and down arrows to move upper selection":"","From %1 to %2":"","From %1":"","To %1":"","No parser available for file: %1":"","Error parsing file: %1":"","Unable to load file: %1":"","Invalid date":"",Close:"",Minimize:""}},5637:(Mt,Xe,F)=>{F.r(Xe),F.d(Xe,{default:()=>Ee});const Ee={_decimalSeparator:".",_thousandSeparator:",",_percentPrefix:null,_percentSuffix:"%",_date_millisecond:"mm:ss SSS",_date_millisecond_full:"HH:mm:ss SSS",_date_second:"hh:mm:ss a",_date_second_full:"hh:mm:ss a",_date_minute:"hh:mm a",_date_minute_full:"hh:mm a - MMM dd, yyyy",_date_hour:"hh:mm a",_date_hour_full:"hh:mm a - MMM dd, yyyy",_date_day:"MMM dd",_date_day_full:"MMM dd, yyyy",_date_week:"ww",_date_week_full:"MMM dd, yyyy",_date_month:"MMM",_date_month_full:"MMM, yyyy",_date_year:"yyyy",_duration_millisecond:"SSS",_duration_second:"ss",_duration_minute:"mm",_duration_hour:"hh",_duration_day:"dd",_duration_week:"ww",_duration_month:"MM",_duration_year:"yyyy",_era_ad:"AD",_era_bc:"BC",A:"",P:"",AM:"",PM:"","A.M.":"","P.M.":"",January:"",February:"",March:"",April:"",May:"",June:"",July:"",August:"",September:"",October:"",November:"",December:"",Jan:"",Feb:"",Mar:"",Apr:"","May(short)":"May",Jun:"",Jul:"",Aug:"",Sep:"",Oct:"",Nov:"",Dec:"",Sunday:"",Monday:"",Tuesday:"",Wednesday:"",Thursday:"",Friday:"",Saturday:"",Sun:"",Mon:"",Tue:"",Wed:"",Thu:"",Fri:"",Sat:"",_dateOrd:function(G){let xe="th";if(G<11||G>13)switch(G%10){case 1:xe="st";break;case 2:xe="nd";break;case 3:xe="rd"}return xe},Play:"",Stop:"","Zoom Out":"",Legend:"","Press ENTER to toggle":"",Loading:"",Home:"",Chart:"","Serial chart":"","X/Y chart":"","Pie chart":"","Gauge chart":"","Radar chart":"","Sankey diagram":"","Chord diagram":"","Flow diagram":"","TreeMap chart":"",Series:"","Candlestick Series":"","Column Series":"","Line Series":"","Pie Slice Series":"","X/Y Series":"",Map:"","Press ENTER to zoom in":"","Press ENTER to zoom out":"","Use arrow keys to zoom in and out":"","Use plus and minus keys on your keyboard to zoom in and out":"",Export:"",Image:"",Data:"",Print:"","Press ENTER to open":"","Press ENTER to print.":"","Press ENTER to export as %1.":"","(Press ESC to close this message)":"","Image Export Complete":"","Export operation took longer than expected. Something might have gone wrong.":"","Saved from":"",PNG:"",JPG:"",GIF:"",SVG:"",PDF:"",JSON:"",CSV:"",XLSX:"",HTML:"","Use TAB to select grip buttons or left and right arrows to change selection":"","Use left and right arrows to move selection":"","Use left and right arrows to move left selection":"","Use left and right arrows to move right selection":"","Use TAB select grip buttons or up and down arrows to change selection":"","Use up and down arrows to move selection":"","Use up and down arrows to move lower selection":"","Use up and down arrows to move upper selection":"","From %1 to %2":"","From %1":"","To %1":"","No parser available for file: %1":"","Error parsing file: %1":"","Unable to load file: %1":"","Invalid date":""}},2593:(Mt,Xe,F)=>{F.r(Xe),F.d(Xe,{DefaultTheme:()=>tr,GraticuleSeries:()=>Hi,MapChart:()=>ur,MapLine:()=>qt,MapLineSeries:()=>wt,MapPointSeries:()=>hr,MapPolygon:()=>Zs,MapPolygonSeries:()=>cr,MapSeries:()=>_e,ZoomControl:()=>dr,geoAlbersUsa:()=>xn,geoEqualEarth:()=>Pn,geoEquirectangular:()=>pn,geoMercator:()=>Es,geoNaturalEarth1:()=>Tn,geoOrthographic:()=>gn,getGeoArea:()=>on,getGeoBounds:()=>lr,getGeoCentroid:()=>or,getGeoCircle:()=>an,getGeoRectangle:()=>ln,normalizeGeoPoint:()=>un});var Ee=F(3164),G=F(3559),xe=F(8148);class _e extends Ee.F{constructor(){super(...arguments),Object.defineProperty(this,"_types",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_geometries",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_geoJSONparsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_excluded",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_notIncluded",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_afterNew(){this.fields.push("geometry","geometryType"),this._setRawDefault("geometryField","geometry"),this._setRawDefault("geometryTypeField","geometryType"),this._setRawDefault("idField","id"),this.on("geoJSON",n=>{let u=this._prevSettings.geoJSON;u&&u!=n&&this.data.clear()}),super._afterNew()}_handleDirties(){const n=this.get("geoJSON");let u=this._prevSettings.geoJSON;u&&u!=n&&(this._prevSettings.geoJSON=void 0,this._geoJSONparsed=!1),this._geoJSONparsed||(this._parseGeoJSON(),this._geoJSONparsed=!0)}_prepareChildren(){if(super._prepareChildren(),this._valuesDirty&&this._handleDirties(),this.isDirty("geoJSON")||this.isDirty("include")||this.isDirty("exclude")){this._handleDirties();const n=this.chart,u=this.get("exclude");u&&(n&&(n._centerLocation=null),G.each(u,y=>{const D=this.getDataItemById(y);D&&this._excludeDataItem(D)})),(!u||0==u.length)&&(G.each(this._excluded,y=>{this._unexcludeDataItem(y)}),this._excluded=[]);const h=this.get("include");h&&(n&&(n._centerLocation=null),G.each(this.dataItems,y=>{const D=y.get("id");D&&-1==h.indexOf(D)?this._notIncludeDataItem(y):this._unNotIncludeDataItem(y)})),h||(G.each(this._notIncluded,y=>{this._unNotIncludeDataItem(y)}),this._notIncluded=[])}}_excludeDataItem(n){this._removeGeometry(n.get("geometry")),G.move(this._excluded,n)}_unexcludeDataItem(n){this._addGeometry(n.get("geometry"),this)}_notIncludeDataItem(n){this._removeGeometry(n.get("geometry")),G.move(this._notIncluded,n)}_unNotIncludeDataItem(n){this._addGeometry(n.get("geometry"),this)}checkInclude(n,u,h){if(u){if(0==u.length)return!1;if(-1==u.indexOf(n))return!1}return!(h&&h.length>0&&-1!=h.indexOf(n))}_parseGeoJSON(){const n=this.get("geoJSON");if(n){let u;"FeatureCollection"==n.type?u=n.features:"Feature"==n.type?u=[n]:-1!=["Point","LineString","Polygon","MultiPoint","MultiLineString","MultiPolygon"].indexOf(n.type)?u=[{geometry:n}]:console.log("nothing found in geoJSON");const h=this.get("geodataNames");if(u){const D=this.get("idField","id");for(let O=0,E=u.length;O<E;O++){let V=u[O],Z=V.geometry;if(Z){let Y=Z.type,se=V[D];if(h&&h[se]&&(V.properties.name=h[se]),-1!=this._types.indexOf(Y)){let Q,le;null!=se&&(Q=G.find(this.dataItems,de=>de.get("id")==se)),Q&&(le=Q.dataContext),Q?le.geometry||(le.geometry=Z,le.geometryType=Y,Q.set("geometry",Z),Q.set("geometryType",Y),this.processDataItem(Q)):(le={geometry:Z,geometryType:Y,madeFromGeoData:!0},le[D]=se,this.data.push(le)),xe.softCopyProperties(V.properties,le)}}}}const y="geodataprocessed";this.events.isEnabled(y)&&this.events.dispatch(y,{type:y,target:this})}}_placeBulletsContainer(n){this.children.moveValue(this.bulletsContainer)}_removeBulletsContainer(){}projection(){const n=this.chart;if(n)return n.get("projection")}geoPath(){const n=this.chart;if(n)return n.getPrivate("geoPath")}_addGeometry(n,u){if(n&&u.get("affectsBounds",!0)){this._geometries.push(n);const h=this.chart;h&&h.markDirtyGeometries()}}_removeGeometry(n){if(n){G.remove(this._geometries,n);const u=this.chart;u&&u.markDirtyGeometries()}}_dispose(){super._dispose();const n=this.chart;n&&n.series.removeValue(this)}_onDataClear(){super._onDataClear(),this._geoJSONparsed=!1}}Object.defineProperty(_e,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapSeries"}),Object.defineProperty(_e,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ee.F.classNames.concat([_e.className])});var he=F(2743),R=F(7039),ce=F(3232);class z{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){const u=this._partials;let h=0;for(let y=0;y<this._n&&y<32;y++){const D=u[y],O=n+D,E=Math.abs(n)<Math.abs(D)?n-(O-D):D-(O-n);E&&(u[h++]=E),n=O}return u[h]=n,this._n=h+1,this}valueOf(){const n=this._partials;let h,y,D,u=this._n,O=0;if(u>0){for(O=n[--u];u>0&&(h=O,y=n[--u],O=h+y,D=y-(O-h),!D););u>0&&(D<0&&n[u-1]<0||D>0&&n[u-1]>0)&&(y=2*D,h=O+y,y==h-O&&(O=h))}return O}}var B=1e-6,ne=1e-12,L=Math.PI,P=L/2,H=L/4,ue=2*L,M=180/L,W=L/180,N=Math.abs,be=Math.atan,Se=Math.atan2,U=Math.cos,Re=Math.ceil,Ge=Math.exp,pe=(Math,Math.hypot),xt=Math.log,Le=(Math,Math.sin),dt=Math.sign||function(d){return d>0?1:d<0?-1:0},Qe=Math.sqrt,gt=Math.tan;function Ue(d){return d>1?P:d<-1?-P:Math.asin(d)}function zt(d){return(d=Le(d/2))*d}function Ie(){}function Ve(d,n){d&&ci.hasOwnProperty(d.type)&&ci[d.type](d,n)}var hi={Feature:function(d,n){Ve(d.geometry,n)},FeatureCollection:function(d,n){for(var u=d.features,h=-1,y=u.length;++h<y;)Ve(u[h].geometry,n)}},ci={Sphere:function(d,n){n.sphere()},Point:function(d,n){n.point((d=d.coordinates)[0],d[1],d[2])},MultiPoint:function(d,n){for(var u=d.coordinates,h=-1,y=u.length;++h<y;)n.point((d=u[h])[0],d[1],d[2])},LineString:function(d,n){yi(d.coordinates,n,0)},MultiLineString:function(d,n){for(var u=d.coordinates,h=-1,y=u.length;++h<y;)yi(u[h],n,0)},Polygon:function(d,n){ds(d.coordinates,n)},MultiPolygon:function(d,n){for(var u=d.coordinates,h=-1,y=u.length;++h<y;)ds(u[h],n)},GeometryCollection:function(d,n){for(var u=d.geometries,h=-1,y=u.length;++h<y;)Ve(u[h],n)}};function yi(d,n,u){var D,h=-1,y=d.length-u;for(n.lineStart();++h<y;)n.point((D=d[h])[0],D[1],D[2]);n.lineEnd()}function ds(d,n){var u=-1,h=d.length;for(n.polygonStart();++u<h;)yi(d[u],n,1);n.polygonEnd()}function Wt(d,n){d&&hi.hasOwnProperty(d.type)?hi[d.type](d,n):Ve(d,n)}var ns,Ti,Gi,Di,ii={sphere:Ie,point:Ie,lineStart:function Yt(){ii.point=di,ii.lineEnd=Nt},lineEnd:Ie,polygonStart:Ie,polygonEnd:Ie};function Nt(){ii.point=ii.lineEnd=Ie}function di(d,n){Ti=d*=W,Gi=Le(n*=W),Di=U(n),ii.point=as}function as(d,n){d*=W;var u=Le(n*=W),h=U(n),y=N(d-Ti),D=U(y),E=h*Le(y),V=Di*u-Gi*h*D,Z=Gi*u+Di*h*D;ns.add(Se(Qe(E*E+V*V),Z)),Ti=d,Gi=u,Di=h}function vi(d){return ns=new z,Wt(d,ii),+ns}var Ri=[null,null],fi={type:"LineString",coordinates:Ri};function ni(d,n){return Ri[0]=d,Ri[1]=n,vi(fi)}class qt extends ce.T{constructor(){super(...arguments),Object.defineProperty(this,"_projectionDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_beforeChanged(){if(super._beforeChanged(),this._projectionDirty||this.isDirty("geometry")||this.isDirty("precision")){const n=this.get("geometry");if(n){const h=this.getPrivate("series");if(h){const y=h.chart;if(y){const D=y.get("projection");let O=null;D&&D.clipAngle&&(O=D.clipAngle(),D.precision(this.get("precision",.5)));const E=this.dataItem,V=y.getPrivate("geoPath");if(V&&E)if(this._clear=!0,"straight"==E.get("lineType",h.get("lineType"))){const Z=this.get("geometry");if(Z){let Y=Z.coordinates;if(Y){let se;"LineString"==Z.type?se=[Y]:"MultiLineString"==Z.type&&(se=Y),this.set("draw",Q=>{for(let le=0;le<se.length;le++){let de=se[le];if(de.length>0){const ve=de[0],Me=y.convert({longitude:ve[0],latitude:ve[1]});Q.lineTo(Me.x,Me.y);for(let Oe=0;Oe<de.length;Oe++){const je=de[Oe],Ce=y.convert({longitude:je[0],latitude:je[1]});Q.lineTo(Ce.x,Ce.y)}}}})}}}else this.set("draw",Z=>{D&&!1===h.get("clipBack")&&D.clipAngle(180),V.context(this._display),V(n),V.context(null),D&&D.clipAngle&&D.clipAngle(O)})}}}const u="linechanged";this.events.isEnabled(u)&&this.events.dispatch(u,{type:u,target:this})}}markDirtyProjection(){this.markDirty(),this._projectionDirty=!0}_clearDirty(){super._clearDirty(),this._projectionDirty=!1}_getTooltipPoint(){let n=this.get("tooltipX"),u=this.get("tooltipY"),h=0,y=0;if(he.isNumber(n)&&(h=n),he.isNumber(u)&&(y=u),n instanceof R.gG){const D=this.positionToGeoPoint(n.value),O=this.getPrivate("series");if(O){const E=O.chart;if(E){const V=E.convert(D);h=V.x,y=V.y}}}return{x:h,y}}positionToGeoPoint(n){const u=this.get("geometry"),h=this.getPrivate("series"),y=h.chart,D=this.dataItem;if(u&&h&&y&&D){const O=D.get("lineType",h.get("lineType"));let Z,Q,le,E=vi(u),V=0,Y=0,se=0,de=u.coordinates;if(de){let ve;"LineString"==u.type?ve=[de]:"MultiLineString"==u.type&&(ve=de);for(let Me=0;Me<ve.length;Me++){let Oe=ve[Me];if(Oe.length>1){for(let je=1;je<Oe.length;je++)if(Q=Oe[je-1],le=Oe[je],Y=V/E,Z=ni(Q,le),V+=Z,se=V/E,Y<=n&&se>n){Me=ve.length;break}}else 1==Oe.length&&(Q=Oe[0],le=Oe[0],Y=0,se=1)}if(Q&&le){let Oe,Me=(n-Y)/(se-Y);if("straight"==O){let je=y.convert({longitude:Q[0],latitude:Q[1]}),Ce=y.convert({longitude:le[0],latitude:le[1]});return y.invert({x:je.x+(Ce.x-je.x)*Me,y:je.y+(Ce.y-je.y)*Me})}return Oe=function Ii(d,n){var u=d[0]*W,h=d[1]*W,y=n[0]*W,D=n[1]*W,O=U(h),E=Le(h),V=U(D),Z=Le(D),Y=O*U(u),se=O*Le(u),Q=V*U(y),le=V*Le(y),de=2*Ue(Qe(zt(D-h)+O*V*zt(y-u))),ve=Le(de),Me=de?function(Oe){var je=Le(Oe*=de)/ve,Ce=Le(de-Oe)/ve,Ye=Ce*Y+je*Q,Ke=Ce*se+je*le,$e=Ce*E+je*Z;return[Se(Ke,Ye)*M,Se($e,Qe(Ye*Ye+Ke*Ke))*M]}:function(){return[u*M,h*M]};return Me.distance=de,Me}(Q,le)(Me),{longitude:Oe[0],latitude:Oe[1]}}}}return{longitude:0,latitude:0}}}Object.defineProperty(qt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapLine"}),Object.defineProperty(qt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ce.T.classNames.concat([qt.className])});var Vi=F(434),kt=F(1371);class wt extends _e{constructor(){super(...arguments),Object.defineProperty(this,"mapLines",{enumerable:!0,configurable:!0,writable:!0,value:new Vi.o(kt.YS.new({}),()=>qt._new(this._root,{},[this.mapLines.template]))}),Object.defineProperty(this,"_types",{enumerable:!0,configurable:!0,writable:!0,value:["LineString","MultiLineString"]})}_afterNew(){this.fields.push("lineType"),this._setRawDefault("lineTypeField","lineType"),super._afterNew()}makeMapLine(n){const u=this.children.push(this.mapLines.make());return u._setDataItem(n),this.mapLines.push(u),u}markDirtyProjection(){G.each(this.dataItems,n=>{let u=n.get("mapLine");u&&u.markDirtyProjection()})}_prepareChildren(){super._prepareChildren(),this.isDirty("stroke")&&this.mapLines.template.set("stroke",this.get("stroke"))}processDataItem(n){super.processDataItem(n);let u=n.get("mapLine");u||(u=this.makeMapLine(n)),this._handlePointsToConnect(n),n.on("pointsToConnect",()=>{this._handlePointsToConnect(n)}),n.set("mapLine",u),this._addGeometry(n.get("geometry"),this),u.setPrivate("series",this)}_handlePointsToConnect(n){const u=n.get("pointsToConnect");u&&(G.each(u,h=>{h.on("geometry",()=>{this.markDirtyValues(n)}),h.on("longitude",()=>{this.markDirtyValues(n)}),h.on("latitude",()=>{this.markDirtyValues(n)})}),this.markDirtyValues(n))}markDirtyValues(n){if(super.markDirtyValues(),n){const u=n.get("mapLine");if(u){const h=n.get("pointsToConnect");if(h){let y=[];G.each(h,O=>{const E=O.get("longitude"),V=O.get("latitude");if(null!=E&&null!=V)y.push([E,V]);else{const Z=O.get("geometry");if(Z){const Y=Z.coordinates;Y&&y.push([Y[0],Y[1]])}}});let D={type:"LineString",coordinates:y};n.setRaw("geometry",D),u.set("geometry",D)}else u.set("geometry",n.get("geometry"))}}}disposeDataItem(n){super.disposeDataItem(n);const u=n.get("mapLine");u&&(this.mapLines.removeValue(u),u.dispose())}_excludeDataItem(n){super._excludeDataItem(n);const u=n.get("mapLine");u&&u.setPrivate("visible",!1)}_unexcludeDataItem(n){super._unexcludeDataItem(n);const u=n.get("mapLine");u&&u.setPrivate("visible",!0)}_notIncludeDataItem(n){super._notIncludeDataItem(n);const u=n.get("mapLine");u&&u.setPrivate("visible",!1)}_unNotIncludeDataItem(n){super._unNotIncludeDataItem(n);const u=n.get("mapLine");u&&u.setPrivate("visible",!0)}}function Ct(d,n,u){d=+d,n=+n,u=(y=arguments.length)<2?(n=d,d=0,1):y<3?1:+u;for(var h=-1,y=0|Math.max(0,Math.ceil((n-d)/u)),D=new Array(y);++h<y;)D[h]=d+h*u;return D}function Ui(d,n,u){var h=Ct(d,n-B,u).concat(n);return function(y){return h.map(function(D){return[y,D]})}}function fs(d,n,u){var h=Ct(d,n-B,u).concat(n);return function(y){return h.map(function(D){return[D,y]})}}Object.defineProperty(wt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapLineSeries"}),Object.defineProperty(wt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:_e.classNames.concat([wt.className])});class Hi extends wt{constructor(){super(...arguments),Object.defineProperty(this,"_dataItem",{enumerable:!0,configurable:!0,writable:!0,value:this.makeDataItem({})})}_afterNew(){super._afterNew(),this.dataItems.push(this._dataItem),this._generate()}_updateChildren(){if(super._updateChildren(),this.isDirty("step")&&this._generate(),this.isDirty("clipExtent")&&this.get("clipExtent")){const n=this.chart;n&&n.events.on("geoboundschanged",()=>{this._generate()}),this._generate()}}_generate(){let n=function gs(){var d,n,u,h,y,D,O,E,Q,le,de,ve,V=10,Z=V,Y=90,se=360,Me=2.5;function Oe(){return{type:"MultiLineString",coordinates:je()}}function je(){return Ct(Re(h/Y)*Y,u,Y).map(de).concat(Ct(Re(E/se)*se,O,se).map(ve)).concat(Ct(Re(n/V)*V,d,V).filter(function(Ce){return N(Ce%Y)>B}).map(Q)).concat(Ct(Re(D/Z)*Z,y,Z).filter(function(Ce){return N(Ce%se)>B}).map(le))}return Oe.lines=function(){return je().map(function(Ce){return{type:"LineString",coordinates:Ce}})},Oe.outline=function(){return{type:"Polygon",coordinates:[de(h).concat(ve(O).slice(1),de(u).reverse().slice(1),ve(E).reverse().slice(1))]}},Oe.extent=function(Ce){return arguments.length?Oe.extentMajor(Ce).extentMinor(Ce):Oe.extentMinor()},Oe.extentMajor=function(Ce){return arguments.length?(E=+Ce[0][1],O=+Ce[1][1],(h=+Ce[0][0])>(u=+Ce[1][0])&&(Ce=h,h=u,u=Ce),E>O&&(Ce=E,E=O,O=Ce),Oe.precision(Me)):[[h,E],[u,O]]},Oe.extentMinor=function(Ce){return arguments.length?(D=+Ce[0][1],y=+Ce[1][1],(n=+Ce[0][0])>(d=+Ce[1][0])&&(Ce=n,n=d,d=Ce),D>y&&(Ce=D,D=y,y=Ce),Oe.precision(Me)):[[n,D],[d,y]]},Oe.step=function(Ce){return arguments.length?Oe.stepMajor(Ce).stepMinor(Ce):Oe.stepMinor()},Oe.stepMajor=function(Ce){return arguments.length?(Y=+Ce[0],se=+Ce[1],Oe):[Y,se]},Oe.stepMinor=function(Ce){return arguments.length?(V=+Ce[0],Z=+Ce[1],Oe):[V,Z]},Oe.precision=function(Ce){return arguments.length?(Me=+Ce,Q=Ui(D,y,90),le=fs(n,d,Me),de=Ui(E,O,90),ve=fs(h,u,Me),Oe):Me},Oe.extentMajor([[-180,-90+B],[180,90-B]]).extentMinor([[-180,-80-B],[180,80+B]])}();if(n){if(this.get("clipExtent")){const h=this.chart;if(h){const y=h.geoBounds();y&&n.extent([[y.left,y.bottom],[y.right,y.top]])}}const u=this.get("step",10);n.stepMinor([360,360]),n.stepMajor([u,u]),this._dataItem.set("geometry",n())}}}Object.defineProperty(Hi,"className",{enumerable:!0,configurable:!0,writable:!0,value:"GraticuleSeries"}),Object.defineProperty(Hi,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:wt.classNames.concat([Hi.className])});var ks=F(5013),ms=F(2231);function Zt(d,n){function u(h,y){return h=d(h,y),n(h[0],h[1])}return d.invert&&n.invert&&(u.invert=function(h,y){return(h=n.invert(h,y))&&d.invert(h[0],h[1])}),u}function bs(d,n){return N(d)>L&&(d-=Math.round(d/ue)*ue),[d,n]}function Wi(d,n,u){return(d%=ue)?n||u?Zt(ys(d),vs(n,u)):ys(d):n||u?vs(n,u):bs}function _s(d){return function(n,u){return N(n+=d)>L&&(n-=Math.round(n/ue)*ue),[n,u]}}function ys(d){var n=_s(d);return n.invert=_s(-d),n}function vs(d,n){var u=U(d),h=Le(d),y=U(n),D=Le(n);function O(E,V){var Z=U(V),Y=U(E)*Z,se=Le(E)*Z,Q=Le(V),le=Q*u+Y*h;return[Se(se*y-le*D,Y*u-Q*h),Ue(le*y+se*D)]}return O.invert=function(E,V){var Z=U(V),Y=U(E)*Z,se=Le(E)*Z,Q=Le(V),le=Q*y-se*D;return[Se(se*y+Q*D,Y*u+le*h),Ue(le*u-Y*h)]},O}function Zi(){var n,d=[];return{point:function(u,h,y){n.push([u,h,y])},lineStart:function(){d.push(n=[])},lineEnd:Ie,rejoin:function(){d.length>1&&d.push(d.pop().concat(d.shift()))},result:function(){var u=d;return d=[],n=null,u}}}function os(d,n){return N(d[0]-n[0])<B&&N(d[1]-n[1])<B}function Qi(d,n,u,h){this.x=d,this.z=n,this.o=u,this.e=h,this.v=!1,this.n=this.p=null}function ws(d,n,u,h,y){var E,V,D=[],O=[];if(d.forEach(function(de){if(!((ve=de.length-1)<=0)){var ve,je,Me=de[0],Oe=de[ve];if(os(Me,Oe)){if(!Me[2]&&!Oe[2]){for(y.lineStart(),E=0;E<ve;++E)y.point((Me=de[E])[0],Me[1]);return void y.lineEnd()}Oe[0]+=2*B}D.push(je=new Qi(Me,de,null,!0)),O.push(je.o=new Qi(Me,null,je,!1)),D.push(je=new Qi(Oe,de,null,!1)),O.push(je.o=new Qi(Oe,null,je,!0))}}),D.length){for(O.sort(n),Ps(D),Ps(O),E=0,V=O.length;E<V;++E)O[E].e=u=!u;for(var Y,se,Z=D[0];;){for(var Q=Z,le=!0;Q.v;)if((Q=Q.n)===Z)return;Y=Q.z,y.lineStart();do{if(Q.v=Q.o.v=!0,Q.e){if(le)for(E=0,V=Y.length;E<V;++E)y.point((se=Y[E])[0],se[1]);else h(Q.x,Q.n.x,1,y);Q=Q.n}else{if(le)for(E=(Y=Q.p.z).length-1;E>=0;--E)y.point((se=Y[E])[0],se[1]);else h(Q.x,Q.p.x,-1,y);Q=Q.p}Y=(Q=Q.o).z,le=!le}while(!Q.v);y.lineEnd()}}}function Ps(d){if(n=d.length){for(var n,y,u=0,h=d[0];++u<n;)h.n=y=d[u],y.p=h,h=y;h.n=y=d[0],y.p=h}}function ji(d){return[Se(d[1],d[0]),Ue(d[2])]}function gi(d){var n=d[0],u=d[1],h=U(u);return[h*U(n),h*Le(n),Le(u)]}function Mi(d,n){return d[0]*n[0]+d[1]*n[1]+d[2]*n[2]}function Ci(d,n){return[d[1]*n[2]-d[2]*n[1],d[2]*n[0]-d[0]*n[2],d[0]*n[1]-d[1]*n[0]]}function ls(d,n){d[0]+=n[0],d[1]+=n[1],d[2]+=n[2]}function Ki(d,n){return[d[0]*n,d[1]*n,d[2]*n]}function Si(d){var n=Qe(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]);d[0]/=n,d[1]/=n,d[2]/=n}function Ni(d){return N(d[0])<=L?d[0]:dt(d[0])*((N(d[0])+L)%ue-L)}function Ls(d){return Array.from(function*Ai(d){for(const n of d)yield*n}(d))}function Bi(d,n,u,h){return function(y){var Z,Y,se,D=n(y),O=Zi(),E=n(O),V=!1,Q={point:le,lineStart:ve,lineEnd:Me,polygonStart:function(){Q.point=Oe,Q.lineStart=je,Q.lineEnd=Ce,Y=[],Z=[]},polygonEnd:function(){Q.point=le,Q.lineStart=ve,Q.lineEnd=Me,Y=Ls(Y);var Ye=function er(d,n){var u=Ni(n),h=n[1],y=Le(h),D=[Le(u),-U(u),0],O=0,E=0,V=new z;1===y?h=P+B:-1===y&&(h=-P-B);for(var Z=0,Y=d.length;Z<Y;++Z)if(Q=(se=d[Z]).length)for(var se,Q,le=se[Q-1],de=Ni(le),ve=le[1]/2+H,Me=Le(ve),Oe=U(ve),je=0;je<Q;++je,de=Ye,Me=$e,Oe=At,le=Ce){var Ce=se[je],Ye=Ni(Ce),Ke=Ce[1]/2+H,$e=Le(Ke),At=U(Ke),_t=Ye-de,yt=_t>=0?1:-1,Rt=yt*_t,tt=Rt>L,li=Me*$e;if(V.add(Se(li*yt*Le(Rt),Oe*At+li*U(Rt))),O+=tt?_t+yt*ue:_t,tt^de>=u^Ye>=u){var Xt=Ci(gi(le),gi(Ce));Si(Xt);var Ot=Ci(D,Xt);Si(Ot);var ke=(tt^_t>=0?-1:1)*Ue(Ot[2]);(h>ke||h===ke&&(Xt[0]||Xt[1]))&&(E+=tt^_t>=0?1:-1)}}return(O<-B||O<B&&V<-ne)^1&E}(Z,h);Y.length?(V||(y.polygonStart(),V=!0),ws(Y,e,Ye,u,y)):Ye&&(V||(y.polygonStart(),V=!0),y.lineStart(),u(null,null,1,y),y.lineEnd()),V&&(y.polygonEnd(),V=!1),Y=Z=null},sphere:function(){y.polygonStart(),y.lineStart(),u(null,null,1,y),y.lineEnd(),y.polygonEnd()}};function le(Ye,Ke){d(Ye,Ke)&&y.point(Ye,Ke)}function de(Ye,Ke){D.point(Ye,Ke)}function ve(){Q.point=de,D.lineStart()}function Me(){Q.point=le,D.lineEnd()}function Oe(Ye,Ke){se.push([Ye,Ke]),E.point(Ye,Ke)}function je(){E.lineStart(),se=[]}function Ce(){Oe(se[0][0],se[0][1]),E.lineEnd();var $e,_t,yt,Rt,Ye=E.clean(),Ke=O.result(),At=Ke.length;if(se.pop(),Z.push(se),se=null,At){if(1&Ye){if((_t=(yt=Ke[0]).length-1)>0){for(V||(y.polygonStart(),V=!0),y.lineStart(),$e=0;$e<_t;++$e)y.point((Rt=yt[$e])[0],Rt[1]);y.lineEnd()}return}At>1&&2&Ye&&Ke.push(Ke.pop().concat(Ke.shift())),Y.push(Ke.filter(ie))}}return Q}}function ie(d){return d.length>1}function e(d,n){return((d=d.x)[0]<0?d[1]-P-B:P-d[1])-((n=n.x)[0]<0?n[1]-P-B:P-n[1])}bs.invert=bs;const i=Bi(function(){return!0},function r(d){var y,n=NaN,u=NaN,h=NaN;return{lineStart:function(){d.lineStart(),y=1},point:function(D,O){var E=D>0?L:-L,V=N(D-n);N(V-L)<B?(d.point(n,u=(u+O)/2>0?P:-P),d.point(h,u),d.lineEnd(),d.lineStart(),d.point(E,u),d.point(D,u),y=0):h!==E&&V>=L&&(N(n-h)<B&&(n-=h*B),N(D-E)<B&&(D-=E*B),u=function o(d,n,u,h){var y,D,O=Le(d-u);return N(O)>B?be((Le(n)*(D=U(h))*Le(u)-Le(h)*(y=U(n))*Le(d))/(y*D*O)):(n+h)/2}(n,u,D,O),d.point(h,u),d.lineEnd(),d.lineStart(),d.point(E,u),y=0),d.point(n=D,u=O),h=E},lineEnd:function(){d.lineEnd(),n=u=NaN},clean:function(){return 2-y}}},function c(d,n,u,h){var y;if(null==d)h.point(-L,y=u*P),h.point(0,y),h.point(L,y),h.point(L,0),h.point(L,-y),h.point(0,-y),h.point(-L,-y),h.point(-L,0),h.point(-L,y);else if(N(d[0]-n[0])>B){var D=d[0]<n[0]?L:-L;h.point(-D,y=u*D/2),h.point(0,y),h.point(D,y)}else h.point(n[0],n[1])},[-L,-P]);function m(d){return function(){return d}}function p(d,n,u,h,y,D){if(u){var O=U(n),E=Le(n),V=h*u;null==y?(y=n+h*ue,D=n-V/2):(y=_(O,y),D=_(O,D),(h>0?y<D:y>D)&&(y+=h*ue));for(var Z,Y=y;h>0?Y>D:Y<D;Y-=V)Z=ji([O,-E*U(Y),-E*Le(Y)]),d.point(Z[0],Z[1])}}function _(d,n){(n=gi(n))[0]-=d,Si(n);var u=function pt(d){return d>1?0:d<-1?L:Math.acos(d)}(-n[1]);return((-n[2]<0?-u:u)+ue-B)%ue}var C=1e9,K=-C;const te=d=>d;function ae(d){return function(n){var u=new ge;for(var h in d)u[h]=d[h];return u.stream=n,u}}function ge(){}ge.prototype={constructor:ge,point:function(d,n){this.stream.point(d,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var oe=1/0,fe=oe,ye=-oe,we=ye;const st={point:function Fe(d,n){d<oe&&(oe=d),d>ye&&(ye=d),n<fe&&(fe=n),n>we&&(we=n)},lineStart:Ie,lineEnd:Ie,polygonStart:Ie,polygonEnd:Ie,result:function(){var d=[[oe,fe],[ye,we]];return ye=we=-(fe=oe=1/0),d}};function Be(d,n,u){var h=d.clipExtent&&d.clipExtent();return d.scale(150).translate([0,0]),null!=h&&d.clipExtent(null),Wt(u,d.stream(st)),n(st.result()),null!=h&&d.clipExtent(h),d}function qe(d,n,u){return Be(d,function(h){var y=n[1][0]-n[0][0],D=n[1][1]-n[0][1],O=Math.min(y/(h[1][0]-h[0][0]),D/(h[1][1]-h[0][1])),E=+n[0][0]+(y-O*(h[1][0]+h[0][0]))/2,V=+n[0][1]+(D-O*(h[1][1]+h[0][1]))/2;d.scale(150*O).translate([E,V])},u)}function rt(d,n,u){return qe(d,[[0,0],n],u)}function Bt(d,n,u){return Be(d,function(h){var y=+n,D=y/(h[1][0]-h[0][0]),O=(y-D*(h[1][0]+h[0][0]))/2,E=-D*h[0][1];d.scale(150*D).translate([O,E])},u)}function It(d,n,u){return Be(d,function(h){var y=+n,D=y/(h[1][1]-h[0][1]),O=-D*h[0][0],E=(y-D*(h[1][1]+h[0][1]))/2;d.scale(150*D).translate([O,E])},u)}var Lt=16,mt=U(30*W);function Je(d,n){return+n?function et(d,n){function u(h,y,D,O,E,V,Z,Y,se,Q,le,de,ve,Me){var Oe=Z-h,je=Y-y,Ce=Oe*Oe+je*je;if(Ce>4*n&&ve--){var Ye=O+Q,Ke=E+le,$e=V+de,At=Qe(Ye*Ye+Ke*Ke+$e*$e),_t=Ue($e/=At),yt=N(N($e)-1)<B||N(D-se)<B?(D+se)/2:Se(Ke,Ye),Rt=d(yt,_t),tt=Rt[0],li=Rt[1],Xt=tt-h,Ot=li-y,ke=je*Xt-Oe*Ot;(ke*ke/Ce>n||N((Oe*Xt+je*Ot)/Ce-.5)>.3||O*Q+E*le+V*de<mt)&&(u(h,y,D,O,E,V,tt,li,yt,Ye/=At,Ke/=At,$e,ve,Me),Me.point(tt,li),u(tt,li,yt,Ye,Ke,$e,Z,Y,se,Q,le,de,ve,Me))}}return function(h){var y,D,O,E,V,Z,Y,se,Q,le,de,ve,Me={point:Oe,lineStart:je,lineEnd:Ye,polygonStart:function(){h.polygonStart(),Me.lineStart=Ke},polygonEnd:function(){h.polygonEnd(),Me.lineStart=je}};function Oe(_t,yt){_t=d(_t,yt),h.point(_t[0],_t[1])}function je(){se=NaN,Me.point=Ce,h.lineStart()}function Ce(_t,yt){var Rt=gi([_t,yt]),tt=d(_t,yt);u(se,Q,Y,le,de,ve,se=tt[0],Q=tt[1],Y=_t,le=Rt[0],de=Rt[1],ve=Rt[2],Lt,h),h.point(se,Q)}function Ye(){Me.point=Oe,h.lineEnd()}function Ke(){je(),Me.point=$e,Me.lineEnd=At}function $e(_t,yt){Ce(y=_t,yt),D=se,O=Q,E=le,V=de,Z=ve,Me.point=Ce}function At(){u(se,Q,Y,le,de,ve,D,O,y,E,V,Z,Lt,h),Me.lineEnd=Ye,Ye()}return Me}}(d,n):function nt(d){return ae({point:function(n,u){n=d(n,u),this.stream.point(n[0],n[1])}})}(d)}var Oi=ae({point:function(d,n){this.stream.point(d*W,n*W)}});function Pt(d,n,u,h,y,D){if(!D)return function xi(d,n,u,h,y){function D(O,E){return[n+d*(O*=h),u-d*(E*=y)]}return D.invert=function(O,E){return[(O-n)/d*h,(u-E)/d*y]},D}(d,n,u,h,y);var O=U(D),E=Le(D),V=O*d,Z=E*d,Y=O/d,se=E/d,Q=(E*u-O*n)/d,le=(E*n+O*u)/d;function de(ve,Me){return[V*(ve*=h)-Z*(Me*=y)+n,u-Z*ve-V*Me]}return de.invert=function(ve,Me){return[h*(Y*ve-se*Me+Q),y*(le-se*ve-Y*Me)]},de}function Qt(d){return ki(function(){return d})()}function ki(d){var n,Y,Oe,je,Ce,$e,At,_t,yt,Rt,u=150,h=480,y=250,D=0,O=0,E=0,V=0,Z=0,se=0,Q=1,le=1,de=null,ve=i,Me=null,Ye=te,Ke=.5;function tt(ke){return _t(ke[0]*W,ke[1]*W)}function li(ke){return(ke=_t.invert(ke[0],ke[1]))&&[ke[0]*M,ke[1]*M]}function Xt(){var ke=Pt(u,0,0,Q,le,se).apply(null,n(D,O)),ct=Pt(u,h-ke[0],y-ke[1],Q,le,se);return Y=Wi(E,V,Z),At=Zt(n,ct),_t=Zt(Y,At),$e=Je(At,Ke),Ot()}function Ot(){return yt=Rt=null,tt}return tt.stream=function(ke){return yt&&Rt===ke?yt:yt=Oi(function ei(d){return ae({point:function(n,u){var h=d(n,u);return this.stream.point(h[0],h[1])}})}(Y)(ve($e(Ye(Rt=ke)))))},tt.preclip=function(ke){return arguments.length?(ve=ke,de=void 0,Ot()):ve},tt.postclip=function(ke){return arguments.length?(Ye=ke,Me=Oe=je=Ce=null,Ot()):Ye},tt.clipAngle=function(ke){return arguments.length?(ve=+ke?function T(d){var n=U(d),u=6*W,h=n>0,y=N(n)>B;function O(Y,se){return U(Y)*U(se)>n}function V(Y,se,Q){var ve=[1,0,0],Me=Ci(gi(Y),gi(se)),Oe=Mi(Me,Me),je=Me[0],Ce=Oe-je*je;if(!Ce)return!Q&&Y;var Ye=n*Oe/Ce,Ke=-n*je/Ce,$e=Ci(ve,Me),At=Ki(ve,Ye);ls(At,Ki(Me,Ke));var yt=$e,Rt=Mi(At,yt),tt=Mi(yt,yt),li=Rt*Rt-tt*(Mi(At,At)-1);if(!(li<0)){var Xt=Qe(li),Ot=Ki(yt,(-Rt-Xt)/tt);if(ls(Ot,At),Ot=ji(Ot),!Q)return Ot;var Pi,ke=Y[0],ct=se[0],Jt=Y[1],ui=se[1];ct<ke&&(Pi=ke,ke=ct,ct=Pi);var qs=ct-ke,ss=N(qs-L)<B;if(!ss&&ui<Jt&&(Pi=Jt,Jt=ui,ui=Pi),ss||qs<B?ss?Jt+ui>0^Ot[1]<(N(Ot[0]-ke)<B?Jt:ui):Jt<=Ot[1]&&Ot[1]<=ui:qs>L^(ke<=Ot[0]&&Ot[0]<=ct)){var rs=Ki(yt,(-Rt+Xt)/tt);return ls(rs,At),[Ot,ji(rs)]}}}function Z(Y,se){var Q=h?d:L-d,le=0;return Y<-Q?le|=1:Y>Q&&(le|=2),se<-Q?le|=4:se>Q&&(le|=8),le}return Bi(O,function E(Y){var se,Q,le,de,ve;return{lineStart:function(){de=le=!1,ve=1},point:function(Me,Oe){var Ce,je=[Me,Oe],Ye=O(Me,Oe),Ke=h?Ye?0:Z(Me,Oe):Ye?Z(Me+(Me<0?L:-L),Oe):0;if(!se&&(de=le=Ye)&&Y.lineStart(),Ye!==le&&(!(Ce=V(se,je))||os(se,Ce)||os(je,Ce))&&(je[2]=1),Ye!==le)ve=0,Ye?(Y.lineStart(),Ce=V(je,se),Y.point(Ce[0],Ce[1])):(Ce=V(se,je),Y.point(Ce[0],Ce[1],2),Y.lineEnd()),se=Ce;else if(y&&se&&h^Ye){var $e;!(Ke&Q)&&($e=V(je,se,!0))&&(ve=0,h?(Y.lineStart(),Y.point($e[0][0],$e[0][1]),Y.point($e[1][0],$e[1][1]),Y.lineEnd()):(Y.point($e[1][0],$e[1][1]),Y.lineEnd(),Y.lineStart(),Y.point($e[0][0],$e[0][1],3)))}Ye&&(!se||!os(se,je))&&Y.point(je[0],je[1]),se=je,le=Ye,Q=Ke},lineEnd:function(){le&&Y.lineEnd(),se=null},clean:function(){return ve|(de&&le)<<1}}},function D(Y,se,Q,le){p(le,d,u,Q,Y,se)},h?[0,-d]:[-L,d-L])}(de=ke*W):(de=null,i),Ot()):de*M},tt.clipExtent=function(ke){return arguments.length?(Ye=null==ke?(Me=Oe=je=Ce=null,te):function ee(d,n,u,h){function y(Z,Y){return d<=Z&&Z<=u&&n<=Y&&Y<=h}function D(Z,Y,se,Q){var le=0,de=0;if(null==Z||(le=O(Z,se))!==(de=O(Y,se))||V(Z,Y)<0^se>0)do{Q.point(0===le||3===le?d:u,le>1?h:n)}while((le=(le+se+4)%4)!==de);else Q.point(Y[0],Y[1])}function O(Z,Y){return N(Z[0]-d)<B?Y>0?0:3:N(Z[0]-u)<B?Y>0?2:1:N(Z[1]-n)<B?Y>0?1:0:Y>0?3:2}function E(Z,Y){return V(Z.x,Y.x)}function V(Z,Y){var se=O(Z,1),Q=O(Y,1);return se!==Q?se-Q:0===se?Y[1]-Z[1]:1===se?Z[0]-Y[0]:2===se?Z[1]-Y[1]:Y[0]-Z[0]}return function(Z){var Q,le,de,ve,Me,Oe,je,Ce,Ye,Ke,$e,Y=Z,se=Zi(),At={point:_t,lineStart:function li(){At.point=Ot,le&&le.push(de=[]),Ke=!0,Ye=!1,je=Ce=NaN},lineEnd:function Xt(){Q&&(Ot(ve,Me),Oe&&Ye&&se.rejoin(),Q.push(se.result())),At.point=_t,Ye&&Y.lineEnd()},polygonStart:function Rt(){Y=se,Q=[],le=[],$e=!0},polygonEnd:function tt(){var ke=function yt(){for(var ke=0,ct=0,Jt=le.length;ct<Jt;++ct)for(var Os,rs,ui=le[ct],Pi=1,qs=ui.length,ss=ui[0],gr=ss[0],Fs=ss[1];Pi<qs;++Pi)Os=gr,rs=Fs,gr=(ss=ui[Pi])[0],Fs=ss[1],rs<=h?Fs>h&&(gr-Os)*(h-rs)>(Fs-rs)*(d-Os)&&++ke:Fs<=h&&(gr-Os)*(h-rs)<(Fs-rs)*(d-Os)&&--ke;return ke}(),ct=$e&&ke,Jt=(Q=Ls(Q)).length;(ct||Jt)&&(Z.polygonStart(),ct&&(Z.lineStart(),D(null,null,1,Z),Z.lineEnd()),Jt&&ws(Q,E,ke,D,Z),Z.polygonEnd()),Y=Z,Q=le=de=null}};function _t(ke,ct){y(ke,ct)&&Y.point(ke,ct)}function Ot(ke,ct){var Jt=y(ke,ct);if(le&&de.push([ke,ct]),Ke)ve=ke,Me=ct,Oe=Jt,Ke=!1,Jt&&(Y.lineStart(),Y.point(ke,ct));else if(Jt&&Ye)Y.point(ke,ct);else{var ui=[je=Math.max(K,Math.min(C,je)),Ce=Math.max(K,Math.min(C,Ce))],Pi=[ke=Math.max(K,Math.min(C,ke)),ct=Math.max(K,Math.min(C,ct))];!function x(d,n,u,h,y,D){var de,O=d[0],E=d[1],Y=0,se=1,Q=n[0]-O,le=n[1]-E;if(de=u-O,Q||!(de>0)){if(de/=Q,Q<0){if(de<Y)return;de<se&&(se=de)}else if(Q>0){if(de>se)return;de>Y&&(Y=de)}if(de=y-O,Q||!(de<0)){if(de/=Q,Q<0){if(de>se)return;de>Y&&(Y=de)}else if(Q>0){if(de<Y)return;de<se&&(se=de)}if(de=h-E,le||!(de>0)){if(de/=le,le<0){if(de<Y)return;de<se&&(se=de)}else if(le>0){if(de>se)return;de>Y&&(Y=de)}if(de=D-E,le||!(de<0)){if(de/=le,le<0){if(de>se)return;de>Y&&(Y=de)}else if(le>0){if(de<Y)return;de<se&&(se=de)}return Y>0&&(d[0]=O+Y*Q,d[1]=E+Y*le),se<1&&(n[0]=O+se*Q,n[1]=E+se*le),!0}}}}}(ui,Pi,d,n,u,h)?Jt&&(Y.lineStart(),Y.point(ke,ct),$e=!1):(Ye||(Y.lineStart(),Y.point(ui[0],ui[1])),Y.point(Pi[0],Pi[1]),Jt||Y.lineEnd(),$e=!1)}je=ke,Ce=ct,Ye=Jt}return At}}(Me=+ke[0][0],Oe=+ke[0][1],je=+ke[1][0],Ce=+ke[1][1]),Ot()):null==Me?null:[[Me,Oe],[je,Ce]]},tt.scale=function(ke){return arguments.length?(u=+ke,Xt()):u},tt.translate=function(ke){return arguments.length?(h=+ke[0],y=+ke[1],Xt()):[h,y]},tt.center=function(ke){return arguments.length?(D=ke[0]%360*W,O=ke[1]%360*W,Xt()):[D*M,O*M]},tt.rotate=function(ke){return arguments.length?(E=ke[0]%360*W,V=ke[1]%360*W,Z=ke.length>2?ke[2]%360*W:0,Xt()):[E*M,V*M,Z*M]},tt.angle=function(ke){return arguments.length?(se=ke%360*W,Xt()):se*M},tt.reflectX=function(ke){return arguments.length?(Q=ke?-1:1,Xt()):Q<0},tt.reflectY=function(ke){return arguments.length?(le=ke?-1:1,Xt()):le<0},tt.precision=function(ke){return arguments.length?($e=Je(At,Ke=ke*ke),Ot()):Qe(Ke)},tt.fitExtent=function(ke,ct){return qe(tt,ke,ct)},tt.fitSize=function(ke,ct){return rt(tt,ke,ct)},tt.fitWidth=function(ke,ct){return Bt(tt,ke,ct)},tt.fitHeight=function(ke,ct){return It(tt,ke,ct)},function(){return n=d.apply(this,arguments),tt.invert=n.invert&&li,Xt()}}function St(d,n){return[d,xt(gt((P+n)/2))]}function Es(){return function $i(d){var E,V,Z,n=Qt(d),u=n.center,h=n.scale,y=n.translate,D=n.clipExtent,O=null;function Y(){var se=L*h(),Q=n(function xs(d){function n(u){return(u=d(u[0]*W,u[1]*W))[0]*=M,u[1]*=M,u}return d=Wi(d[0]*W,d[1]*W,d.length>2?d[2]*W:0),n.invert=function(u){return(u=d.invert(u[0]*W,u[1]*W))[0]*=M,u[1]*=M,u},n}(n.rotate()).invert([0,0]));return D(null==O?[[Q[0]-se,Q[1]-se],[Q[0]+se,Q[1]+se]]:d===St?[[Math.max(Q[0]-se,O),E],[Math.min(Q[0]+se,V),Z]]:[[O,Math.max(Q[1]-se,E)],[V,Math.min(Q[1]+se,Z)]])}return n.scale=function(se){return arguments.length?(h(se),Y()):h()},n.translate=function(se){return arguments.length?(y(se),Y()):y()},n.center=function(se){return arguments.length?(u(se),Y()):u()},n.clipExtent=function(se){return arguments.length?(null==se?O=E=V=Z=null:(O=+se[0][0],E=+se[0][1],V=+se[1][0],Z=+se[1][1]),Y()):null==O?null:[[O,E],[V,Z]]},Y()}(St).scale(961/ue)}St.invert=function(d,n){return[d,2*be(Ge(n))-P]};var Rs=F(5770);class tr extends ks.Q{setupDefaultRules(){super.setupDefaultRules();const n=this._root.interfaceColors,u=this.rule.bind(this);u("MapChart").setAll({projection:Es(),panX:"translateX",panY:"translateY",pinchZoom:!0,zoomStep:2,zoomLevel:1,rotationX:0,rotationY:0,rotationZ:0,maxZoomLevel:32,minZoomLevel:1,wheelY:"zoom",wheelX:"none",animationEasing:Rs.out(Rs.cubic),wheelEasing:Rs.out(Rs.cubic),wheelDuration:0,wheelSensitivity:1,maxPanOut:.4,centerMapOnZoomOut:!0});{const h=u("MapLine");h.setAll({precision:.5,role:"figure"}),(0,ms.v)(h,"stroke",n,"grid")}u("MapPolygonSeries").setAll({affectsBounds:!0}),u("MapPointSeries").setAll({affectsBounds:!1,clipFront:!1,clipBack:!0,autoScale:!1}),u("MapLineSeries").setAll({affectsBounds:!1});{const h=u("MapPolygon");h.setAll({precision:.5,isMeasured:!1,role:"figure",fillOpacity:1,position:"absolute",strokeWidth:.2,strokeOpacity:1}),(0,ms.v)(h,"fill",n,"primaryButton"),(0,ms.v)(h,"stroke",n,"background")}u("Button",["zoomcontrol"]).setAll({marginTop:1,marginBottom:1}),u("Graphics",["map","button","plus","icon"]).setAll({x:R.CI,y:R.CI,draw:h=>{h.moveTo(-4,0),h.lineTo(4,0),h.moveTo(0,-4),h.lineTo(0,4)}}),u("Graphics",["map","button","minus","icon"]).setAll({x:R.CI,y:R.CI,draw:h=>{h.moveTo(-4,0),h.lineTo(4,0)}}),u("GraticuleSeries").setAll({step:10}),u("ZoomControl").setAll({x:R.AQ,centerX:R.AQ,y:R.AQ,centerY:R.AQ,paddingRight:10,paddingBottom:10})}}var sr,Ts,zs,us,ir=F(3704),pr=F(3605),Ys=new z,Xs=new z,Fi={point:Ie,lineStart:Ie,lineEnd:Ie,polygonStart:function(){Fi.lineStart=mr,Fi.lineEnd=Li},polygonEnd:function(){Fi.lineStart=Fi.lineEnd=Fi.point=Ie,Ys.add(N(Xs)),Xs=new z},result:function(){var d=Ys/2;return Ys=new z,d}};function mr(){Fi.point=br}function br(d,n){Fi.point=Ds,sr=zs=d,Ts=us=n}function Ds(d,n){Xs.add(us*d-zs*n),zs=d,us=n}function Li(){Ds(sr,Ts)}const Ms=Fi;var Ss,rr,wi,pi,hs=0,Gs=0,Yi=0,Ji=0,Is=0,qi=0,Vs=0,Us=0,Cs=0,mi={point:q,lineStart:t,lineEnd:l,polygonStart:function(){mi.lineStart=g,mi.lineEnd=f},polygonEnd:function(){mi.point=q,mi.lineStart=t,mi.lineEnd=l},result:function(){var d=Cs?[Vs/Cs,Us/Cs]:qi?[Ji/qi,Is/qi]:Yi?[hs/Yi,Gs/Yi]:[NaN,NaN];return hs=Gs=Yi=Ji=Is=qi=Vs=Us=Cs=0,d}};function q(d,n){hs+=d,Gs+=n,++Yi}function t(){mi.point=s}function s(d,n){mi.point=a,q(wi=d,pi=n)}function a(d,n){var u=d-wi,h=n-pi,y=Qe(u*u+h*h);Ji+=y*(wi+d)/2,Is+=y*(pi+n)/2,qi+=y,q(wi=d,pi=n)}function l(){mi.point=q}function g(){mi.point=b}function f(){I(Ss,rr)}function b(d,n){mi.point=I,q(Ss=wi=d,rr=pi=n)}function I(d,n){var u=d-wi,h=n-pi,y=Qe(u*u+h*h);Ji+=y*(wi+d)/2,Is+=y*(pi+n)/2,qi+=y,Vs+=(y=pi*d-wi*n)*(wi+d),Us+=y*(pi+n),Cs+=3*y,q(wi=d,pi=n)}const k=mi;function re(d){this._context=d}re.prototype={_radius:4.5,pointRadius:function(d){return this._radius=d,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(d,n){switch(this._point){case 0:this._context.moveTo(d,n),this._point=1;break;case 1:this._context.lineTo(d,n);break;default:this._context.moveTo(d+this._radius,n),this._context.arc(d,n,this._radius,0,ue)}},result:Ie};var J,S,Te,A,Pe,j=new z,me={point:Ie,lineStart:function(){me.point=Ne},lineEnd:function(){J&&Ae(S,Te),me.point=Ie},polygonStart:function(){J=!0},polygonEnd:function(){J=null},result:function(){var d=+j;return j=new z,d}};function Ne(d,n){me.point=Ae,S=A=d,Te=Pe=n}function Ae(d,n){j.add(Qe((A-=d)*A+(Pe-=n)*Pe)),A=d,Pe=n}const De=me;let He,it,ft,vt;class Tt{constructor(n){this._append=null==n?ot:function bt(d){const n=Math.floor(d);if(!(n>=0))throw new RangeError(`invalid digits: ${d}`);if(n>15)return ot;if(n!==He){const u=10**n;He=n,it=function(y){let D=1;this._+=y[0];for(const O=y.length;D<O;++D)this._+=Math.round(arguments[D]*u)/u+y[D]}}return it}(n),this._radius=4.5,this._=""}pointRadius(n){return this._radius=+n,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(n,u){switch(this._point){case 0:this._append`M${n},${u}`,this._point=1;break;case 1:this._append`L${n},${u}`;break;default:if(this._append`M${n},${u}`,this._radius!==ft||this._append!==it){const h=this._radius,y=this._;this._="",this._append`m0,${h}a${h},${h} 0 1,1 0,${-2*h}a${h},${h} 0 1,1 0,${2*h}z`,ft=h,it=this._append,vt=this._,this._=y}this._+=vt}}result(){const n=this._;return this._="",n.length?n:null}}function ot(d){let n=1;this._+=d[0];for(const u=d.length;n<u;++n)this._+=arguments[n]+d[n]}var ai,ut,Et,Gt,Ut,si,Vt,ti,Xi,ri,es,js,Ns,Ht,Kt,$t,ze=F(796),at=F(5411),ht=F(9472),Ei={sphere:Ie,point:_r,lineStart:Cr,lineEnd:Sr,polygonStart:function(){Ei.lineStart=Zr,Ei.lineEnd=Qr},polygonEnd:function(){Ei.lineStart=Cr,Ei.lineEnd=Sr}};function _r(d,n){d*=W;var u=U(n*=W);Hs(u*U(d),u*Le(d),Le(n))}function Hs(d,n,u){++ai,Et+=(d-Et)/ai,Gt+=(n-Gt)/ai,Ut+=(u-Ut)/ai}function Cr(){Ei.point=Hr}function Hr(d,n){d*=W;var u=U(n*=W);Ht=u*U(d),Kt=u*Le(d),$t=Le(n),Ei.point=Wr,Hs(Ht,Kt,$t)}function Wr(d,n){d*=W;var u=U(n*=W),h=u*U(d),y=u*Le(d),D=Le(n),O=Se(Qe((O=Kt*D-$t*y)*O+(O=$t*h-Ht*D)*O+(O=Ht*y-Kt*h)*O),Ht*h+Kt*y+$t*D);ut+=O,si+=O*(Ht+(Ht=h)),Vt+=O*(Kt+(Kt=y)),ti+=O*($t+($t=D)),Hs(Ht,Kt,$t)}function Sr(){Ei.point=_r}function Zr(){Ei.point=Kr}function Qr(){Ar(js,Ns),Ei.point=_r}function Kr(d,n){js=d,Ns=n,d*=W,n*=W,Ei.point=Ar;var u=U(n);Ht=u*U(d),Kt=u*Le(d),$t=Le(n),Hs(Ht,Kt,$t)}function Ar(d,n){d*=W;var u=U(n*=W),h=u*U(d),y=u*Le(d),D=Le(n),O=Kt*D-$t*y,E=$t*h-Ht*D,V=Ht*y-Kt*h,Z=pe(O,E,V),Y=Ue(Z),se=Z&&-Y/Z;Xi.add(se*O),ri.add(se*E),es.add(se*V),ut+=Y,si+=Y*(Ht+(Ht=h)),Vt+=Y*(Kt+(Kt=y)),ti+=Y*($t+($t=D)),Hs(Ht,Kt,$t)}var Or,kr,yr,vr,xr,nr=new z,ar=new z,zi={point:Ie,lineStart:Ie,lineEnd:Ie,polygonStart:function(){nr=new z,zi.lineStart=Jr,zi.lineEnd=qr},polygonEnd:function(){var d=+nr;ar.add(d<0?ue+d:d),this.lineStart=this.lineEnd=this.point=Ie},sphere:function(){ar.add(ue)}};function Jr(){zi.point=en}function qr(){Lr(Or,kr)}function en(d,n){zi.point=Lr,Or=d,kr=n,yr=d*=W,vr=U(n=(n*=W)/2+H),xr=Le(n)}function Lr(d,n){var u=(d*=W)-yr,h=u>=0?1:-1,y=h*u,D=U(n=(n*=W)/2+H),O=Le(n),E=xr*O,V=vr*D+E*U(y),Z=E*h*Le(y);nr.add(Se(Z,V)),yr=d,vr=D,xr=O}function Er(d){return ar=new z,Wt(d,zi),2*ar}var jt,oi,Ft,bi,As,Rr,Ir,Bs,Ws,cs,ts,is={point:wr,lineStart:Nr,lineEnd:Br,polygonStart:function(){is.point=Fr,is.lineStart=tn,is.lineEnd=sn,Ws=new z,zi.polygonStart()},polygonEnd:function(){zi.polygonEnd(),is.point=wr,is.lineStart=Nr,is.lineEnd=Br,nr<0?(jt=-(Ft=180),oi=-(bi=90)):Ws>B?bi=90:Ws<-B&&(oi=-90),ts[0]=jt,ts[1]=Ft},sphere:function(){jt=-(Ft=180),oi=-(bi=90)}};function wr(d,n){cs.push(ts=[jt=d,Ft=d]),n<oi&&(oi=n),n>bi&&(bi=n)}function jr(d,n){var u=gi([d*W,n*W]);if(Bs){var h=Ci(Bs,u),D=Ci([h[1],-h[0],0],h);Si(D),D=ji(D);var Z,O=d-As,E=O>0?1:-1,V=D[0]*M*E,Y=N(O)>180;Y^(E*As<V&&V<E*d)?(Z=D[1]*M)>bi&&(bi=Z):Y^(E*As<(V=(V+360)%360-180)&&V<E*d)?(Z=-D[1]*M)<oi&&(oi=Z):(n<oi&&(oi=n),n>bi&&(bi=n)),Y?d<As?_i(jt,d)>_i(jt,Ft)&&(Ft=d):_i(d,Ft)>_i(jt,Ft)&&(jt=d):Ft>=jt?(d<jt&&(jt=d),d>Ft&&(Ft=d)):d>As?_i(jt,d)>_i(jt,Ft)&&(Ft=d):_i(d,Ft)>_i(jt,Ft)&&(jt=d)}else cs.push(ts=[jt=d,Ft=d]);n<oi&&(oi=n),n>bi&&(bi=n),Bs=u,As=d}function Nr(){is.point=jr}function Br(){ts[0]=jt,ts[1]=Ft,is.point=wr,Bs=null}function Fr(d,n){if(Bs){var u=d-As;Ws.add(N(u)>180?u+(u>0?360:-360):u)}else Rr=d,Ir=n;zi.point(d,n),jr(d,n)}function tn(){zi.lineStart()}function sn(){Fr(Rr,Ir),zi.lineEnd(),N(Ws)>B&&(jt=-(Ft=180)),ts[0]=jt,ts[1]=Ft,Bs=null}function _i(d,n){return(n-=d)<0?n+360:n}function rn(d,n){return d[0]-n[0]}function Yr(d,n){return d[0]<=d[1]?d[0]<=n&&n<=d[1]:n<d[0]||d[1]<n}function an(d,n){return function w(){var h,y,d=m([0,0]),n=m(90),u=m(6),D={point:function O(V,Z){h.push(V=y(V,Z)),V[0]*=M,V[1]*=M}};function E(){var V=d.apply(this,arguments),Z=n.apply(this,arguments)*W,Y=u.apply(this,arguments)*W;return h=[],y=Wi(-V[0]*W,-V[1]*W,0).invert,p(D,Z,Y,1),V={type:"Polygon",coordinates:[h]},h=y=null,V}return E.center=function(V){return arguments.length?(d="function"==typeof V?V:m([+V[0],+V[1]]),E):d},E.radius=function(V){return arguments.length?(n="function"==typeof V?V:m(+V),E):n},E.precision=function(V){return arguments.length?(u="function"==typeof V?V:m(+V),E):u},E}().center([d.longitude,d.latitude]).radius(n)()}function or(d){const n=function $r(d){ai=ut=Et=Gt=Ut=si=Vt=ti=0,Xi=new z,ri=new z,es=new z,Wt(d,Ei);var n=+Xi,u=+ri,h=+es,y=pe(n,u,h);return y<ne&&(n=si,u=Vt,h=ti,ut<B&&(n=Et,u=Gt,h=Ut),(y=pe(n,u,h))<ne)?[NaN,NaN]:[Se(u,n)*M,Ue(h/y)*M]}(d);return{longitude:n[0],latitude:n[1]}}function on(d){return Er(d)}function lr(d){const n=function nn(d){var n,u,h,y,D,O,E;if(bi=Ft=-(jt=oi=1/0),cs=[],Wt(d,is),u=cs.length){for(cs.sort(rn),n=1,D=[h=cs[0]];n<u;++n)Yr(h,(y=cs[n])[0])||Yr(h,y[1])?(_i(h[0],y[1])>_i(h[0],h[1])&&(h[1]=y[1]),_i(y[0],h[1])>_i(h[0],h[1])&&(h[0]=y[0])):D.push(h=y);for(O=-1/0,n=0,h=D[u=D.length-1];n<=u;h=y,++n)(E=_i(h[1],(y=D[n])[0]))>O&&(O=E,jt=y[0],Ft=h[1])}return cs=ts=null,jt===1/0||oi===1/0?[[NaN,NaN],[NaN,NaN]]:[[jt,oi],[Ft,bi]]}(d);if(n){const u={left:n[0][0],right:n[1][0],top:n[1][1],bottom:n[0][1]};return u.right<u.left&&(u.right=180,u.left=-180),u}return{left:0,right:0,top:0,bottom:0}}function ln(d,n,u,h){let y=[];h<=-180&&(h=-179.9999),u<=-90&&(u=-89.9999),d>=90&&(d=89.9999),n>=180&&(n=179.9999);let D=Math.min(90,(n-h)/Math.ceil((n-h)/90)),O=(d-u)/Math.ceil((d-u)/90);for(let E=h;E<n;E+=D){let V=[];y.push([V]),E+D>n&&(D=n-E);for(let Z=E;Z<=E+D;Z+=5)V.push([Z,d]);for(let Z=d;Z>=u;Z-=O)V.push([E+D,Z]);for(let Z=E+D;Z>=E;Z-=5)V.push([Z,u]);for(let Z=u;Z<=d;Z+=O)V.push([E,Z])}return{type:"MultiPolygon",coordinates:y}}function un(d){let n=Pr(d.longitude),u=Math.asin(Math.sin(d.latitude*ht.RADIANS))*ht.DEGREES,h=Pr(d.latitude);return Math.abs(h)>90&&(n=Pr(n+180)),d.longitude=n,d.latitude=u,d}function Pr(d){return(d%=360)>180&&(d-=360),d<-180&&(d+=360),d}var Tr=F(8261);class ur extends ir.j{constructor(){super(...arguments),Object.defineProperty(this,"_downTranslateX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downTranslateY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downRotationX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downRotationY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downRotationZ",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pLat",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_pLon",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_movePoints",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_downZoomLevel",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_doubleDownDistance",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_dirtyGeometries",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_geometryColection",{enumerable:!0,configurable:!0,writable:!0,value:{type:"GeometryCollection",geometries:[]}}),Object.defineProperty(this,"_centerLocation",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_za",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rxa",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rya",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_txa",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tya",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_mapBounds",{enumerable:!0,configurable:!0,writable:!0,value:[[0,0],[0,0]]}),Object.defineProperty(this,"_geoCentroid",{enumerable:!0,configurable:!0,writable:!0,value:{longitude:0,latitude:0}}),Object.defineProperty(this,"_geoBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_prevGeoBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_dispatchBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_wheelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_ph",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_mapFitted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_centerX",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_centerY",{enumerable:!0,configurable:!0,writable:!0,value:0})}_makeGeoPath(){const n=this.get("projection"),u=function Dt(d,n){let y,D,u=3,h=4.5;function O(E){return E&&("function"==typeof h&&D.pointRadius(+h.apply(this,arguments)),Wt(E,y(D))),D.result()}return O.area=function(E){return Wt(E,y(Ms)),Ms.result()},O.measure=function(E){return Wt(E,y(De)),De.result()},O.bounds=function(E){return Wt(E,y(st)),st.result()},O.centroid=function(E){return Wt(E,y(k)),k.result()},O.projection=function(E){return arguments.length?(y=null==E?(d=null,te):(d=E).stream,O):d},O.context=function(E){return arguments.length?(D=null==E?(n=null,new Tt(u)):new re(n=E),"function"!=typeof h&&D.pointRadius(h),O):n},O.pointRadius=function(E){return arguments.length?(h="function"==typeof E?E:(D.pointRadius(+E),+E),O):h},O.digits=function(E){if(!arguments.length)return u;if(null==E)u=null;else{const V=Math.floor(E);if(!(V>=0))throw new RangeError(`invalid digits: ${E}`);u=V}return null===n&&(D=new Tt(u)),O},O.projection(d).digits(u).context(n)}();u.projection(n),this.setPrivateRaw("geoPath",u)}geoPoint(){return this.invert(this.seriesContainer.toGlobal({x:this.width()/2,y:this.height()/2}))}geoCentroid(){return this._geoCentroid}geoBounds(){return this._geoBounds}_handleSetWheel(){const n=this.get("wheelX"),u=this.get("wheelY"),h=this.chartContainer;"none"!=n||"none"!=u?(this._wheelDp&&this._wheelDp.dispose(),this._wheelDp=h.events.on("wheel",y=>{const D=this.get("wheelEasing"),O=this.get("wheelSensitivity",1),E=this.get("wheelDuration",0),V=y.originalEvent;if(!Tr.isLocalEvent(V,this))return;V.preventDefault();const Z=h._display.toLocal(y.point);"zoom"==u?this._handleWheelZoom(V.deltaY,Z):"rotateY"==u?this._handleWheelRotateY(V.deltaY/5*O,E,D):"rotateX"==u&&this._handleWheelRotateX(V.deltaY/5*O,E,D),"zoom"==n?this._handleWheelZoom(V.deltaX,Z):"rotateY"==n?this._handleWheelRotateY(V.deltaX/5*O,E,D):"rotateX"==n&&this._handleWheelRotateX(V.deltaX/5*O,E,D)}),this._disposers.push(this._wheelDp)):this._wheelDp&&this._wheelDp.dispose()}_prepareChildren(){super._prepareChildren();const n=this.get("projection"),u=this.innerWidth(),h=this.innerHeight(),y=this._geometryColection.geometries;if(this.isDirty("projection")){this._makeGeoPath(),this.markDirtyProjection(),this._fitMap(),n.scale(this.getPrivate("mapScale")*this.get("zoomLevel",1)),n.rotate&&n.rotate([this.get("rotationX",0),this.get("rotationY",0),this.get("rotationZ",0)]);let D=this._prevSettings.projection;if(D&&D!=n){let O=u/2,E=h/2;if(D.invert){let V=D.invert([O,E]);if(V){let Z=n(V);if(Z){let Y=n.translate(),se=O-(Z[0]-Y[0]),Q=E-(Z[1]-Y[1]);n.translate([se,Q]),this.setRaw("translateX",se),this.setRaw("translateY",Q)}}}}}if((this.isDirty("wheelX")||this.isDirty("wheelY"))&&this._handleSetWheel(),this._dirtyGeometries&&(this._geometryColection.geometries=[],this.series.each(D=>{G.pushAll(this._geometryColection.geometries,D._geometries)}),this._fitMap()),0!=y.length&&(u!=this._pw||h!=this._ph||this._dirtyGeometries)&&u>0&&h>0){let D=u/2,O=h/2;n.fitSize([u,h],this._geometryColection);const E=n.scale();if(this.setPrivateRaw("mapScale",E),n.scale(E*this.get("zoomLevel",1)),this._centerLocation){let Z=n(this._centerLocation);if(Z){let Y=n.translate(),se=D-(Z[0]-Y[0]),Q=O-(Z[1]-Y[1]);n.translate([se,Q]),this.setRaw("translateX",se),this.setRaw("translateY",Q),this._centerX=Y[0],this._centerY=Y[1]}}this.markDirtyProjection();const V=this.getPrivate("geoPath");this._mapBounds=V.bounds(this._geometryColection)}if(this._pw=u,this._ph=h,this.isDirty("zoomControl")){const D=this._prevSettings.zoomControl,O=this.get("zoomControl");O!==D&&(this._disposeProperty("zoomControl"),D&&D.dispose(),O&&(O.setPrivate("chart",this),this.children.push(O)),this.setRaw("zoomControl",O))}this.isDirty("zoomLevel")&&(n.scale(this.getPrivate("mapScale")*this.get("zoomLevel",1)),this.markDirtyProjection(),this.series.each(D=>{D.isType("MapPointSeries")&&D.get("autoScale")&&G.each(D.dataItems,O=>{const E=O.bullets;E&&G.each(E,V=>{const Z=V.get("sprite");Z&&Z.set("scale",this.get("zoomLevel"))})})})),(this.isDirty("translateX")||this.isDirty("translateY"))&&(n.translate([this.get("translateX",this.width()/2),this.get("translateY",this.height()/2)]),this.markDirtyProjection()),n.rotate&&(this.isDirty("rotationX")||this.isDirty("rotationY")||this.isDirty("rotationZ"))&&(n.rotate([this.get("rotationX",0),this.get("rotationY",0),this.get("rotationZ",0)]),this.markDirtyProjection()),(this.isDirty("pinchZoom")||this.get("panX")||this.get("panY"))&&this._setUpTouch()}_fitMap(){const n=this.get("projection");let u=this.innerWidth(),h=this.innerHeight();if(u>0&&h>0){n.fitSize([u,h],this._geometryColection),this.setPrivateRaw("mapScale",n.scale());const y=n.translate();this.setRaw("translateX",y[0]),this.setRaw("translateY",y[1]),this._centerX=y[0],this._centerY=y[1];const D=this.getPrivate("geoPath");this._mapBounds=D.bounds(this._geometryColection),this._geoCentroid=or(this._geometryColection);const O=lr(this._geometryColection);if(this._geoBounds=O,this._geometryColection.geometries.length>0){O.left=ht.round(this._geoBounds.left,3),O.right=ht.round(this._geoBounds.right,3),O.top=ht.round(this._geoBounds.top,3),O.bottom=ht.round(this._geoBounds.bottom,3);const E=this._prevGeoBounds;E&&!Tr.sameBounds(O,E)&&(this._dispatchBounds=!0,this._prevGeoBounds=O)}this._mapFitted=!0}}homeGeoPoint(){let n=this.get("homeGeoPoint");if(!n){const h=this.getPrivate("geoPath").bounds(this._geometryColection),y=h[0][0],D=h[0][1];n=this.invert({x:y+(h[1][0]-y)/2,y:D+(h[1][1]-D)/2})}return n}goHome(n){this.zoomToGeoPoint(this.homeGeoPoint(),this.get("homeZoomLevel",1),!0,n,this.get("homeRotationX"),this.get("homeRotationY"))}_updateChildren(){const n=this.get("projection");if(n.invert){let u=this.innerWidth(),h=this.innerHeight();u>0&&h>0&&(this._centerLocation=n.invert([this.innerWidth()/2,this.innerHeight()/2]))}super._updateChildren()}_afterChanged(){if(super._afterChanged(),this._dispatchBounds){this._dispatchBounds=!1;const n="geoboundschanged";this.events.isEnabled(n)&&this.events.dispatch(n,{type:n,target:this})}}_setUpTouch(){this.chartContainer._display.cancelTouch||(this.chartContainer._display.cancelTouch=!!(this.get("pinchZoom")||this.get("panX")||this.get("panY")))}markDirtyGeometries(){this._dirtyGeometries=!0,this.markDirty()}markDirtyProjection(){this.series.each(n=>{n.markDirtyProjection()})}_afterNew(){this._defaultThemes.push(tr.new(this._root)),this._settings.themeTags=Tr.mergeTags(this._settings.themeTags,["map"]),this.children.push(this.bulletsContainer),super._afterNew(),this._makeGeoPath(),this.chartContainer.children.push(this.seriesContainer),null==this.get("translateX")&&this.set("translateX",this.width()/2),null==this.get("translateY")&&this.set("translateY",this.height()/2),this.chartContainer.set("interactive",!0),this.chartContainer.set("interactiveChildren",!1),this.chartContainer.set("background",pr.A.new(this._root,{themeTags:["map","background"],fill:ze.Il.fromHex(0),fillOpacity:0})),this._disposers.push(this.chartContainer.events.on("pointerdown",u=>{this._handleChartDown(u)})),this._disposers.push(this.chartContainer.events.on("globalpointerup",u=>{this._handleChartUp(u)})),this._disposers.push(this.chartContainer.events.on("globalpointermove",u=>{this._handleChartMove(u)}));let n=!1;for(let u=0;u<at.i_.licenses.length;u++)at.i_.licenses[u].match(/^AM5M.{5,}/i)&&(n=!0);n||this._root._showBranding(),this._setUpTouch()}_handleChartDown(n){this._downZoomLevel=this.get("zoomLevel",1);let u=xe.keys(this.chartContainer._downPoints).length;if(1==u){const h=this.chartContainer._downPoints[1];h&&h.x==n.point.x&&h.y==n.point.y&&(u=0)}if(u>0){this._downTranslateX=this.get("translateX"),this._downTranslateY=this.get("translateY"),this._downRotationX=this.get("rotationX"),this._downRotationY=this.get("rotationY"),this._downRotationZ=this.get("rotationZ");const h=this.chartContainer._getDownPointId();if(h){let y=this._movePoints[h];y&&(this.chartContainer._downPoints[h]=y)}}else if(0==u){let h=this.chartContainer.get("background");if(h&&h.events.enableType("click"),this.get("panX")||this.get("panY")){this._za&&this._za.stop(),this._txa&&this._txa.stop(),this._tya&&this._tya.stop(),this._rxa&&this._rxa.stop(),this._rya&&this._rya.stop();const y=this.chartContainer._display.toLocal(n.point);this._downTranslateX=this.get("translateX"),this._downTranslateY=this.get("translateY"),this._downRotationX=this.get("rotationX"),this._downRotationY=this.get("rotationY"),this._downRotationZ=this.get("rotationZ");let D=this.get("projection");if(D.invert){let O=D.invert([y.x,y.y]),E=D.invert([y.x+1,y.y+1]);O&&E&&(this._pLon=Math.abs(E[0]-O[0]),this._pLat=Math.abs(E[1]-O[1]))}}}}invert(n){let u=this.get("projection");if(u.invert){const h=u.invert([n.x,n.y]);if(h)return{longitude:h[0],latitude:h[1]}}return{longitude:0,latitude:0}}convert(n,u,h){let D,y=this.get("projection");if(y.rotate||(u=void 0,h=void 0),null!=u||null!=h){null==u&&(u=0),null==h&&(h=0);let O=y.rotate();y.rotate([u,h,0]),D=y([n.longitude,n.latitude]),y.rotate(O)}else D=y([n.longitude,n.latitude]);return D?{x:D[0],y:D[1]}:{x:0,y:0}}_handleChartUp(n){this.chartContainer._downPoints={}}_handlePinch(){const n=this.chartContainer;let u=0,h=[],y=[];if(xe.each(n._downPoints,(D,O)=>{h[u]=O;let E=this._movePoints[D];E&&(y[u]=E),u++}),h.length>1&&y.length>1){const D=n._display;let O=h[0],E=h[1],V=y[0],Z=y[1];if(O&&E&&V&&Z){O=D.toLocal(O),E=D.toLocal(E),V=D.toLocal(V),Z=D.toLocal(Z);let Y=Math.hypot(E.x-O.x,E.y-O.y),Q=Math.hypot(Z.x-V.x,Z.y-V.y)/Y*this._downZoomLevel;Q=ht.fitToRange(Q,this.get("minZoomLevel",1),this.get("maxZoomLevel",32));let le={x:V.x+(Z.x-V.x)/2,y:V.y+(Z.y-V.y)/2},de={x:O.x+(E.x-O.x)/2,y:O.y+(E.y-O.y)/2},Oe=this._downZoomLevel,je=le.x-(-(this._downTranslateX||0)+de.x)/Oe*Q,Ce=le.y-(-(this._downTranslateY||0)+de.y)/Oe*Q;this.set("zoomLevel",Q),this.set("translateX",je),this.set("translateY",Ce)}}}_handleChartMove(n){const u=this.chartContainer;let h=u._getDownPoint();const y=u._getDownPointId(),O=n.originalEvent.pointerId;if(this.get("pinchZoom")&&O&&(this._movePoints[O]=n.point,xe.keys(u._downPoints).length>1))this._handlePinch();else if((!y||!O||O==y)&&h){const E=this.get("panX"),V=this.get("panY");if("none"!=E||"none"!=V){const Z=u._display;let Y=Z.toLocal(n.point);h=Z.toLocal(h);let se=this._downTranslateX,Q=this._downTranslateY;if(Math.hypot(h.x-Y.x,h.y-Y.y)>5){let le=u.get("background");if(le&&le.events.disableType("click"),he.isNumber(se)&&he.isNumber(Q)){let de=this.get("projection");const ve=this.get("zoomLevel",1),Me=this.get("maxPanOut",.4),Oe=this._mapBounds,je=this.width(),Ce=this.height(),Ye=Oe[1][0]-Oe[0][0],Ke=Oe[1][1]-Oe[0][1];if("translateX"==E){se+=Y.x-h.x;const $e=je/2-(je/2-this._centerX)*ve;se=Math.min(se,$e+Ye*Me*ve),se=Math.max(se,$e-Ye*Me*ve)}if("translateY"==V){Q+=Y.y-h.y;const $e=Ce/2-(Ce/2-this._centerY)*ve;Q=Math.min(Q,$e+Ke*Me*ve),Q=Math.max(Q,$e-Ke*Me*ve)}if(this.set("translateX",se),this.set("translateY",Q),de.invert){let $e=de.invert([h.x,h.y]);location&&$e&&("rotateX"==E&&this.set("rotationX",this._downRotationX-(h.x-Y.x)*this._pLon),"rotateY"==V&&this.set("rotationY",this._downRotationY+(h.y-Y.y)*this._pLat))}}}}}}_handleWheelRotateY(n,u,h){this._rya=this.animate({key:"rotationY",to:this.get("rotationY",0)-n,duration:u,easing:h})}_handleWheelRotateX(n,u,h){this._rxa=this.animate({key:"rotationX",to:this.get("rotationX",0)-n,duration:u,easing:h})}_handleWheelZoom(n,u){let h=this.get("zoomStep",2),y=this.get("zoomLevel",1),D=y;n>0?D=y/h:n<0&&(D=y*h),D!=y&&this.zoomToPoint(u,D)}zoomToGeoBounds(n,u,h,y){n.right<n.left&&(n.right=180,n.left=-180);const O=this.getPrivate("geoPath").bounds(this._geometryColection);let E=this.convert({longitude:n.left,latitude:n.top},h,y),V=this.convert({longitude:n.right,latitude:n.bottom},h,y);E.y<O[0][1]&&(E.y=O[0][1]),V.y>O[1][1]&&(V.y=O[1][1]);let Z=this.get("zoomLevel",1),Y_left=E.x,Y_right=V.x,Y_top=E.y,Y_bottom=V.y,se=this.seriesContainer,Q=.9*Math.min(se.innerWidth()/(Y_right-Y_left)*Z,se.innerHeight()/(Y_bottom-Y_top)*Z),ve=this.invert({x:Y_left+(Y_right-Y_left)/2,y:Y_top+(Y_bottom-Y_top)/2});return(null!=h||null!=y)&&this.rotate(h,y),this.zoomToGeoPoint(ve,Q,!0,u)}zoomToPoint(n,u,h,y){u&&(u=ht.fitToRange(u,this.get("minZoomLevel",1),this.get("maxZoomLevel",32))),he.isNumber(y)||(y=this.get("animationDuration",0));const D=this.get("animationEasing"),O=this.get("zoomLevel",1);this.get("centerMapOnZoomOut")&&u==this.get("homeZoomLevel",1)&&(n=this.convert(this.homeGeoPoint()),h=!0);let E=n.x,V=n.y,Z=this.get("translateX",0),Y=this.get("translateY",0),se=E,Q=V;h&&(se=this.width()/2,Q=this.height()/2);let de=Q-(V-Y)/O*u;return this._txa=this.animate({key:"translateX",to:se-(E-Z)/O*u,duration:y,easing:D}),this._tya=this.animate({key:"translateY",to:de,duration:y,easing:D}),this._za=this.animate({key:"zoomLevel",to:u,duration:y,easing:D}),O!=u&&this._root.readerAlert(this._t("Zoom level changed to %1",this._root.locale,he.numberToString(u))),this._za}zoomToGeoPoint(n,u,h,y,D,O){let E=this.convert(n,D,O);if((null!=D||null!=O)&&this.rotate(D,O,y),E)return this.zoomToPoint(E,u,h,y)}rotate(n,u,h){if(this.get("projection").rotate){he.isNumber(h)||(h=this.get("animationDuration",0));const D=this.get("animationEasing");null!=n&&this.animate({key:"rotationX",to:n,duration:h,easing:D}),null!=u&&this.animate({key:"rotationY",to:u,duration:h,easing:D})}}zoomIn(){return this.zoomToPoint({x:this.width()/2,y:this.height()/2},this.get("zoomLevel",1)*this.get("zoomStep",2))}zoomOut(){return this.zoomToPoint({x:this.width()/2,y:this.height()/2},this.get("zoomLevel",1)/this.get("zoomStep",2))}_clearDirty(){super._clearDirty(),this._dirtyGeometries=!1,this._mapFitted=!1}getArea(n){const u=this.getPrivate("geoPath"),h=n.get("geometry");return h?u.area(h):0}}Object.defineProperty(ur,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapChart"}),Object.defineProperty(ur,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ir.j.classNames.concat([ur.className])});class hr extends _e{constructor(){super(...arguments),Object.defineProperty(this,"_types",{enumerable:!0,configurable:!0,writable:!0,value:["Point","MultiPoint"]}),Object.defineProperty(this,"_lineChangedDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this.fields.push("polygonId","lineId","longitude","latitude","fixed"),super._afterNew()}markDirtyProjection(){this.markDirty()}markDirtyValues(n){super.markDirtyValues(),n&&this._positionBullets(n)}processDataItem(n){super.processDataItem(n);let u=n.get("geometry");if(u){if("Point"==u.type){const h=u.coordinates;h&&(n.set("longitude",h[0]),n.set("latitude",h[1]))}else if("MultiPoint"==u.type){const h=u.coordinates;h&&h[0]&&(n.set("longitude",h[0][0]),n.set("latitude",h[0][1]))}}else u={type:"Point",coordinates:[n.get("longitude",0),n.get("latitude",0)]},n.set("geometry",u);this._addGeometry(u,this)}_makeBullets(n){n.bullets=[],this.bullets.each(u=>{const h=n.get("geometry");if(h)if("Point"==h.type)this._setBulletParent(this._makeBullet(n,u));else if(h.type="MultiPoint"){let y=0;G.each(h.coordinates,()=>{this._setBulletParent(this._makeBullet(n,u,y)),y++})}})}_setBulletParent(n){if(n){const u=n.get("sprite"),h=this.chart;if(u&&h){const y=u.dataItem;y&&(y.get("fixed")?u.parent!=h.bulletsContainer&&h.bulletsContainer.children.moveValue(u):u.parent!=this.bulletsContainer&&this.bulletsContainer.children.moveValue(u))}}}_positionBullet(n){const u=n.get("sprite");if(u){const h=u.dataItem;if(h&&h.get("fixed"))return;const y=h.get("latitude"),D=h.get("longitude"),O=h.get("lineDataItem"),E=h.get("fixed"),V=this.chart;let Z;if(O)Z=O.get("mapLine");else{const ve=h.get("lineId");ve&&V&&V.series.each(Me=>{if(Me.isType("MapLineSeries")){let Oe=Me.getDataItemById(ve);Oe&&(h.set("lineDataItem",Oe),Z=Oe.get("mapLine"))}})}this._lineChangedDp&&this._lineChangedDp.dispose(),Z&&(this._lineChangedDp=Z.events.on("linechanged",()=>{this._positionBullets(h)}));const Y=h.get("polygonDataItem");let se;if(Y)se=Y.get("mapPolygon");else{const ve=h.get("polygonId");ve&&V&&V.series.each(Me=>{if(Me.isType("MapPolygonSeries")){let Oe=Me.getDataItemById(ve);Oe&&(h.set("polygonDataItem",Oe),se=Oe.get("mapPolygon"))}})}const Q=h.get("positionOnLine");let le,de;if(se){let ve=se.visualCentroid();le=[ve.longitude,ve.latitude],h.setRaw("longitude",ve.longitude),h.setRaw("latitude",ve.latitude)}else if(Z&&he.isNumber(Q)){let ve=Z.positionToGeoPoint(Q);if(le=[ve.longitude,ve.latitude],h.get("autoRotate",n.get("autoRotate"))&&V){const Me=Z.positionToGeoPoint(Q-.002),Oe=Z.positionToGeoPoint(Q+.002),je=V.convert(Me),Ce=V.convert(Oe);de=ht.getAngle(je,Ce)}h.setRaw("longitude",ve.longitude),h.setRaw("latitude",ve.latitude)}else if(he.isNumber(D)&&he.isNumber(y))le=[D,y];else{const ve=h.get("geometry");ve&&("Point"==ve.type?this._positionBulletReal(n,ve,ve.coordinates,de):"MultiPoint"==ve.type&&(le=ve.coordinates[n._index||0]))}!E&&le&&this._positionBulletReal(n,{type:"Point",coordinates:le},le,de)}}_positionBulletReal(n,u,h,y){const D=n.get("sprite"),O=this.chart;if(O){const E=O.get("projection"),V=O.getPrivate("geoPath"),Z=D.dataItem,Y=E(h);Y&&D.setAll({x:Y[0],y:Y[1]});let se=!0;V(u)?this.get("clipFront")&&(se=!1):this.get("clipBack")&&(se=!1),D.setPrivate("visible",se),Z&&null!=y&&Z.get("autoRotate",n.get("autoRotate"))&&D.set("rotation",y+Z.get("autoRotateAngle",n.get("autoRotateAngle",0)))}}zoomToDataItem(n,u,h){const y=this.chart;if(y){const D=n.get("longitude",0),O=n.get("latitude",0);return h?y.zoomToGeoPoint({longitude:D,latitude:O},u,!0,void 0,-D,-O):y.zoomToGeoPoint({longitude:D,latitude:O},u,!0)}}disposeDataItem(n){const u=this.chart;u&&u.series.each(h=>{h.isType("MapLineSeries")&&G.each(h.dataItems,y=>{const D=y.get("pointsToConnect");D&&G.each(D,O=>{O==n&&(G.remove(D,O),h.markDirtyValues(y))})})}),super.disposeDataItem(n)}_excludeDataItem(n){super._excludeDataItem(n);const u=n.bullets;u&&G.each(u,h=>{const y=h.get("sprite");y&&y.setPrivate("visible",!1)})}_unexcludeDataItem(n){super._unexcludeDataItem(n);const u=n.bullets;u&&G.each(u,h=>{const y=h.get("sprite");y&&y.setPrivate("visible",!0)})}_notIncludeDataItem(n){super._notIncludeDataItem(n);const u=n.bullets;u&&G.each(u,h=>{const y=h.get("sprite");y&&y.setPrivate("visible",!1)})}_unNotIncludeDataItem(n){super._unNotIncludeDataItem(n);const u=n.bullets;u&&G.each(u,h=>{const y=h.get("sprite");y&&y.setPrivate("visible",!0)})}}Object.defineProperty(hr,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapPointSeries"}),Object.defineProperty(hr,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:_e.classNames.concat([hr.className])});var hn=F(1783),cn=F.n(hn);class Zs extends ce.T{constructor(){super(...arguments),Object.defineProperty(this,"_projectionDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"series",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_beforeChanged(){if(super._beforeChanged(),this._projectionDirty||this.isDirty("geometry")||this.isDirty("precision")){const n=this.get("geometry");if(n){const u=this.series;if(u){const h=u.projection();h&&h.precision(this.get("precision",.5));const y=u.geoPath();y&&(this._clear=!0,this.set("draw",D=>{y.context(this._display),y(n),y.context(null)}),this.isHover()&&this.showTooltip())}}}}markDirtyProjection(){this.markDirty(),this._projectionDirty=!0}_clearDirty(){super._clearDirty(),this._projectionDirty=!1}geoCentroid(){const n=this.get("geometry");return n?or(n):{latitude:0,longitude:0}}visualCentroid(){let n=0,u=[];const h=this.get("geometry");if(h){if("Polygon"==h.type)u=h.coordinates;else if("MultiPolygon"==h.type)for(let D=0;D<h.coordinates.length;D++){let O=h.coordinates[D],E=Er({type:"Polygon",coordinates:O});E>n&&(u=O,n=E)}let y=cn()(u);return{longitude:y[0],latitude:y[1]}}return{longitude:0,latitude:0}}_getTooltipPoint(){const n=this.series;if(n){const u=n.projection();if(u){const h=this.visualCentroid(),y=u([h.longitude,h.latitude]);if(y)return{x:y[0],y:y[1]}}}return{x:0,y:0}}}Object.defineProperty(Zs,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapPolygon"}),Object.defineProperty(Zs,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ce.T.classNames.concat([Zs.className])});class cr extends _e{constructor(){super(...arguments),Object.defineProperty(this,"mapPolygons",{enumerable:!0,configurable:!0,writable:!0,value:new Vi.o(kt.YS.new({}),()=>Zs._new(this._root,{},[this.mapPolygons.template]))}),Object.defineProperty(this,"_types",{enumerable:!0,configurable:!0,writable:!0,value:["Polygon","MultiPolygon"]})}makeMapPolygon(n){const u=this.children.push(this.mapPolygons.make());return u._setDataItem(n),this.mapPolygons.push(u),u}markDirtyProjection(){G.each(this.dataItems,n=>{let u=n.get("mapPolygon");u&&u.markDirtyProjection()})}_prepareChildren(){super._prepareChildren(),this.isDirty("fill")&&this.mapPolygons.template.set("fill",this.get("fill")),this.isDirty("stroke")&&this.mapPolygons.template.set("stroke",this.get("stroke"))}processDataItem(n){super.processDataItem(n);let u=n.get("mapPolygon");u||(u=this.makeMapPolygon(n)),n.set("mapPolygon",u);let h=n.get("geometry");if(h){if(this.get("reverseGeodata")&&h.coordinates)for(let D=0;D<h.coordinates.length;D++)if("MultiPolygon"==h.type)for(let O=0;O<h.coordinates[D].length;O++)h.coordinates[D][O].reverse();else h.coordinates[D].reverse();u.set("geometry",h)}u.series=this,this._addGeometry(n.get("geometry"),this)}disposeDataItem(n){super.disposeDataItem(n);const u=n.get("mapPolygon");u&&(this.mapPolygons.removeValue(u),u.dispose()),this._removeGeometry(n.get("geometry"))}_excludeDataItem(n){super._excludeDataItem(n);const u=n.get("mapPolygon");u&&u.setPrivate("visible",!1)}_unexcludeDataItem(n){super._unexcludeDataItem(n);const u=n.get("mapPolygon");u&&u.setPrivate("visible",!0)}_notIncludeDataItem(n){super._notIncludeDataItem(n);const u=n.get("mapPolygon");u&&u.setPrivate("visible",!1)}_unNotIncludeDataItem(n){super._unNotIncludeDataItem(n);const u=n.get("mapPolygon");u&&u.setPrivate("visible",!0)}markDirtyValues(n){if(super.markDirtyValues(),n){const u=n.get("mapPolygon");u&&u.set("geometry",n.get("geometry"))}}zoomToDataItem(n,u){const h=n.get("mapPolygon");if(h){const y=h.get("geometry"),D=this.chart;if(y&&D){if(u){const O=or(y);return D.rotate(-O.longitude,-O.latitude),D.zoomToGeoBounds(lr(y),void 0,-O.longitude,-O.latitude)}return D.zoomToGeoBounds(lr(y))}}}}Object.defineProperty(cr,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapPolygonSeries"}),Object.defineProperty(cr,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:_e.classNames.concat([cr.className])});var Xr=F(9239),zr=F(4618),dn=F(8362);class dr extends Xr.W{constructor(){super(...arguments),Object.defineProperty(this,"plusButton",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(zr.z.new(this._root,{width:36,height:36,themeTags:["plus"]}))}),Object.defineProperty(this,"minusButton",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(zr.z.new(this._root,{width:36,height:36,themeTags:["minus"]}))}),Object.defineProperty(this,"_disposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNew(),this.set("position","absolute"),this.set("layout",this._root.verticalLayout),this.set("themeTags",["zoomcontrol"]),this.plusButton.setAll({icon:ce.T.new(this._root,{themeTags:["icon"]}),layout:void 0}),this.minusButton.setAll({icon:ce.T.new(this._root,{themeTags:["icon"]}),layout:void 0})}_prepareChildren(){if(super._prepareChildren(),this.isPrivateDirty("chart")){const n=this.getPrivate("chart"),u=this._prevPrivateSettings.chart;n&&(this._disposer=new dn.FV([this.plusButton.events.on("click",()=>{n.zoomIn()}),this.minusButton.events.on("click",()=>{n.zoomOut()})])),u&&this._disposer&&this._disposer.dispose()}}}function Gr(d,n){return[U(n)*Le(d),Le(n)]}function gn(){return Qt(Gr).scale(249.5).clipAngle(90+B)}function Dr(d,n){return[d,n]}function pn(){return Qt(Dr).scale(152.63)}function _n(d,n){var u=Le(d),h=(u+Le(n))/2;if(N(h)<B)return function bn(d){var n=U(d);function u(h,y){return[h*n,Le(y)/n]}return u.invert=function(h,y){return[h/n,Ue(y*n)]},u}(d);var y=1+u*(2*h-u),D=Qe(y)/h;function O(E,V){var Z=Qe(y-2*h*Le(V))/h;return[Z*Le(E*=h),D-Z*U(E)]}return O.invert=function(E,V){var Z=D-V,Y=Se(E,N(Z))*dt(Z);return Z*h<0&&(Y-=L*dt(E)*dt(Z)),[Y/h,Ue((y-(E*E+Z*Z)*h*h)/(2*h))]},O}function Mr(){return function mn(d){var n=0,u=L/3,h=ki(d),y=h(n,u);return y.parallels=function(D){return arguments.length?h(n=D[0]*W,u=D[1]*W):[n*M,u*M]},y}(_n).scale(155.424).center([0,33.6442])}function xn(){var d,n,h,D,E,V,u=function yn(){return Mr().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}(),y=Mr().rotate([154,0]).center([-2,58.5]).parallels([55,65]),O=Mr().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Z={point:function(Q,le){V=[Q,le]}};function Y(Q){var le=Q[0],de=Q[1];return V=null,h.point(le,de),V||(D.point(le,de),V)||(E.point(le,de),V)}function se(){return d=n=null,Y}return Y.invert=function(Q){var le=u.scale(),de=u.translate(),ve=(Q[0]-de[0])/le,Me=(Q[1]-de[1])/le;return(Me>=.12&&Me<.234&&ve>=-.425&&ve<-.214?y:Me>=.166&&Me<.234&&ve>=-.214&&ve<-.115?O:u).invert(Q)},Y.stream=function(Q){return d&&n===Q?d:d=function vn(d){var n=d.length;return{point:function(u,h){for(var y=-1;++y<n;)d[y].point(u,h)},sphere:function(){for(var u=-1;++u<n;)d[u].sphere()},lineStart:function(){for(var u=-1;++u<n;)d[u].lineStart()},lineEnd:function(){for(var u=-1;++u<n;)d[u].lineEnd()},polygonStart:function(){for(var u=-1;++u<n;)d[u].polygonStart()},polygonEnd:function(){for(var u=-1;++u<n;)d[u].polygonEnd()}}}([u.stream(n=Q),y.stream(Q),O.stream(Q)])},Y.precision=function(Q){return arguments.length?(u.precision(Q),y.precision(Q),O.precision(Q),se()):u.precision()},Y.scale=function(Q){return arguments.length?(u.scale(Q),y.scale(.35*Q),O.scale(Q),Y.translate(u.translate())):u.scale()},Y.translate=function(Q){if(!arguments.length)return u.translate();var le=u.scale(),de=+Q[0],ve=+Q[1];return h=u.translate(Q).clipExtent([[de-.455*le,ve-.238*le],[de+.455*le,ve+.238*le]]).stream(Z),D=y.translate([de-.307*le,ve+.201*le]).clipExtent([[de-.425*le+B,ve+.12*le+B],[de-.214*le-B,ve+.234*le-B]]).stream(Z),E=O.translate([de-.205*le,ve+.212*le]).clipExtent([[de-.214*le+B,ve+.166*le+B],[de-.115*le-B,ve+.234*le-B]]).stream(Z),se()},Y.fitExtent=function(Q,le){return qe(Y,Q,le)},Y.fitSize=function(Q,le){return rt(Y,Q,le)},Y.fitWidth=function(Q,le){return Bt(Y,Q,le)},Y.fitHeight=function(Q,le){return It(Y,Q,le)},Y.scale(1070)}Object.defineProperty(dr,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ZoomControl"}),Object.defineProperty(dr,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Xr.W.classNames.concat([dr.className])}),Gr.invert=function fn(d){return function(n,u){var h=Qe(n*n+u*u),y=d(h),D=Le(y),O=U(y);return[Se(n*D,h*O),Ue(h&&u*D/h)]}}(Ue),Dr.invert=Dr;var Qs=1.340264,Ks=-.081106,$s=893e-6,Js=.003796,fr=Qe(3)/2;function Vr(d,n){var u=Ue(fr*Le(n)),h=u*u,y=h*h*h;return[d*U(u)/(fr*(Qs+3*Ks*h+y*(7*$s+9*Js*h))),u*(Qs+Ks*h+y*($s+Js*h))]}function Pn(){return Qt(Vr).scale(177.158)}function Ur(d,n){var u=n*n,h=u*u;return[d*(.8707-.131979*u+h*(h*(.003971*u-.001529*h)-.013791)),n*(1.007226+u*(.015085+h*(.028874*u-.044475-.005916*h)))]}function Tn(){return Qt(Ur).scale(175.295)}Vr.invert=function(d,n){for(var O,u=n,h=u*u,y=h*h*h,D=0;D<12&&(y=(h=(u-=O=(u*(Qs+Ks*h+y*($s+Js*h))-n)/(Qs+3*Ks*h+y*(7*$s+9*Js*h)))*u)*h*h,!(N(O)<ne));++D);return[fr*d*(Qs+3*Ks*h+y*(7*$s+9*Js*h))/U(u),Ue(Le(u)/fr)]},Ur.invert=function(d,n){var y,u=n,h=25;do{var D=u*u,O=D*D;u-=y=(u*(1.007226+D*(.015085+O*(.028874*D-.044475-.005916*O)))-n)/(1.007226+D*(.045255+O*(.259866*D-.311325-.005916*11*O)))}while(N(y)>B&&--h>0);return[d/(.8707+(D=u*u)*(D*(D*D*D*(.003971-.001529*D)-.013791)-.131979)),u]}},9673:(Mt,Xe,F)=>{F.r(Xe),F.d(Xe,{Axis:()=>gt,AxisBullet:()=>Wt,AxisLabel:()=>Ti,AxisLabelRadial:()=>Di,AxisRenderer:()=>di,AxisRendererX:()=>as,AxisRendererY:()=>vi,AxisTick:()=>Yt,BaseColumnSeries:()=>Qe,Candlestick:()=>fi,CandlestickSeries:()=>Ii,CategoryAxis:()=>Ue,CategoryDateAxis:()=>zt,ColumnSeries:()=>ni,DateAxis:()=>hi,DefaultTheme:()=>X,DurationAxis:()=>yi,GaplessDateAxis:()=>ci,Grid:()=>Re,LineSeries:()=>Zt,OHLC:()=>qt,OHLCSeries:()=>Vi,SmoothedXLineSeries:()=>Mi,SmoothedXYLineSeries:()=>Si,SmoothedYLineSeries:()=>Zi,StepLineSeries:()=>Bi,ValueAxis:()=>Ve,XYChart:()=>be,XYChartScrollbar:()=>U,XYCursor:()=>Ge,XYSeries:()=>dt});var Ee=F(5013),G=F(7039),xe=F(2661),_e=F(2231),he=F(1445),R=F(2743),ce=F(9472),z=F(8148),v=F(3559);class X extends Ee.Q{setupDefaultRules(){super.setupDefaultRules();const e=this._root.interfaceColors,i=this._root.language,r=this.rule.bind(this);r("XYChart").setAll({colors:xe.U.new(this._root,{}),paddingLeft:20,paddingRight:20,paddingTop:16,paddingBottom:16,panX:!1,panY:!1,wheelStep:.25,arrangeTooltips:!0,pinchZoomX:!1,pinchZoomY:!1}),r("XYSeries").setAll({legendLabelText:"{name}"}),r("XYChart",["scrollbar","chart"]).setAll({paddingBottom:0,paddingLeft:0,paddingTop:0,paddingRight:0,colors:xe.U.new(this._root,{saturation:0})});{const _=r("Graphics",["scrollbar","overlay"]);_.setAll({fillOpacity:.5}),(0,_e.v)(_,"fill",e,"background")}r("RoundedRectangle",["xy","scrollbar","thumb"]).setAll({cornerRadiusTR:0,cornerRadiusTL:0,cornerRadiusBR:0,cornerRadiusBL:0,fillOpacity:0,focusable:!0}),r("RoundedRectangle",["xy","scrollbar","thumb"]).states.create("hover",{fillOpacity:.4}),r("RoundedRectangle",["xy","scrollbar","chart","background"]).setAll({cornerRadiusTL:0,cornerRadiusBL:0,cornerRadiusTR:0,cornerRadiusBR:0}),r("RoundedRectangle",["xy","scrollbar","chart","background","resize","button"]).setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),r("AxisRendererX",["xy","chart","scrollbar"]).setAll({strokeOpacity:0,inside:!0}),r("AxisRendererY",["xy","chart","scrollbar"]).setAll({strokeOpacity:0,inside:!0,minGridDistance:5}),r("AxisLabel",["xy","scrollbar","x"]).setAll({opacity:.5,centerY:G.AQ,minPosition:.01,maxPosition:.99,fontSize:"0.8em"}),r("AxisLabel",["category"]).setAll({text:"{category}",populateText:!0}),r("AxisLabel",["x"]).setAll({centerY:0}),r("AxisLabel",["x","inside"]).setAll({centerY:G.AQ}),r("AxisLabel",["x","inside","opposite"]).setAll({centerY:0}),r("AxisLabel",["x","opposite"]).setAll({centerY:G.AQ}),r("AxisLabel",["y"]).setAll({centerX:G.AQ}),r("AxisLabel",["y","inside"]).setAll({centerX:0}),r("AxisLabel",["y","inside","opposite"]).setAll({centerX:G.AQ}),r("AxisLabel",["y","opposite"]).setAll({centerX:0}),r("AxisLabel",["xy","scrollbar","y"]).setAll({visible:!1}),r("Grid",["xy","scrollbar","y"]).setAll({visible:!1}),r("Grid",["xy","scrollbar","x"]).setAll({opacity:.5}),r("XYCursor").setAll({behavior:"none",layer:30,exportable:!1,snapToSeriesBy:"xy",moveThreshold:1});{const _=r("Grid",["cursor","x"]);_.setAll({strokeOpacity:.8,strokeDasharray:[2,2],ariaLabel:i.translate("Use left and right arrows to move selection")}),(0,_e.v)(_,"stroke",e,"alternativeBackground")}{const _=r("Grid",["cursor","y"]);_.setAll({strokeOpacity:.8,strokeDasharray:[2,2],ariaLabel:i.translate("Use up and down arrows to move selection")}),(0,_e.v)(_,"stroke",e,"alternativeBackground")}{const _=r("Graphics",["cursor","selection"]);_.setAll({fillOpacity:.15}),(0,_e.v)(_,"fill",e,"alternativeBackground")}r("Axis").setAll({start:0,end:1,minZoomCount:1,maxZoomCount:1/0,maxZoomFactor:1e3,maxDeviation:.1,snapTooltip:!0,tooltipLocation:.5,panX:!0,panY:!0,zoomX:!0,zoomY:!0,fixAxisSize:!0}),r("AxisLabel").setAll({location:.5,multiLocation:0,centerX:G.CI,centerY:G.CI,paddingTop:3,paddingBottom:3,paddingLeft:5,paddingRight:5}),r("Container",["axis","header"]).setAll({layer:30}),r("Rectangle",["axis","header","background"]).setAll({crisp:!0});{const _=r("AxisRenderer");_.setAll({crisp:!0,strokeOpacity:0}),(0,_e.v)(_,"stroke",e,"grid")}r("AxisRendererX").setAll({minGridDistance:120,opposite:!1,inversed:!1,cellStartLocation:0,cellEndLocation:1,width:G.AQ}),r("AxisRendererY").setAll({minGridDistance:40,opposite:!1,inversed:!1,cellStartLocation:0,cellEndLocation:1,height:G.AQ});{const _=r("Rectangle",["axis","thumb"]);_.setAll({fillOpacity:0}),(0,_e.v)(_,"fill",e,"alternativeBackground"),_.states.create("hover",{fillOpacity:.1})}r("Rectangle",["axis","thumb","x"]).setAll({cursorOverStyle:"ew-resize"}),r("Rectangle",["axis","thumb","y"]).setAll({cursorOverStyle:"ns-resize"});{const _=r("Grid");_.setAll({location:0,strokeOpacity:.15,crisp:!0}),(0,_e.v)(_,"stroke",e,"grid")}r("Grid",["base"]).setAll({strokeOpacity:.3});{const _=r("Graphics",["axis","fill"]);_.setAll({visible:!1,isMeasured:!1,position:"absolute",fillOpacity:.05}),(0,_e.v)(_,"fill",e,"alternativeBackground")}r("Graphics",["axis","fill","range"]).setAll({isMeasured:!0}),r("Graphics",["series","fill","range"]).setAll({visible:!1,isMeasured:!0}),r("Grid",["series","range"]).setAll({visible:!1}),r("AxisTick",["series","range"]).setAll({visible:!1}),r("AxisLabel",["series","range"]).setAll({visible:!1});{const _=r("AxisTick");_.setAll({location:.5,multiLocation:0,strokeOpacity:1,isMeasured:!1,position:"absolute",visible:!1}),(0,_e.v)(_,"stroke",e,"grid")}r("CategoryAxis").setAll({startLocation:0,endLocation:1,fillRule:(_,w)=>{const T=_.get("axisFill");T&&(R.isNumber(w)&&w%2!=0?T.setPrivate("visible",!1):T.setPrivate("visible",!0))}});const o=[{timeUnit:"millisecond",count:1},{timeUnit:"millisecond",count:5},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:50},{timeUnit:"millisecond",count:100},{timeUnit:"millisecond",count:500},{timeUnit:"second",count:1},{timeUnit:"second",count:5},{timeUnit:"second",count:10},{timeUnit:"second",count:30},{timeUnit:"minute",count:1},{timeUnit:"minute",count:5},{timeUnit:"minute",count:10},{timeUnit:"minute",count:15},{timeUnit:"minute",count:30},{timeUnit:"hour",count:1},{timeUnit:"hour",count:3},{timeUnit:"hour",count:6},{timeUnit:"hour",count:12},{timeUnit:"day",count:1},{timeUnit:"day",count:2},{timeUnit:"day",count:3},{timeUnit:"day",count:4},{timeUnit:"day",count:5},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"month",count:2},{timeUnit:"month",count:3},{timeUnit:"month",count:6},{timeUnit:"year",count:1},{timeUnit:"year",count:2},{timeUnit:"year",count:5},{timeUnit:"year",count:10},{timeUnit:"year",count:50},{timeUnit:"year",count:100},{timeUnit:"year",count:200},{timeUnit:"year",count:500},{timeUnit:"year",count:1e3},{timeUnit:"year",count:2e3},{timeUnit:"year",count:5e3},{timeUnit:"year",count:1e4},{timeUnit:"year",count:1e5}],c={millisecond:i.translate("_date_millisecond"),second:i.translate("_date_second"),minute:i.translate("_date_minute"),hour:i.translate("_date_hour"),day:i.translate("_date_day"),week:i.translate("_date_day"),month:i.translate("_date_month"),year:i.translate("_date_year")},m={millisecond:i.translate("_date_millisecond"),second:i.translate("_date_second"),minute:i.translate("_date_minute"),hour:i.translate("_date_day"),day:i.translate("_date_day"),week:i.translate("_date_day"),month:i.translate("_date_month")+" "+i.translate("_date_year"),year:i.translate("_date_year")},p={millisecond:i.translate("_date_millisecond_full"),second:i.translate("_date_second_full"),minute:i.translate("_date_minute_full"),hour:i.translate("_date_hour_full"),day:i.translate("_date_day_full"),week:i.translate("_date_week_full"),month:i.translate("_date_month_full"),year:i.translate("_date_year")};r("CategoryDateAxis").setAll({markUnitChange:!0,gridIntervals:v.copy(o),dateFormats:z.copy(c),periodChangeDateFormats:z.copy(m)}),r("DateAxis").setAll({maxZoomFactor:null,strictMinMax:!0,startLocation:0,endLocation:1,markUnitChange:!0,groupData:!1,groupCount:500,gridIntervals:v.copy(o),dateFormats:z.copy(c),periodChangeDateFormats:z.copy(m),tooltipDateFormats:p,groupIntervals:[{timeUnit:"millisecond",count:1},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:100},{timeUnit:"second",count:1},{timeUnit:"second",count:10},{timeUnit:"minute",count:1},{timeUnit:"minute",count:10},{timeUnit:"hour",count:1},{timeUnit:"day",count:1},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"year",count:1}],fillRule:_=>{const w=_.get("axisFill");if(w){const T=_.component,x=_.get("value"),C=_.get("endValue"),K=T.intervalDuration(),ee=T.getPrivate("baseInterval"),te=T.getPrivate("gridInterval",ee);let $=T.getPrivate("min",0);if($=he.round(new Date($),te.timeUnit,te.count,this._root.locale.firstDayOfWeek,this._root.utc,void 0,this._root.timezone).getTime(),null!=x&&null!=C){const ae=Math.round(Math.round((x-$)/K))/2;ae==Math.round(ae)?w.setPrivate("visible",!0):w.setPrivate("visible",!1)}}}}),r("GaplessDateAxis").setAll({fillRule:_=>{const w=_.get("axisFill");if(w){const T=_.get("index");let x=!1;(!R.isNumber(T)||T%2==0)&&(x=!0),w.setPrivate("visible",x)}}}),r("ValueAxis").setAll({baseValue:0,logarithmic:!1,strictMinMax:!1,autoZoom:!0,fillRule:_=>{const w=_.get("axisFill");if(w){const T=_.component,x=_.get("value"),C=T.getPrivate("step");R.isNumber(x)&&R.isNumber(C)&&(ce.round(x/C/2,5)==Math.round(x/C/2)?w.setPrivate("visible",!1):w.setPrivate("visible",!0))}}}),r("DurationAxis").setAll({baseUnit:"second"}),r("XYSeries").setAll({maskBullets:!0,stackToNegative:!0,locationX:.5,locationY:.5,snapTooltip:!1,openValueXGrouped:"open",openValueYGrouped:"open",valueXGrouped:"close",valueYGrouped:"close",seriesTooltipTarget:"series"}),r("BaseColumnSeries").setAll({adjustBulletPosition:!0}),r("ColumnSeries").setAll({clustered:!0}),r("RoundedRectangle",["series","column"]).setAll({position:"absolute",isMeasured:!1,width:(0,G.aQ)(70),height:(0,G.aQ)(70),strokeWidth:1,strokeOpacity:1,cornerRadiusBL:0,cornerRadiusTL:0,cornerRadiusBR:0,cornerRadiusTR:0,fillOpacity:1,role:"figure"}),r("LineSeries").setAll({connect:!0,autoGapCount:1.1,stackToNegative:!1}),r("Graphics",["series","stroke"]).setAll({position:"absolute",strokeWidth:1,strokeOpacity:1,isMeasured:!1}),r("Graphics",["series","fill"]).setAll({visible:!1,fillOpacity:0,position:"absolute",strokeWidth:0,strokeOpacity:0,isMeasured:!1}),r("Graphics",["line","series","legend","marker","stroke"]).setAll({draw:(_,w)=>{const T=w.parent;if(T){const x=T.height(),C=T.width();_.moveTo(0,x/2),_.lineTo(C,x/2)}}});{const _=r("Graphics",["line","series","legend","marker","stroke"]).states.create("disabled",{});(0,_e.v)(_,"stroke",e,"disabled")}r("Graphics",["line","series","legend","marker","fill"]).setAll({draw:(_,w)=>{const T=w.parent;if(T){const x=T.height(),C=T.width();_.moveTo(0,0),_.lineTo(C,0),_.lineTo(C,x),_.lineTo(0,x),_.lineTo(0,0)}}});{const _=r("Graphics",["line","series","legend","marker","fill"]).states.create("disabled",{});(0,_e.v)(_,"stroke",e,"disabled")}r("SmoothedXYLineSeries").setAll({tension:.5}),r("SmoothedXLineSeries").setAll({tension:.5}),r("SmoothedYLineSeries").setAll({tension:.5}),r("Candlestick").setAll({position:"absolute",isMeasured:!1,width:(0,G.aQ)(50),height:(0,G.aQ)(50),strokeWidth:1,strokeOpacity:1,cornerRadiusBL:0,cornerRadiusTL:0,cornerRadiusBR:0,cornerRadiusTR:0,fillOpacity:1,role:"figure"}),r("OHLC").setAll({width:(0,G.aQ)(80),height:(0,G.aQ)(80)}),r("CandlestickSeries").setAll({lowValueXGrouped:"low",lowValueYGrouped:"low",highValueXGrouped:"high",highValueYGrouped:"high",openValueXGrouped:"open",openValueYGrouped:"open",valueXGrouped:"close",valueYGrouped:"close"});{const _=r("Rectangle",["column","autocolor"]).states.create("riseFromOpen",{});(0,_e.v)(_,"fill",e,"positive"),(0,_e.v)(_,"stroke",e,"positive")}{const _=r("Rectangle",["column","autocolor"]).states.create("dropFromOpen",{});(0,_e.v)(_,"fill",e,"negative"),(0,_e.v)(_,"stroke",e,"negative")}r("Rectangle",["column","autocolor","pro"]).states.create("riseFromOpen",{fillOpacity:0}),r("Rectangle",["column","autocolor","pro"]).states.create("dropFromOpen",{fillOpacity:1});{const _=r("Rectangle",["column","autocolor","pro"]).states.create("riseFromPrevious",{});(0,_e.v)(_,"fill",e,"positive"),(0,_e.v)(_,"stroke",e,"positive")}{const _=r("Rectangle",["column","autocolor","pro"]).states.create("dropFromPrevious",{});(0,_e.v)(_,"fill",e,"negative"),(0,_e.v)(_,"stroke",e,"negative")}}}var B=F(9239),ne=F(3605),L=F(3704),P=F(434),H=F(796),ue=F(4618),M=F(3232),W=F(4178),N=F(8261);class be extends L.j{constructor(){super(...arguments),Object.defineProperty(this,"xAxes",{enumerable:!0,configurable:!0,writable:!0,value:new P.dn}),Object.defineProperty(this,"yAxes",{enumerable:!0,configurable:!0,writable:!0,value:new P.dn}),Object.defineProperty(this,"topAxesContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.chartContainer.children.push(B.W.new(this._root,{width:G.AQ,layout:this._root.verticalLayout}))}),Object.defineProperty(this,"yAxesAndPlotContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.chartContainer.children.push(B.W.new(this._root,{width:G.AQ,height:G.AQ,layout:this._root.horizontalLayout}))}),Object.defineProperty(this,"bottomAxesContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.chartContainer.children.push(B.W.new(this._root,{width:G.AQ,layout:this._root.verticalLayout}))}),Object.defineProperty(this,"leftAxesContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.yAxesAndPlotContainer.children.push(B.W.new(this._root,{height:G.AQ,layout:this._root.horizontalLayout}))}),Object.defineProperty(this,"plotsContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.yAxesAndPlotContainer.children.push(B.W.new(this._root,{width:G.AQ,height:G.AQ,maskContent:!1}))}),Object.defineProperty(this,"plotContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.plotsContainer.children.push(B.W.new(this._root,{width:G.AQ,height:G.AQ}))}),Object.defineProperty(this,"topPlotContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.plotsContainer.children.push(B.W.new(this._root,{width:G.AQ,height:G.AQ}))}),Object.defineProperty(this,"gridContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.plotContainer.children.push(B.W.new(this._root,{width:G.AQ,height:G.AQ,isMeasured:!1}))}),Object.defineProperty(this,"topGridContainer",{enumerable:!0,configurable:!0,writable:!0,value:B.W.new(this._root,{width:G.AQ,height:G.AQ,isMeasured:!1})}),Object.defineProperty(this,"rightAxesContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.yAxesAndPlotContainer.children.push(B.W.new(this._root,{height:G.AQ,layout:this._root.horizontalLayout}))}),Object.defineProperty(this,"axisHeadersContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.plotContainer.children.push(B.W.new(this._root,{}))}),Object.defineProperty(this,"zoomOutButton",{enumerable:!0,configurable:!0,writable:!0,value:this.topPlotContainer.children.push(ue.z.new(this._root,{themeTags:["zoom"],icon:M.T.new(this._root,{themeTags:["button","icon"]})}))}),Object.defineProperty(this,"_movePoint",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}}),Object.defineProperty(this,"_wheelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_otherCharts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_movePoints",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_downStartX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downEndX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downStartY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downEndY",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this._defaultThemes.push(X.new(this._root)),super._afterNew(),this._disposers.push(this.xAxes),this._disposers.push(this.yAxes);const e=this._root;let i=this._root.verticalLayout;const r=this.zoomOutButton;r.events.on("click",()=>{this.zoomOut()}),r.set("opacity",0),r.states.lookup("default").set("opacity",1),this.chartContainer.set("layout",i);const o=this.plotContainer;o.children.push(this.seriesContainer),this._disposers.push(this._processAxis(this.xAxes,this.bottomAxesContainer)),this._disposers.push(this._processAxis(this.yAxes,this.leftAxesContainer)),o.children.push(this.topGridContainer),o.children.push(this.bulletsContainer),o.set("interactive",!0),o.set("interactiveChildren",!1),o.set("background",ne.A.new(e,{themeTags:["xy","background"],fill:H.Il.fromHex(0),fillOpacity:0})),this._disposers.push(o.events.on("pointerdown",c=>{this._handlePlotDown(c.originalEvent)})),this._disposers.push(o.events.on("globalpointerup",c=>{this._handlePlotUp(c.originalEvent)})),this._disposers.push(o.events.on("globalpointermove",c=>{this._handlePlotMove(c.originalEvent)})),this._maskGrid(),this._setUpTouch()}_beforeChanged(){super._beforeChanged(),(this.isDirty("pinchZoomX")||this.isDirty("pinchZoomY")||this.get("panX")||this.get("panY"))&&this._setUpTouch()}_setUpTouch(){this.plotContainer._display.cancelTouch||(this.plotContainer._display.cancelTouch=!!(this.get("pinchZoomX")||this.get("pinchZoomY")||this.get("panX")||this.get("panY")))}_maskGrid(){this.gridContainer.set("maskContent",!0),this.topGridContainer.set("maskContent",!0)}_removeSeries(e){e._unstack(),e._posXDp&&e._posXDp.dispose(),e._posYDp&&e._posYDp.dispose(),e.set("baseAxis",void 0);const i=e.get("xAxis");i&&(v.remove(i.series,e),i.markDirtyExtremes());const r=e.get("yAxis");r&&(v.remove(r.series,e),r.markDirtyExtremes());const o=this.get("cursor");if(o){const c=o.get("snapToSeries");c&&v.remove(c,e)}super._removeSeries(e)}handleWheel(e){const i=this.get("wheelX"),r=this.get("wheelY"),o=this.plotContainer,c=e.originalEvent;if(!N.isLocalEvent(c,this))return;c.preventDefault();const m=o.toLocal(this._root.documentPointToRoot({x:c.clientX,y:c.clientY})),p=this.get("wheelStep",.2),_=c.deltaY/100,w=c.deltaX/100,T=this.get("wheelZoomPositionX"),x=this.get("wheelZoomPositionY");("zoomX"===i||"zoomXY"===i)&&0!=w&&this.xAxes.each(C=>{if(C.get("zoomX")){let K=C.get("start"),ee=C.get("end"),te=C.fixPosition(m.x/o.width());null!=T&&(te=T);let $=K-p*(ee-K)*w*te,ae=ee+p*(ee-K)*w*(1-te);1/(ae-$)<C.getPrivate("maxZoomFactor",1/0)/C.get("minZoomCount",1)&&this._handleWheelAnimation(C.zoom($,ae))}}),("zoomX"===r||"zoomXY"===r)&&0!=_&&this.xAxes.each(C=>{if(C.get("zoomX")){let K=C.get("start"),ee=C.get("end"),te=C.fixPosition(m.x/o.width());null!=T&&(te=T);let $=K-p*(ee-K)*_*te,ae=ee+p*(ee-K)*_*(1-te);1/(ae-$)<C.getPrivate("maxZoomFactor",1/0)/C.get("minZoomCount",1)&&this._handleWheelAnimation(C.zoom($,ae))}}),("zoomY"===i||"zoomXY"===i)&&0!=w&&this.yAxes.each(C=>{if(C.get("zoomY")){let K=C.get("start"),ee=C.get("end"),te=C.fixPosition(m.y/o.height());null!=x&&(te=x);let $=K-p*(ee-K)*w*te,ae=ee+p*(ee-K)*w*(1-te);1/(ae-$)<C.getPrivate("maxZoomFactor",1/0)/C.get("minZoomCount",1)&&this._handleWheelAnimation(C.zoom($,ae))}}),("zoomY"===r||"zoomXY"===r)&&0!=_&&this.yAxes.each(C=>{if(C.get("zoomY")){let K=C.get("start"),ee=C.get("end"),te=C.fixPosition(m.y/o.height());null!=x&&(te=x);let $=K-p*(ee-K)*_*te,ae=ee+p*(ee-K)*_*(1-te);1/(ae-$)<C.getPrivate("maxZoomFactor",1/0)/C.get("minZoomCount",1)&&this._handleWheelAnimation(C.zoom($,ae))}}),("panX"===i||"panXY"===i)&&0!=w&&this.xAxes.each(C=>{if(C.get("panX")){let K=C.get("start"),ee=C.get("end"),te=this._getWheelSign(C)*p*(ee-K)*w,$=K+te,ae=ee+te,ge=this._fixWheel($,ae);$=ge[0],ae=ge[1],this._handleWheelAnimation(C.zoom($,ae))}}),("panX"===r||"panXY"===r)&&0!=_&&this.xAxes.each(C=>{if(C.get("panX")){let K=C.get("start"),ee=C.get("end"),te=this._getWheelSign(C)*p*(ee-K)*_,$=K+te,ae=ee+te,ge=this._fixWheel($,ae);$=ge[0],ae=ge[1],this._handleWheelAnimation(C.zoom($,ae))}}),("panY"===i||"panXY"===i)&&0!=w&&this.yAxes.each(C=>{if(C.get("panY")){let K=C.get("start"),ee=C.get("end"),te=this._getWheelSign(C)*p*(ee-K)*w,$=K+te,ae=ee+te,ge=this._fixWheel($,ae);$=ge[0],ae=ge[1],this._handleWheelAnimation(C.zoom($,ae))}}),("panY"===r||"panXY"===r)&&0!=_&&this.yAxes.each(C=>{if(C.get("panY")){let K=C.get("start"),ee=C.get("end"),te=this._getWheelSign(C)*p*(ee-K)*_,$=K-te,ae=ee-te,ge=this._fixWheel($,ae);$=ge[0],ae=ge[1],this._handleWheelAnimation(C.zoom($,ae))}})}_handleSetWheel(){const e=this.get("wheelX"),i=this.get("wheelY");"none"!==e||"none"!==i?(this._wheelDp=this.plotContainer.events.on("wheel",o=>{this.handleWheel(o)}),this._disposers.push(this._wheelDp)):this._wheelDp&&this._wheelDp.dispose()}_getWheelSign(e){let i=1;return e.get("renderer").get("inversed")&&(i=-1),i}_fixWheel(e,i){const r=i-e;return e<0&&(i=(e=0)+r),i>1&&(e=(i=1)-r),[e,i]}_handlePlotDown(e){if(2==e.button)return;const i=this.plotContainer;let r=i.toLocal(this._root.documentPointToRoot({x:e.clientX,y:e.clientY}));if((this.get("pinchZoomX")||this.get("pinchZoomY"))&&e.pointerId&&z.keys(i._downPoints).length>0){const m=this.xAxes.getIndex(0),p=this.yAxes.getIndex(0);m&&(this._downStartX=m.get("start",0),this._downEndX=m.get("end",1)),p&&(this._downStartY=p.get("start",0),this._downEndY=p.get("end",1))}if((this.get("panX")||this.get("panY"))&&r.x>=0&&r.y>=0&&r.x<=i.width()&&r.y<=this.height()){this._downPoint={x:e.clientX,y:e.clientY};const o=this.get("panX"),c=this.get("panY");o&&this.xAxes.each(p=>{p._panStart=p.get("start"),p._panEnd=p.get("end")}),c&&this.yAxes.each(p=>{p._panStart=p.get("start"),p._panEnd=p.get("end")});const m="panstarted";this.events.isEnabled(m)&&this.events.dispatch(m,{type:m,target:this,originalEvent:e})}}_handleWheelAnimation(e){e?e.events.on("stopped",()=>{this._dispatchWheelAnimation()}):this._dispatchWheelAnimation()}_dispatchWheelAnimation(){const e="wheelended";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this})}_handlePlotUp(e){const i=this._downPoint;if(i&&(this.get("panX")||this.get("panY"))){let r=this.plotContainer.toLocal(this._root.documentPointToRoot({x:e.clientX,y:e.clientY}));if(r.x==i.x&&r.y==i.y){const c="pancancelled";this.events.isEnabled(c)&&this.events.dispatch(c,{type:c,target:this,originalEvent:e})}const o="panended";this.events.isEnabled(o)&&this.events.dispatch(o,{type:o,target:this,originalEvent:e})}this._downPoint=void 0,this.xAxes.each(r=>{r._isPanning=!1}),this.yAxes.each(r=>{r._isPanning=!1})}_handlePlotMove(e){const i=this.plotContainer;if(this.get("pinchZoomX")||this.get("pinchZoomY")){const c=e.pointerId;if(c&&(this._movePoints[c]=this._root.documentPointToRoot({x:e.clientX,y:e.clientY}),z.keys(i._downPoints).length>1))return void this._handlePinch()}let r=this._downPoint;if(r){r=i.toLocal(this._root.documentPointToRoot(r));let o=i.toLocal(this._root.documentPointToRoot({x:e.clientX,y:e.clientY}));const c=this.get("panX"),m=this.get("panY");if(c){let p=this.get("scrollbarX");p&&p.events.disableType("rangechanged"),this.xAxes.each(_=>{if(_.get("panX")){_._isPanning=!0;let w=_._panStart,T=_._panEnd,C=(T-w)*(r.x-o.x)/i.width();_.get("renderer").get("inversed")&&(C*=-1);let K=w+C,ee=T+C;ee-K<1+2*_.get("maxDeviation",1)&&(_.set("start",K),_.set("end",ee))}}),p&&p.events.enableType("rangechanged")}if(m){let p=this.get("scrollbarY");p&&p.events.disableType("rangechanged"),this.yAxes.each(_=>{if(_.get("panY")){_._isPanning=!0;let w=_._panStart,T=_._panEnd,C=(T-w)*(r.y-o.y)/i.height();_.get("renderer").get("inversed")&&(C*=-1);let K=w-C,ee=T-C;ee-K<1+2*_.get("maxDeviation",1)&&(_.set("start",K),_.set("end",ee))}}),p&&p.events.enableType("rangechanged")}}}_handlePinch(){const e=this.plotContainer;let i=0,r=[],o=[];if(z.each(e._downPoints,(c,m)=>{r[i]=m;let p=this._movePoints[c];p&&(o[i]=p),i++}),r.length>1&&o.length>1){const c=e.width(),m=e.height();let p=r[0],_=r[1],w=o[0],T=o[1];if(p&&_&&w&&T){if(w=e.toLocal(w),T=e.toLocal(T),p=e.toLocal(p),_=e.toLocal(_),this.get("pinchZoomX")){const x=this._downStartX,C=this._downEndX;if(null!=x&&null!=C){p.x>_.x&&([p,_]=[_,p],[w,T]=[T,w]);let K=x+p.x/c*(C-x),ee=x+_.x/c*(C-x),te=x+w.x/c*(C-x),$=x+T.x/c*(C-x),oe=Math.max(.001,ee-K)/Math.max(.001,$-te),fe=x*oe+K-te*oe,ye=C*oe+ee-$*oe;this.xAxes.each(we=>{let Ze=we.fixPosition(fe),Fe=we.fixPosition(ye);we.zoom(Ze,Fe,0)})}}if(this.get("pinchZoomY")){const x=this._downStartY,C=this._downEndY;if(null!=x&&null!=C){p.y<_.y&&([p,_]=[_,p],[w,T]=[T,w]);let K=x+(1-p.y/m)*(C-x),ee=x+(1-_.y/m)*(C-x),te=x+(1-w.y/m)*(C-x),$=x+(1-T.y/m)*(C-x),oe=Math.max(.001,ee-K)/Math.max(.001,$-te),fe=x*oe+K-te*oe,ye=C*oe+ee-$*oe;this.yAxes.each(we=>{let Ze=we.fixPosition(fe),Fe=we.fixPosition(ye);we.zoom(Ze,Fe,0)})}}}}}_handleCursorPosition(){const e=this.get("cursor");if(e){const i=e.getPrivate("point");let r=e.get("snapToSeries");if(e._downPoint&&(r=void 0),r&&i){const o=e.get("snapToSeriesBy"),c=[];v.each(r,_=>{if(!_.isHidden()&&!_.isHiding())if("x!"!=o&&"y!"!=o){const w=_.startIndex(),T=_.endIndex();for(let x=w;x<T;x++){const C=_.dataItems[x];C&&!C.isHidden()&&c.push(C)}}else{const w=_.get("tooltipDataItem");w&&c.push(w)}});let p,m=1/0;if(v.each(c,_=>{const w=_.get("point");if(w){let T=0;T="x"==o||"x!"==o?Math.abs(i.x-w.x):"y"==o||"y!"==o?Math.abs(i.y-w.y):Math.hypot(i.x-w.x,i.y-w.y),T<m&&(m=T,p=_)}}),v.each(r,_=>{const w=_.get("tooltip");w&&w._setDataItem(void 0)}),p){let _=p.component;_.showDataItemTooltip(p);const w=p.get("point");w&&e.handleMove(_.toGlobal({x:w.x-_.x(),y:w.y-_.y()}),!0)}}}}_updateCursor(){let e=this.get("cursor");e&&e.handleMove()}_addCursor(e){this.plotContainer.children.push(e)}_prepareChildren(){if(super._prepareChildren(),this.series.each(e=>{this._colorize(e)}),(this.isDirty("wheelX")||this.isDirty("wheelY"))&&this._handleSetWheel(),this.isDirty("cursor")){const e=this._prevSettings.cursor,i=this.get("cursor");i!==e&&(this._disposeProperty("cursor"),e&&e.dispose(),i&&(i._setChart(this),this._addCursor(i),this._pushPropertyDisposer("cursor",i.events.on("selectended",()=>{this._handleCursorSelectEnd()}))),this._prevSettings.cursor=i)}if(this.isDirty("scrollbarX")){const e=this._prevSettings.scrollbarX,i=this.get("scrollbarX");i!==e&&(this._disposeProperty("scrollbarX"),e&&e.dispose(),i&&(i.parent||this.topAxesContainer.children.push(i),this._pushPropertyDisposer("scrollbarX",i.events.on("rangechanged",r=>{this._handleScrollbar(this.xAxes,r.start,r.end,r.grip)})),i.setPrivate("positionTextFunction",r=>{const o=this.xAxes.getIndex(0);return o&&o.getTooltipText(r,!1)||""})),this._prevSettings.scrollbarX=i)}if(this.isDirty("scrollbarY")){const e=this._prevSettings.scrollbarY,i=this.get("scrollbarY");i!==e&&(this._disposeProperty("scrollbarY"),e&&e.dispose(),i&&(i.parent||this.rightAxesContainer.children.push(i),this._pushPropertyDisposer("scrollbarY",i.events.on("rangechanged",r=>{this._handleScrollbar(this.yAxes,r.start,r.end,r.grip)})),i.setPrivate("positionTextFunction",r=>{const o=this.yAxes.getIndex(0);return o&&o.getTooltipText(r,!1)||""})),this._prevSettings.scrollbarY=i)}this._handleZoomOut()}_processSeries(e){super._processSeries(e);const i=e.get("xAxis"),r=e.get("yAxis");v.move(i.series,e),v.move(r.series,e),e._posXDp=e.addDisposer(i.events.on("positionchanged",()=>{e._fixPosition()})),e._posXDp=e.addDisposer(r.events.on("positionchanged",()=>{e._fixPosition()})),e.get("baseAxis")||(r.isType("CategoryAxis")||r.isType("DateAxis")?e.set("baseAxis",r):e.set("baseAxis",i)),e.get("stacked")&&(e._markDirtyKey("stacked"),v.each(e.dataItems,o=>{o.set("stackToItemY",void 0),o.set("stackToItemX",void 0)})),e._markDirtyAxes(),r.markDirtyExtremes(),i.markDirtyExtremes(),this._colorize(e)}_colorize(e){const i=this.get("colors");if(i&&null==e.get("fill")){const r=i.next();e._setSoft("stroke",r),e._setSoft("fill",r)}}_handleCursorSelectEnd(){const e=this.get("cursor"),i=e.get("behavior"),r=e.getPrivate("downPositionX",0),o=e.getPrivate("downPositionY",0),c=e.getPrivate("positionX",.5),m=e.getPrivate("positionY",.5);this.xAxes.each(p=>{if("zoomX"===i||"zoomXY"===i){let _=p.toAxisPosition(r),w=p.toAxisPosition(c);p.zoom(_,w)}p.setPrivate("updateScrollbar",!0)}),this.yAxes.each(p=>{if("zoomY"===i||"zoomXY"===i){let _=p.toAxisPosition(o),w=p.toAxisPosition(m);p.zoom(_,w)}p.setPrivate("updateScrollbar",!0)})}_handleScrollbar(e,i,r,o){e.each(c=>{let m=c.fixPosition(i),p=c.fixPosition(r),_=c.zoom(m,p,void 0,o);const w="updateScrollbar";c.setPrivateRaw(w,!1),_?_.events.on("stopped",()=>{c.setPrivateRaw(w,!0)}):c.setPrivateRaw(w,!0)})}_processAxis(e,i){return e.events.onAll(r=>{if("clear"===r.type)v.each(r.oldValues,o=>{this._removeAxis(o)});else if("push"===r.type)i.children.push(r.newValue),r.newValue.processChart(this);else if("setIndex"===r.type)i.children.setIndex(r.index,r.newValue),r.newValue.processChart(this);else if("insertIndex"===r.type)i.children.insertIndex(r.index,r.newValue),r.newValue.processChart(this);else if("removeIndex"===r.type)this._removeAxis(r.oldValue);else{if("moveIndex"!==r.type)throw new Error("Unknown IListEvent type");i.children.moveValue(r.value,r.newIndex),r.value.processChart(this)}})}_removeAxis(e){if(!e.isDisposed()){const i=e.parent;i&&i.children.removeValue(e);const r=e.gridContainer,o=r.parent;o&&o.children.removeValue(r);const c=e.topGridContainer,m=c.parent;m&&m.children.removeValue(c)}}_updateChartLayout(){const e=this.leftAxesContainer.width(),i=this.rightAxesContainer.width(),r=this.bottomAxesContainer;r.set("paddingLeft",e),r.set("paddingRight",i);const o=this.topAxesContainer;o.set("paddingLeft",e),o.set("paddingRight",i)}processAxis(e){}_handleAxisSelection(e,i){let r=e.fixPosition(e.get("start",0)),o=e.fixPosition(e.get("end",1));if(r>o&&([r,o]=[o,r]),-1!=this.xAxes.indexOf(e)){if(i||e.getPrivate("updateScrollbar")){let c=this.get("scrollbarX");c&&(!c.getPrivate("isBusy")||i)&&(c.setRaw("start",r),c.setRaw("end",o),c.updateGrips())}}else if(-1!=this.yAxes.indexOf(e)&&(i||e.getPrivate("updateScrollbar"))){let c=this.get("scrollbarY");c&&(!c.getPrivate("isBusy")||i)&&(c.setRaw("start",r),c.setRaw("end",o),c.updateGrips())}this._handleZoomOut()}_handleZoomOut(){let e=this.zoomOutButton;if(e&&e.parent){let i=!1;this.xAxes.each(r=>{(0!=r.get("start")||1!=r.get("end"))&&(i=!0)}),this.yAxes.each(r=>{(0!=r.get("start")||1!=r.get("end"))&&(i=!0)}),i?e.isHidden()&&e.show():e.hide()}}inPlot(e){const i=this.plotContainer,r=this.getPrivate("otherCharts",this._otherCharts),o=i.toGlobal(e);if(e.x>=-.5&&e.y>=-.5&&e.x<=i.width()+.5&&e.y<=i.height()+.5)return!0;if(r)for(let c=r.length-1;c>=0;c--){const m=r[c];if(m!=this){const p=m.plotContainer,_=this._root.rootPointToDocument(o),w=m._root.documentPointToRoot(_),T=p.toLocal(w);if(T.x>=-.1&&T.y>=-.1&&T.x<=p.width()+.1&&T.y<=p.height()+.1)return!0}}return!1}arrangeTooltips(){const e=this.plotContainer,i=e.width(),r=e.height(),o=this.height();let c=e._display.toGlobal({x:0,y:0}),m=e._display.toGlobal({x:i,y:r});const p=[];let K,ee,_=0,w=1/0,T=this._movePoint,x=this.get("maxTooltipDistance"),C=this.get("maxTooltipDistanceBy","xy");R.isNumber(x)&&this.series.each($=>{if(!$.isHidden()){const ae=$.get("tooltip");if(ae){let ge=ae.get("pointTo");if(ge){let oe=Math.hypot(T.x-ge.x,T.y-ge.y);"x"==C?oe=Math.abs(T.x-ge.x):"y"==C&&(oe=Math.abs(T.y-ge.y)),oe<w&&(w=oe,K=$,ee=ge)}}}});const te=[];if(this.series.each($=>{const ae=$.get("tooltip");if(ae){let ge=!1,oe=ae.get("pointTo");if(oe){if(x>=0){let fe=ae.get("pointTo");if(fe&&$!=K){let ye=Math.hypot(ee.x-fe.x,ee.y-fe.y);"x"==C?ye=Math.abs(ee.x-fe.x):"y"==C&&(ye=Math.abs(ee.y-fe.y)),ye>x&&(ge=!0)}}else-1==x&&$!=K&&(ge=!0);this.inPlot(this._tooltipToLocal(oe))&&ae.dataItem?ge||(_+=oe.y):ge=!0,ge||$.isHidden()||$.isHiding()?ae.hide(0):(ae.show(),p.push(ae),te.push($))}}}),this.setPrivate("tooltipSeries",te),this.get("arrangeTooltips")){const $=this._root.tooltipContainer;if(_/p.length>r/2+c.y){p.sort((fe,ye)=>W.HO(ye.get("pointTo").y,fe.get("pointTo").y));let oe=m.y;if(v.each(p,fe=>{let ye=fe.height(),we=fe.get("centerY");we instanceof G.gG&&(ye*=we.value),ye+=fe.get("marginBottom",0),fe.set("bounds",{left:c.x,top:c.y,right:m.x,bottom:oe}),fe.setPrivate("customData",{left:c.x,top:c.y,right:m.x,bottom:oe}),oe=Math.min(oe-ye,fe._fy-ye),fe.parent==$&&$.children.moveValue(fe,0)}),oe<0){p.reverse();let fe=oe;v.each(p,ye=>{let we=ye.get("bounds");if(we){let Ze=we.top-oe,Fe=we.bottom-oe;Ze<fe&&(Ze=fe,Fe=Ze+ye.height()),ye.set("bounds",{left:we.left,top:Ze,right:we.right,bottom:Fe}),fe=we.bottom-oe+ye.get("marginBottom",0)}})}}else{p.reverse(),p.sort((fe,ye)=>W.HO(fe.get("pointTo").y,ye.get("pointTo").y));let oe=0;if(v.each(p,fe=>{let ye=fe.height(),we=fe.get("centerY");we instanceof G.gG&&(ye*=we.value),ye+=fe.get("marginBottom",0),fe.set("bounds",{left:c.x,top:oe,right:m.x,bottom:Math.max(c.y+o,oe+ye)}),fe.parent==$&&$.children.moveValue(fe,0),oe=Math.max(oe+ye,fe._fy+ye)}),oe>o){p.reverse();let fe=o;v.each(p,ye=>{let we=ye.get("bounds");if(we){let Ze=we.top-(o-oe),Fe=we.bottom-(o-oe);Fe>fe&&(Fe=fe,Ze=Fe-ye.height()),ye.set("bounds",{left:we.left,top:Ze,right:we.right,bottom:Fe}),fe=Fe-ye.height()-ye.get("marginBottom",0)}})}}}}_tooltipToLocal(e){return this.plotContainer.toLocal(e)}zoomOut(){this.xAxes.each(e=>{e.setPrivate("updateScrollbar",!0),e.zoom(0,1)}),this.yAxes.each(e=>{e.setPrivate("updateScrollbar",!0),e.zoom(0,1)})}}Object.defineProperty(be,"className",{enumerable:!0,configurable:!0,writable:!0,value:"XYChart"}),Object.defineProperty(be,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:L.j.classNames.concat([be.className])});var Se=F(4248);class U extends Se.L{constructor(){super(...arguments),Object.defineProperty(this,"chart",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(be.new(this._root,{themeTags:["chart"],interactive:!1,interactiveChildren:!1,panX:!1,panY:!1,wheelX:"none",wheelY:"none"}))}),Object.defineProperty(this,"overlay",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(M.T.new(this._root,{themeTags:["overlay"],interactive:!1}))})}_afterNew(){this._addOrientationClass(),this._settings.themeTags=N.mergeTags(this._settings.themeTags,["scrollbar","xy","chart",this._settings.orientation]);const e=this.children;e.moveValue(this.thumb),e.moveValue(this.startGrip),e.moveValue(this.endGrip),this.thumb.set("opacity",0),this.thumb.states.create("hover",{opacity:.2});const i=this.chart.plotContainer;i.set("interactive",!1),i.remove("background"),i.children.removeValue(this.chart.zoomOutButton),super._afterNew()}_updateThumb(){super._updateThumb(),this.overlay.set("draw",e=>{const i=this.startGrip,r=this.endGrip;let o=i.x(),c=i.y(),m=r.x(),p=r.y();const _=this.height(),w=this.width();o>m&&([o,m]=[m,o]),c>p&&([c,p]=[p,c]),"horizontal"===this.get("orientation")?(e.moveTo(0,0),e.lineTo(o,0),e.lineTo(o,_),e.lineTo(0,_),e.lineTo(0,0),e.moveTo(m,0),e.lineTo(w,0),e.lineTo(w,_),e.lineTo(m,_),e.lineTo(m,0)):(e.moveTo(0,0),e.lineTo(0,c),e.lineTo(w,c),e.lineTo(w,0),e.lineTo(0,0),e.moveTo(0,p),e.lineTo(0,_),e.lineTo(w,_),e.lineTo(w,p),e.lineTo(0,p))})}}Object.defineProperty(U,"className",{enumerable:!0,configurable:!0,writable:!0,value:"XYChartScrollbar"}),Object.defineProperty(U,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Se.L.classNames.concat([U.className])});class Re extends M.T{_beforeChanged(){super._beforeChanged(),(this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}}Object.defineProperty(Re,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Grid"}),Object.defineProperty(Re,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:M.T.classNames.concat([Re.className])});class Ge extends B.W{constructor(){super(...arguments),Object.defineProperty(this,"lineX",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(Re.new(this._root,{themeTags:["x"]}))}),Object.defineProperty(this,"lineY",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(Re.new(this._root,{themeTags:["y"]}))}),Object.defineProperty(this,"selection",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(M.T.new(this._root,{themeTags:["selection","cursor"],layer:30}))}),Object.defineProperty(this,"_movePoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_lastPoint",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}}),Object.defineProperty(this,"_tooltipX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_tooltipY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"chart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_toX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_toY",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this._settings.themeTags=N.mergeTags(this._settings.themeTags,["xy","cursor"]),super._afterNew(),this.setAll({width:G.AQ,height:G.AQ,isMeasured:!0,position:"absolute"}),this.states.create("hidden",{visible:!0,opacity:0}),this._drawLines(),this.setPrivateRaw("visible",!1),this._disposers.push(this.setTimeout(()=>{this.setPrivate("visible",!0)},500)),this._disposers.push(this.lineX.events.on("positionchanged",()=>{this._handleXLine()})),this._disposers.push(this.lineY.events.on("positionchanged",()=>{this._handleYLine()})),this._disposers.push(this.lineX.events.on("focus",e=>this._handleLineFocus(e.target))),this._disposers.push(this.lineX.events.on("blur",e=>this._handleLineBlur(e.target))),this._disposers.push(this.lineY.events.on("focus",e=>this._handleLineFocus(e.target))),this._disposers.push(this.lineY.events.on("blur",e=>this._handleLineBlur(e.target))),N.supports("keyboardevents")&&this._disposers.push(N.addEventListener(document,"keydown",e=>{this._handleLineMove(e.keyCode)}))}_setUpTouch(){const e=this.chart;e&&(e.plotContainer._display.cancelTouch="none"!=this.get("behavior"))}_handleXLine(){let e=this.lineX.x(),i=!0;(e<0||e>this.width())&&(i=!1),this.lineX.setPrivate("visible",i)}_handleYLine(){let e=this.lineY.y(),i=!0;(e<0||e>this.height())&&(i=!1),this.lineY.setPrivate("visible",i)}_handleLineMove(e){let i="",r=0,o=.1;const c=this.chart;this._root.focused(this.lineX)?(c&&c.xAxes.length&&(o=c.xAxes.getIndex(0).getCellWidthPosition()),r=this.getPrivate("positionX",0),i="positionX",37==e?r-=o:39==e&&(r+=o)):this._root.focused(this.lineY)&&(c&&c.yAxes.length&&(o=c.yAxes.getIndex(0).getCellWidthPosition()),r=this.getPrivate("positionY",0),i="positionY",38==e?r-=o:40==e&&(r+=o)),r<0?r=0:r>1&&(r=1),""!=i&&this.set(i,r)}_handleLineFocus(e){this.setAll({positionX:this.getPrivate("positionX"),positionY:this.getPrivate("positionY"),alwaysShow:!0})}_handleLineBlur(e){this.setAll({positionX:void 0,positionY:void 0,alwaysShow:!1})}_prepareChildren(){if(super._prepareChildren(),this.isDirty("xAxis")){this._tooltipX=!1;const e=this.get("xAxis");if(e){const i=e.get("tooltip");i&&(this._tooltipX=!0,this._disposers.push(i.on("pointTo",()=>{this._updateXLine(i)})))}}if(this.isDirty("yAxis")){this._tooltipY=!1;const e=this.get("yAxis");if(e){const i=e.get("tooltip");i&&(this._tooltipY=!0,this._disposers.push(i.on("pointTo",()=>{this._updateYLine(i)})))}}}_handleSyncWith(){const e=this.chart;if(e){const i=this.get("syncWith"),r=[];i&&v.each(i,o=>{const c=o.chart;c&&r.push(c)}),e._otherCharts=r}}_updateChildren(){if(super._updateChildren(),this._handleSyncWith(),this.isDirty("positionX")||this.isDirty("positionY")){const e=this.get("positionX"),i=this.get("positionY");null==e&&null==i?this.hide(0):(this._movePoint=this.toGlobal(this._getPoint(this.get("positionX",0),this.get("positionY",0))),this.handleMove())}}_updateXLine(e){let i=ce.round(this._display.toLocal(e.get("pointTo",{x:0,y:0})).x,2);this._toX!=i&&(this.lineX.animate({key:"x",to:i,duration:e.get("animationDuration",0),easing:e.get("animationEasing")}),this._toX=i)}_updateYLine(e){let i=ce.round(this._display.toLocal(e.get("pointTo",{x:0,y:0})).y,2);this._toY!=i&&(this.lineY.animate({key:"y",to:i,duration:e.get("animationDuration",0),easing:e.get("animationEasing")}),this._toY=i)}_drawLines(){this.lineX.set("draw",e=>{e.moveTo(0,0),e.lineTo(0,this.height())}),this.lineY.set("draw",e=>{e.moveTo(0,0),e.lineTo(this.width(),0)})}_setChart(e){this.chart=e,this._handleSyncWith();const i=e.plotContainer;this.events.on("boundschanged",()=>{this._disposers.push(this.setTimeout(()=>{this.get("alwaysShow")&&(this._movePoint=this.toGlobal(this._getPoint(this.get("positionX",0),this.get("positionY",0))),this.handleMove())},50))}),N.supports("touchevents")&&(this._disposers.push(i.events.on("click",o=>{N.isTouchEvent(o.originalEvent)&&this._handleMove(o.originalEvent)})),this._setUpTouch()),this._disposers.push(i.events.on("pointerdown",o=>{this._handleCursorDown(o.originalEvent)})),this._disposers.push(i.events.on("globalpointerup",o=>{this._handleCursorUp(o.originalEvent),!o.native&&!this.isHidden()&&this._handleMove(o.originalEvent)})),this._disposers.push(i.events.on("globalpointermove",o=>{!this.get("syncWith")&&0==z.keys(i._downPoints).length&&!o.native&&this.isHidden()||this._handleMove(o.originalEvent)}));const r=this.parent;r&&r.children.moveValue(this.selection)}_inPlot(e){const i=this.chart;return!!i&&i.inPlot(e)}_handleCursorDown(e){if(2==e.button)return;const i=this._root.documentPointToRoot({x:e.clientX,y:e.clientY});let r=this._display.toLocal(i);const o=this.chart;if(this.selection.set("draw",()=>{}),o&&this._inPlot(r)){if(this._downPoint=r,"none"!=this.get("behavior")){this.selection.show();const p="selectstarted";this.events.isEnabled(p)&&this.events.dispatch(p,{type:p,target:this})}let c=this._getPosition(r).x,m=this._getPosition(r).y;this.setPrivate("downPositionX",c),this.setPrivate("downPositionY",m)}}_handleCursorUp(e){if(this._downPoint){const i=this.get("behavior","none");if("none"!=i){"z"===i.charAt(0)&&this.selection.hide();const r=this._root.documentPointToRoot({x:e.clientX,y:e.clientY});let o=this._display.toLocal(r);const c=this._downPoint,m=this.get("moveThreshold",1);if(o&&c){let p=!1;if(("zoomX"===i||"zoomXY"===i||"selectX"===i||"selectXY"===i)&&Math.abs(o.x-c.x)>m&&(p=!0),("zoomY"===i||"zoomXY"===i||"selectY"===i||"selectXY"===i)&&Math.abs(o.y-c.y)>m&&(p=!0),p){const _="selectended";this.events.isEnabled(_)&&this.events.dispatch(_,{type:_,target:this})}}}}this._downPoint=void 0}_handleMove(e){if(this.getPrivate("visible")){const i=this.chart;if(i&&z.keys(i.plotContainer._downPoints).length>1)return void this.set("forceHidden",!0);this.set("forceHidden",!1);const r=this._root.documentPointToRoot({x:e.clientX,y:e.clientY}),o=this._lastPoint;if(Math.round(o.x)===Math.round(r.x)&&Math.round(o.y)===Math.round(r.y))return;this._lastPoint=r,this.setPrivate("lastPoint",r),this.handleMove({x:r.x,y:r.y})}}_getPosition(e){return{x:e.x/this.width(),y:e.y/this.height()}}handleMove(e,i){e||(e=this._movePoint);const r=this.get("alwaysShow");if(!e)return void this.hide(0);this._movePoint=e;let o=this._display.toLocal(e),c=this.chart;if(c&&(this._inPlot(o)||this._downPoint)){c._movePoint=e,this.isHidden()&&(this.show(),"z"==this.get("behavior","").charAt(0)&&this.selection.set("draw",()=>{}));let m=o.x,p=o.y,_=this._getPosition(o);this.setPrivate("point",o);let w=this.get("snapToSeries");this._downPoint&&(w=void 0);let T=this.get("positionX"),x=_.x;R.isNumber(T)&&(x=T);let C=this.get("positionY"),K=_.y;R.isNumber(C)&&(K=C),this.setPrivate("positionX",x),this.setPrivate("positionY",K);const ee=this._getPoint(x,K);if(m=ee.x,p=ee.y,c.xAxes.each(te=>{te._handleCursorPosition(x,w),r&&te.handleCursorShow()}),c.yAxes.each(te=>{te._handleCursorPosition(K,w),r&&te.handleCursorShow()}),!i){c._handleCursorPosition();const te="cursormoved";this.events.isEnabled(te)&&this.events.dispatch(te,{type:te,target:this})}this._updateLines(m,p),c.arrangeTooltips()}else if(!this._downPoint&&!r){this.hide(0);const m="cursorhidden";this.events.isEnabled(m)&&this.events.dispatch(m,{type:m,target:this})}this._downPoint&&"none"!=this.get("behavior")&&this._updateSelection(o)}_getPoint(e,i){return{x:this.width()*e,y:this.height()*i}}_updateLines(e,i){this._tooltipX||this.lineX.set("x",e),this._tooltipY||this.lineY.set("y",i),this._drawLines()}_updateSelection(e){const i=this.selection,r=this.get("behavior"),o=this.width(),c=this.height();e.x<0&&(e.x=0),e.x>o&&(e.x=o),e.y<0&&(e.y=0),e.y>c&&(e.y=c),i.set("draw",m=>{const p=this._downPoint;p&&("zoomXY"===r||"selectXY"===r?(m.moveTo(p.x,p.y),m.lineTo(p.x,e.y),m.lineTo(e.x,e.y),m.lineTo(e.x,p.y),m.lineTo(p.x,p.y)):"zoomX"===r||"selectX"===r?(m.moveTo(p.x,0),m.lineTo(p.x,c),m.lineTo(e.x,c),m.lineTo(e.x,0),m.lineTo(p.x,0)):("zoomY"===r||"selectY"===r)&&(m.moveTo(0,p.y),m.lineTo(o,p.y),m.lineTo(o,e.y),m.lineTo(0,e.y),m.lineTo(0,p.y)))})}_onHide(){if(this.isHidden()){let e=this.chart;e&&(e.xAxes.each(i=>{i.handleCursorHide()}),e.yAxes.each(i=>{i.handleCursorHide()}),e.series.each(i=>{i.handleCursorHide()}))}super._onHide()}_onShow(){if(!this.isHidden()){let e=this.chart;e&&(e.xAxes.each(i=>{i.handleCursorShow()}),e.yAxes.each(i=>{i.handleCursorShow()}))}super._onShow()}_dispose(){super._dispose(),this.selection.dispose()}}Object.defineProperty(Ge,"className",{enumerable:!0,configurable:!0,writable:!0,value:"XYCursor"}),Object.defineProperty(Ge,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:B.W.classNames.concat([Ge.className])});var We=F(7582),pe=F(7313),xt=F(3164);class dt extends xt.F{constructor(){super(...arguments),Object.defineProperty(this,"_xField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_yField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_xOpenField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_yOpenField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_xLowField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_xHighField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_yLowField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_yHighField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_axesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_stackDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_selectionProcessed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dataSets",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_mainContainerMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_y",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"mainContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(B.W.new(this._root,{}))}),Object.defineProperty(this,"axisRanges",{enumerable:!0,configurable:!0,writable:!0,value:new P.aV}),Object.defineProperty(this,"_skipped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_couldStackTo",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_reallyStackedTo",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_stackedSeries",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_aLocationX0",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_aLocationX1",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_aLocationY0",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_aLocationY1",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_showBullets",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"valueXFields",{enumerable:!0,configurable:!0,writable:!0,value:["valueX","openValueX","lowValueX","highValueX"]}),Object.defineProperty(this,"valueYFields",{enumerable:!0,configurable:!0,writable:!0,value:["valueY","openValueY","lowValueY","highValueY"]}),Object.defineProperty(this,"_valueXFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_valueYFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_valueXShowFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_valueYShowFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__valueXShowFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__valueYShowFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_emptyDataItem",{enumerable:!0,configurable:!0,writable:!0,value:new pe.z(this,void 0,{})}),Object.defineProperty(this,"_dataSetId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipFieldX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipFieldY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_posXDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_posYDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this.fields.push("categoryX","categoryY","openCategoryX","openCategoryY"),this.valueFields.push("valueX","valueY","openValueX","openValueY","lowValueX","lowValueY","highValueX","highValueY"),this._setRawDefault("vcx",1),this._setRawDefault("vcy",1),this._setRawDefault("valueXShow","valueXWorking"),this._setRawDefault("valueYShow","valueYWorking"),this._setRawDefault("openValueXShow","openValueXWorking"),this._setRawDefault("openValueYShow","openValueYWorking"),this._setRawDefault("lowValueXShow","lowValueXWorking"),this._setRawDefault("lowValueYShow","lowValueYWorking"),this._setRawDefault("highValueXShow","highValueXWorking"),this._setRawDefault("highValueYShow","highValueYWorking"),this._setRawDefault("lowValueXGrouped","low"),this._setRawDefault("lowValueYGrouped","low"),this._setRawDefault("highValueXGrouped","high"),this._setRawDefault("highValueYGrouped","high"),super._afterNew(),this.set("maskContent",!0),this._disposers.push(this.axisRanges.events.onAll(e=>{if("clear"===e.type)v.each(e.oldValues,i=>{this._removeAxisRange(i)});else if("push"===e.type)this._processAxisRange(e.newValue);else if("setIndex"===e.type)this._processAxisRange(e.newValue);else if("insertIndex"===e.type)this._processAxisRange(e.newValue);else if("removeIndex"===e.type)this._removeAxisRange(e.oldValue);else{if("moveIndex"!==e.type)throw new Error("Unknown IStreamEvent type");this._processAxisRange(e.value)}})),this.states.create("hidden",{opacity:1,visible:!1}),this._makeFieldNames()}_processAxisRange(e){const i=B.W.new(this._root,{});e.container=i,this.children.push(i),e.series=this;const r=e.axisDataItem;r.setRaw("isRange",!0);const o=r.component;if(o){o._processAxisRange(r,["range","series"]);const c=r.get("bullet");if(c){const p=c.get("sprite");p&&p.setPrivate("visible",!1)}const m=r.get("axisFill");m&&i.set("mask",m),o._seriesAxisRanges.push(r)}}_removeAxisRange(e){const i=e.axisDataItem,r=i.component;r.disposeDataItem(i),v.remove(r._seriesAxisRanges,i);const o=e.container;o&&o.dispose()}_updateFields(){super._updateFields(),this._valueXFields=[],this._valueYFields=[],this._valueXShowFields=[],this._valueYShowFields=[],this.__valueXShowFields=[],this.__valueYShowFields=[],this.valueXFields&&v.each(this.valueXFields,e=>{if(this.get(e+"Field")){this._valueXFields.push(e);let r=this.get(e+"Show");this.__valueXShowFields.push(r),-1!=r.indexOf("Working")?this._valueXShowFields.push(r.split("Working")[0]):this._valueXShowFields.push(r)}}),this.valueYFields&&v.each(this.valueYFields,e=>{if(this.get(e+"Field")){this._valueYFields.push(e);let r=this.get(e+"Show");this.__valueYShowFields.push(r),-1!=r.indexOf("Working")?this._valueYShowFields.push(r.split("Working")[0]):this._valueYShowFields.push(r)}})}_dispose(){super._dispose();const e=this.chart;e&&e.series.removeValue(this),v.removeFirst(this.get("xAxis").series,this),v.removeFirst(this.get("yAxis").series,this)}_min(e,i){let r=function lt(ie,e){return null==ie?e:null==e?ie:e<ie?e:ie}(this.getPrivate(e),i);this.setPrivate(e,r)}_max(e,i){let r=function Le(ie,e){return null==ie?e:null==e?ie:e>ie?e:ie}(this.getPrivate(e),i);this.setPrivate(e,r)}_shouldMakeBullet(e){const i=this.get("xAxis"),r=this.get("yAxis"),o=this.get("baseAxis");if(!i.inited||!r.inited)return!1;const c=this.get("minBulletDistance",0);if(c>0){let m=this.startIndex(),_=this.endIndex()-m;if(i==o){if(i.get("renderer").axisLength()/_<c/5)return!1}else if(r==o&&r.get("renderer").axisLength()/_<c/5)return!1}return null!=e.get(this._xField)&&null!=e.get(this._yField)}_makeFieldNames(){const e=this.get("xAxis"),i=this.get("yAxis"),r=e.getPrivate("name"),o=N.capitalizeFirst(r),c=i.getPrivate("name"),m=N.capitalizeFirst(c),p=e.get("renderer").getPrivate("letter"),_=i.get("renderer").getPrivate("letter"),w="open",T="low",x="high",C="Show";"ValueAxis"===e.className?(this._xField=this.get(r+p+C),this._xOpenField=this.get(w+o+p+C),this._xLowField=this.get(T+o+p+C),this._xHighField=this.get(x+o+p+C)):(this._xField=r+p,this._xOpenField=w+o+p,this._xLowField=T+o+p,this._xHighField=x+o+p),"ValueAxis"===i.className?(this._yField=this.get(c+_+C),this._yOpenField=this.get(w+m+_+C),this._yLowField=this.get(T+m+_+C),this._yHighField=this.get(x+m+_+C)):(this._yField=c+_,this._yOpenField=w+m+_,this._yLowField=T+m+_,this._yHighField=x+m+_)}_fixVC(){const e=this.get("xAxis"),i=this.get("yAxis"),r=this.get("baseAxis"),o=this.states.lookup("hidden"),c=this.get("sequencedInterpolation");if(o){let m=0;c&&(m=.999999999999),e===r?o.set("vcy",m):(i===r||o.set("vcy",m),o.set("vcx",m))}}_handleMaskBullets(){this.isDirty("maskBullets")&&this.bulletsContainer.set("maskContent",this.get("maskBullets"))}_fixPosition(){const e=this.get("xAxis"),i=this.get("yAxis");this.set("x",e.x()-N.relativeToValue(e.get("centerX",0),e.width())-e.parent.get("paddingLeft",0)),this.set("y",i.y()-N.relativeToValue(i.get("centerY",0),i.height())-i.parent.get("paddingTop",0)),this.bulletsContainer.set("y",this.y()),this.bulletsContainer.set("x",this.x())}_prepareChildren(){super._prepareChildren(),(this.isDirty("valueYShow")||this.isDirty("valueXShow")||this.isDirty("openValueYShow")||this.isDirty("openValueXShow")||this.isDirty("lowValueYShow")||this.isDirty("lowValueXShow")||this.isDirty("highValueYShow")||this.isDirty("highValueXShow"))&&(this._updateFields(),this._makeFieldNames(),this._valuesDirty=!0),(this.isDirty("xAxis")||this.isDirty("yAxis"))&&(this._valuesDirty=!0),this.set("width",this.get("xAxis").width()),this.set("height",this.get("yAxis").height()),this._handleMaskBullets();const e=this.get("xAxis"),i=this.get("yAxis"),r=this.get("baseAxis");let c,p;switch(this.get("tooltipPositionX")){case"open":c=this._xOpenField;break;case"low":c=this._xLowField;break;case"high":c=this._xHighField;break;default:c=this._xField}switch(this._tooltipFieldX=c,this.get("tooltipPositionY")){case"open":p=this._yOpenField;break;case"low":p=this._yLowField;break;case"high":p=this._yHighField;break;default:p=this._yField}this._tooltipFieldY=p,this.isDirty("baseAxis")&&this._fixVC(),this._fixPosition();const _=this.get("stacked");if(this.isDirty("stacked")&&(_?this._valuesDirty&&!this._dataProcessed||this._stack():this._unstack()),this._valuesDirty&&!this._dataProcessed&&(this._dataProcessed=!0,_&&this._stack(),v.each(this.dataItems,w=>{v.each(this._valueXShowFields,T=>{let x=w.get(T);null!=x&&(_&&(x+=this.getStackedXValue(w,T)),this._min("minX",x),this._max("maxX",x))}),v.each(this._valueYShowFields,T=>{let x=w.get(T);null!=x&&(_&&(x+=this.getStackedYValue(w,T)),this._min("minY",x),this._max("maxY",x))}),e.processSeriesDataItem(w,this._valueXFields),i.processSeriesDataItem(w,this._valueYFields)}),e._seriesValuesDirty=!0,i._seriesValuesDirty=!0,this.get("ignoreMinMax")||((this.isPrivateDirty("minX")||this.isPrivateDirty("maxX"))&&e.markDirtyExtremes(),(this.isPrivateDirty("minY")||this.isPrivateDirty("maxY"))&&i.markDirtyExtremes()),this._markStakedDirtyStack(),this.get("tooltipDataItem")||this.updateLegendValue(void 0)),(this.isDirty("vcx")||this.isDirty("vcy"))&&this._markStakedDirtyStack(),this._dataGrouped||(e._groupSeriesData(this),i._groupSeriesData(this),this._dataGrouped=!0),this._valuesDirty||this.isPrivateDirty("startIndex")||this.isPrivateDirty("endIndex")||this.isDirty("vcx")||this.isDirty("vcy")||this._stackDirty){let w=this.startIndex(),T=this.endIndex(),x=this.get("minBulletDistance",0);if(x>0&&r&&(this._showBullets=r.get("renderer").axisLength()/(T-w)>x),(this._psi!=w||this._pei!=T||this.isDirty("vcx")||this.isDirty("vcy")||this._stackDirty||this._valuesDirty)&&!this._selectionProcessed){this._selectionProcessed=!0;const C=this.get("vcx",1),K=this.get("vcy",1),ee=this.get("stacked",!1),te=this.getPrivate("outOfSelection");if(r===e||!r)if(i._calculateTotals(),this.setPrivateRaw("selectionMinY",void 0),this.setPrivateRaw("selectionMaxY",void 0),te)i.markDirtySelectionExtremes();else for(let $=w;$<T;$++)this.processYSelectionDataItem(this.dataItems[$],K,ee);if(r===i||!r)if(e._calculateTotals(),this.setPrivateRaw("selectionMinX",void 0),this.setPrivateRaw("selectionMaxX",void 0),te)i.markDirtySelectionExtremes();else for(let $=w;$<T;$++)this.processXSelectionDataItem(this.dataItems[$],C,ee);if((r===e||!r)&&"valueYWorking"!==this.get("valueYShow")){const $=this.getPrivate("selectionMinY");null!=$&&(this.setPrivateRaw("minY",$),i.markDirtyExtremes());const ae=this.getPrivate("selectionMaxY");null!=ae&&(this.setPrivateRaw("maxY",ae),i.markDirtyExtremes())}if((r===i||!r)&&"valueXWorking"!==this.get("valueXShow")){const $=this.getPrivate("selectionMinX");null!=$&&(this.setPrivateRaw("minX",$),i.markDirtyExtremes());const ae=this.getPrivate("selectionMaxX");null!=ae&&(this.setPrivateRaw("maxX",ae),e.markDirtyExtremes())}(this.isPrivateDirty("selectionMinX")||this.isPrivateDirty("selectionMaxX"))&&e.markDirtySelectionExtremes(),(this.isPrivateDirty("selectionMinY")||this.isPrivateDirty("selectionMaxY"))&&i.markDirtySelectionExtremes()}}}_makeRangeMask(){if(this.axisRanges.length>0){let e=this._mainContainerMask;null==e&&(e=this.children.push(M.T.new(this._root,{})),this._mainContainerMask=e,e.set("draw",(i,r)=>{const o=this.parent;if(o){const c=this._root.container.width(),m=this._root.container.height();i.moveTo(-c,-m),i.lineTo(-c,2*m),i.lineTo(2*c,2*m),i.lineTo(2*c,-m),i.lineTo(-c,-m),this.axisRanges.each(p=>{const _=p.axisDataItem.get("axisFill");if(o&&_){let w=_.get("draw");w&&w(i,r)}})}this.mainContainer._display.mask=e._display})),e.markDirty(),e._markDirtyKey("fill")}else this.mainContainer._display.mask=null}_updateChildren(){super._updateChildren(),this._x=this.x(),this._y=this.y(),this._makeRangeMask()}_stack(){const e=this.chart;if(e){const i=e.series.indexOf(this);if(this._couldStackTo=[],i>0){let r;for(let o=i-1;o>=0&&(r=e.series.getIndex(o),r.get("xAxis")!==this.get("xAxis")||r.get("yAxis")!==this.get("yAxis")||r.className!==this.className||(this._couldStackTo.push(r),r.get("stacked")));o--);}this._stackDataItems()}}_unstack(){z.each(this._reallyStackedTo,(e,i)=>{delete i._stackedSeries[this.uid]}),this._reallyStackedTo={},v.each(this.dataItems,e=>{e.setRaw("stackToItemY",void 0),e.setRaw("stackToItemX",void 0)})}_stackDataItems(){const e=this.get("baseAxis"),i=this.get("xAxis"),r=this.get("yAxis");let o,c;e===i?(o="valueY",c="stackToItemY"):e===r&&(o="valueX",c="stackToItemX");let m=this._couldStackTo.length,p=0;const _=this.get("stackToNegative");this._reallyStackedTo={},v.each(this.dataItems,w=>{for(let T=0;T<m;T++){let x=this._couldStackTo[T],C=x.dataItems[p],K=w.get(o);if(C){let ee=C.get(o);if(_){if(!R.isNumber(K))break;if(R.isNumber(ee)){if(K>=0&&ee>=0){w.setRaw(c,C),this._reallyStackedTo[x.uid]=x,x._stackedSeries[this.uid]=this;break}if(K<0&&ee<0){w.setRaw(c,C),this._reallyStackedTo[x.uid]=x,x._stackedSeries[this.uid]=this;break}}}else if(R.isNumber(K)&&R.isNumber(ee)){w.setRaw(c,C),this._reallyStackedTo[x.uid]=x,x._stackedSeries[this.uid]=this;break}}}p++})}processXSelectionDataItem(e,i,r){v.each(this.__valueXShowFields,o=>{let c=e.get(o);null!=c&&(r&&(c+=this.getStackedXValueWorking(e,o)),this._min("selectionMinX",c),this._max("selectionMaxX",c*i))})}processYSelectionDataItem(e,i,r){v.each(this.__valueYShowFields,o=>{let c=e.get(o);null!=c&&(r&&(c+=this.getStackedYValueWorking(e,o)),this._min("selectionMinY",c),this._max("selectionMaxY",c*i))})}getStackedYValueWorking(e,i){const r=e.get("stackToItemY");if(r){const o=r.component;return r.get(i,0)*o.get("vcy",1)+this.getStackedYValueWorking(r,i)}return 0}getStackedXValueWorking(e,i){const r=e.get("stackToItemX");if(r){const o=r.component;return r.get(i,0)*o.get("vcx",1)+this.getStackedXValueWorking(r,i)}return 0}getStackedYValue(e,i){const r=e.get("stackToItemY");return r?r.get(i,0)+this.getStackedYValue(r,i):0}getStackedXValue(e,i){const r=e.get("stackToItemX");return r?r.get(i,0)+this.getStackedXValue(r,i):0}createLegendMarker(e){this.updateLegendMarker()}_markDirtyAxes(){this._axesDirty=!0,this.markDirty()}_markDataSetDirty(){this._afterDataChange(),this._valuesDirty=!0,this._dataProcessed=!1,this._aggregatesCalculated=!1,this.markDirty()}_clearDirty(){super._clearDirty(),this._axesDirty=!1,this._selectionProcessed=!1,this._stackDirty=!1,this._dataProcessed=!1}_positionBullet(e){let i=e.get("sprite");if(i){let r=i.dataItem,o=e.get("locationX",r.get("locationX",.5)),c=e.get("locationY",r.get("locationY",.5)),m=this.get("xAxis"),p=this.get("yAxis");const _=m.getDataItemPositionX(r,this._xField,o,this.get("vcx",1)),w=p.getDataItemPositionY(r,this._yField,c,this.get("vcy",1));let T=this.getPoint(_,w),x=r.get("left",T.x),C=r.get("right",T.x),K=r.get("top",T.y),ee=r.get("bottom",T.y);if(this._shouldShowBullet(_,w)){e.getPrivate("hidden")?i.setPrivate("visible",!1):i.setPrivate("visible",!0);let te=C-x,$=ee-K;i.isType("Label")&&(i.setPrivate("maxWidth",Math.abs(te)),i.setPrivate("maxHeight",Math.abs($)));let ge=ee-$*c;i.set("x",x+te*o),i.set("y",ge)}else i.setPrivate("visible",!1)}}_shouldShowBullet(e,i){return this._showBullets}setDataSet(e){if(this._dataSets[e]){this._handleDataSetChange(),this._dataItems=this._dataSets[e],this._markDataSetDirty(),this._dataSetId=e;const i="datasetchanged";this.events.isEnabled(i)&&this.events.dispatch(i,{type:i,target:this,id:e})}}_handleDataSetChange(){this.bullets.length>0&&v.each(this._dataItems,e=>{let i=e.bullets;i&&v.each(i,r=>{if(r){let o=r.get("sprite");o&&o.setPrivate("visible",!1)}})}),this._selectionProcessed=!1}show(e){const i=Object.create(null,{show:{get:()=>super.show}});return(0,We.mG)(this,void 0,void 0,function*(){this._fixVC();let r=[];r.push(i.show.call(this,e).then(()=>{this._isShowing=!1;let o=this.get("xAxis"),c=this.get("yAxis"),m=this.get("baseAxis");c!==m&&c.markDirtySelectionExtremes(),o!==m&&o.markDirtySelectionExtremes()})),r.push(this.bulletsContainer.show(e)),r.push(this._sequencedShowHide(!0,e)),yield Promise.all(r)})}hide(e){const i=Object.create(null,{hide:{get:()=>super.hide}});return(0,We.mG)(this,void 0,void 0,function*(){this._fixVC();let r=[];r.push(i.hide.call(this,e).then(()=>{this._isHiding=!1})),r.push(this.bulletsContainer.hide(e)),r.push(this._sequencedShowHide(!1,e)),yield Promise.all(r)})}showDataItem(e,i){const r=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return(0,We.mG)(this,void 0,void 0,function*(){const o=[r.showDataItem.call(this,e,i)];R.isNumber(i)||(i=this.get("stateAnimationDuration",0));const c=this.get("stateAnimationEasing");v.each(this._valueFields,m=>{o.push(e.animate({key:m+"Working",to:e.get(m),duration:i,easing:c}).waitForStop())}),yield Promise.all(o)})}hideDataItem(e,i){const r=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return(0,We.mG)(this,void 0,void 0,function*(){const o=[r.hideDataItem.call(this,e,i)],c=this.states.create("hidden",{});R.isNumber(i)||(i=c.get("stateAnimationDuration",this.get("stateAnimationDuration",0)));const m=c.get("stateAnimationEasing",this.get("stateAnimationEasing")),p=this.get("xAxis"),_=this.get("yAxis"),w=this.get("baseAxis"),T=this.get("stacked");if((w===p||!w)&&v.each(this._valueYFields,x=>{let C=_.getPrivate("min"),K=_.baseValue();R.isNumber(C)&&C>K&&(K=C),T&&(K=0),null!=e.get(x)&&o.push(e.animate({key:x+"Working",to:K,duration:i,easing:m}).waitForStop())}),w===_||!w){let x=p.getPrivate("min"),C=p.baseValue();R.isNumber(x)&&x>C&&(C=x),T&&(C=0),v.each(this._valueXFields,K=>{null!=e.get(K)&&o.push(e.animate({key:K+"Working",to:C,duration:i,easing:m}).waitForStop())})}yield Promise.all(o)})}_markDirtyStack(){this._stackDirty=!0,this.markDirty(),this._markStakedDirtyStack()}_markStakedDirtyStack(){const e=this._stackedSeries;e&&z.each(e,(i,r)=>{r._stackDirty||r._markDirtyStack()})}_afterChanged(){super._afterChanged(),this._skipped&&(this._markDirtyAxes(),this._skipped=!1)}showDataItemTooltip(e){this.updateLegendMarker(e),this.updateLegendValue(e);const i=this.get("tooltip");if(i)if(this.isHidden())this.hideTooltip();else if(i._setDataItem(e),e){let r=this.get("locationX",0),o=this.get("locationY",1),c=e.get("locationX",r),m=e.get("locationY",o);const p=this.get("xAxis"),_=this.get("yAxis"),w=this.get("vcx",1),T=this.get("vcy",1),x=p.getDataItemPositionX(e,this._tooltipFieldX,this._aLocationX0+(this._aLocationX1-this._aLocationX0)*c,w),C=_.getDataItemPositionY(e,this._tooltipFieldY,this._aLocationY0+(this._aLocationY1-this._aLocationY0)*m,T),K=this.getPoint(x,C);let ee=!0;if(v.each(this._valueFields,te=>{null==e.get(te)&&(ee=!1)}),ee){const te=this.chart;te&&te.inPlot(K)?(i.label.text.markDirtyText(),i.set("tooltipTarget",this._getTooltipTarget(e)),i.set("pointTo",this._display.toGlobal({x:K.x,y:K.y}))):i._setDataItem(void 0)}else i._setDataItem(void 0)}}hideTooltip(){const e=this.get("tooltip");return e&&e.set("tooltipTarget",this),super.hideTooltip()}_getTooltipTarget(e){if("bullet"==this.get("seriesTooltipTarget")){const i=e.bullets;if(i&&i.length>0){const o=i[0].get("sprite");if(o)return o}}return this}updateLegendValue(e){const i=this.get("legendDataItem");if(i){const r=i.get("label");if(r){let c="";e?(r._setDataItem(e),c=this.get("legendLabelText",r.get("text",this.get("name","")))):(r._setDataItem(this._emptyDataItem),c=this.get("legendRangeLabelText",this.get("legendLabelText",r.get("text",this.get("name",""))))),r.set("text",c)}const o=i.get("valueLabel");if(o){let c="";e?(o._setDataItem(e),c=this.get("legendValueText",o.get("text",""))):(o._setDataItem(this._emptyDataItem),c=this.get("legendRangeValueText",o.get("text",""))),o.set("text",c)}}}_getItemReaderLabel(){let e="X: {"+this._xField;return this.get("xAxis").isType("DateAxis")&&(e+=".formatDate()"),e+="}; Y: {"+this._yField,this.get("yAxis").isType("DateAxis")&&(e+=".formatDate()"),e+="}",e}getPoint(e,i){let r=this.get("xAxis").get("renderer").positionToCoordinate(e),o=this.get("yAxis").get("renderer").positionToCoordinate(i),c=999999999;return o<-c&&(o=-c),o>c&&(o=c),r<-c&&(r=-c),r>c&&(r=c),{x:r,y:o}}_shouldInclude(e){return!0}handleCursorHide(){this.hideTooltip(),this.updateLegendValue(void 0),this.updateLegendMarker(void 0)}_afterDataChange(){super._afterDataChange(),this.get("xAxis")._markDirtyKey("start"),this.get("yAxis")._markDirtyKey("start"),this.resetExtremes()}resetExtremes(){this.setPrivate("selectionMinX",void 0),this.setPrivate("selectionMaxX",void 0),this.setPrivate("selectionMinY",void 0),this.setPrivate("selectionMaxY",void 0),this.setPrivate("minX",void 0),this.setPrivate("minY",void 0),this.setPrivate("maxX",void 0),this.setPrivate("maxY",void 0)}createAxisRange(e){return this.axisRanges.push({axisDataItem:e})}get mainDataItems(){return this._mainDataItems}}Object.defineProperty(dt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"XYSeries"}),Object.defineProperty(dt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:xt.F.classNames.concat([dt.className])});class Qe extends dt{constructor(){super(...arguments),Object.defineProperty(this,"_ph",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_pw",{enumerable:!0,configurable:!0,writable:!0,value:0})}_makeGraphics(e,i){return this.makeColumn(i,e)}_makeFieldNames(){super._makeFieldNames();const e=this.get("xAxis"),i=this.get("yAxis"),r="CategoryAxis",o="ValueAxis";e.isType(r)&&(this.get("openCategoryXField")||(this._xOpenField=this._xField)),e.isType(o)&&(this.get("openValueXField")||(this._xOpenField=this._xField)),i.isType(r)&&(this.get("openCategoryYField")||(this._yOpenField=this._yField)),i.isType(o)&&(this.get("openValueYField")||(this._yOpenField=this._yField))}_prepareChildren(){super._prepareChildren();const e=this.get("xAxis"),i=this.get("yAxis"),r=this.dataItems.length,o=Math.max(0,this.startIndex()-2),c=Math.min(this.endIndex()+2,r-1);if(e.inited&&i.inited)for(let m=o;m<=c;m++)this._createGraphics(this.dataItems[m])}_updateChildren(){const e=this.chart;e&&(this._ph=e.plotContainer.height(),this._pw=e.plotContainer.width());const i=this.get("xAxis"),r=this.get("yAxis"),o=this.get("baseAxis"),c=this.columns.template;this.isDirty("fill")&&null==c.get("fill")&&c.set("fill",this.get("fill")),this.isDirty("stroke")&&null==c.get("stroke")&&c.set("stroke",this.get("stroke"));let m=0,p=0,_=0;v.each(o.series,ae=>{if(ae instanceof Qe){const ge=ae.get("stacked");ge&&0==_&&p++,!ge&&ae.get("clustered")&&p++}ae===this&&(m=p-1),_++}),this.get("clustered")||(m=0,p=1),0===p&&(p=1,m=0);const w=i.get("renderer"),T=r.get("renderer"),x="cellStartLocation",C="cellEndLocation",K=w.get(x,0),ee=w.get(C,1),te=T.get(x,0),$=T.get(C,1);if(this._aLocationX0=K+m/p*(ee-K),this._aLocationX1=K+(m+1)/p*(ee-K),this._aLocationY0=te+m/p*($-te),this._aLocationY1=te+(m+1)/p*($-te),i.inited&&r.inited){if(this._axesDirty||this._valuesDirty||this._stackDirty||this.isDirty("vcx")||this.isDirty("vcy")||this._sizeDirty){const ae=this.dataItems.length;let ge=Math.max(0,this.startIndex()-2),oe=Math.min(this.endIndex()+2,ae-1);for(let ye=0;ye<ge;ye++)this._toggleColumn(this.dataItems[ye],!1);let fe=this.dataItems[ge];for(let ye=ge;ye<=oe;ye++){let we=this.dataItems[ye];if(null!=we.get("valueX")&&null!=we.get("valueY")){if(fe=we,ye>0&&ge>0)for(let Ze=ye-1;Ze>=0;Ze--){let Fe=this.dataItems[Ze];if(null!=Fe.get("valueX")&&null!=Fe.get("valueY")){fe=Fe;break}}break}this._toggleColumn(we,!1)}for(let ye=ge;ye<=oe;ye++){let we=this.dataItems[ye];this._updateGraphics(we,fe),null!=we.get("valueX")&&null!=we.get("valueY")&&(fe=we)}for(let ye=oe+1;ye<ae;ye++)this._toggleColumn(this.dataItems[ye],!1)}}else this._skipped=!0;this.updateLegendMarker(this.get("tooltipDataItem")),super._updateChildren()}_createGraphics(e){let i=e.get("graphics");if(!i){i=this._makeGraphics(this.columns,e),e.set("graphics",i),i._setDataItem(e);const r=e.get("legendDataItem");if(r){const o=r.get("markerRectangle");o&&o.setAll({fill:i.get("fill"),stroke:i.get("stroke")})}this.axisRanges.each(o=>{const c=o.container,m=e.get("rangeGraphics",[]);e.set("rangeGraphics",m);const p=this._makeGraphics(o.columns,e);m.push(p),p.setPrivate("list",o.columns),c.children.push(p)})}}_updateGraphics(e,i){let r=e.get("graphics");const o=this._xField,c=this._yField,m=e.get(o),p=e.get(c);if(null!=m&&null!=p){const _=this._xOpenField,w=this._yOpenField,T=this.get("locationX",e.get("locationX",.5)),x=this.get("locationY",e.get("locationY",.5)),C=this.get("openLocationX",e.get("openLocationX",T)),K=this.get("openLocationY",e.get("openLocationY",x)),ee=r.get("width"),te=r.get("height"),$=this.get("stacked"),ae=this.get("xAxis"),ge=this.get("yAxis"),oe=this.get("baseAxis"),fe=ae.get("start"),ye=ae.get("end"),we=ge.get("start"),Ze=ge.get("end");let Fe,st,Be,qe,rt=this.get("vcy",1),Bt=this.get("vcx",1),It=!1,Lt=!1;if(ge.isType("CategoryAxis")&&ae.isType("CategoryAxis")){let Je=this._aLocationX0+C-.5,nt=this._aLocationX1+T-.5;if(ee instanceof G.gG){let et=(nt-Je)*(1-ee.value)/2;Je+=et,nt-=et}if(Fe=ae.getDataItemPositionX(e,_,Je,Bt),st=ae.getDataItemPositionX(e,o,nt,Bt),Je=this._aLocationY0+K-.5,nt=this._aLocationY1+x-.5,te instanceof G.gG){let et=(nt-Je)*(1-te.value)/2;Je+=et,nt-=et}Be=ge.getDataItemPositionY(e,w,Je,rt),qe=ge.getDataItemPositionY(e,c,nt,rt),e.setRaw("point",{x:Fe+(st-Fe)/2,y:Be+(qe-Be)/2})}else if(ae===oe){let Je=this._aLocationX0+C-.5,nt=this._aLocationX1+T-.5;if(ee instanceof G.gG){let et=(nt-Je)*(1-ee.value)/2;Je+=et,nt-=et}if(Fe=ae.getDataItemPositionX(e,_,Je,Bt),st=ae.getDataItemPositionX(e,o,nt,Bt),Be=ge.getDataItemPositionY(e,c,x,rt),this._yOpenField!==this._yField)qe=ge.getDataItemPositionY(e,w,K,rt);else if($){let et=e.get("stackToItemY");qe=et?ge.getDataItemPositionY(et,c,K,et.component.get("vcy")):ge.basePosition()}else qe=ge.basePosition();e.setRaw("point",{x:Fe+(st-Fe)/2,y:Be}),Lt=!0}else if(ge===oe){let Je=this._aLocationY0+K-.5,nt=this._aLocationY1+x-.5;if(te instanceof G.gG){let et=(nt-Je)*(1-te.value)/2;Je+=et,nt-=et}if(Be=ge.getDataItemPositionY(e,w,Je,rt),qe=ge.getDataItemPositionY(e,c,nt,rt),st=ae.getDataItemPositionX(e,o,T,Bt),this._xOpenField!==this._xField)Fe=ae.getDataItemPositionX(e,_,C,Bt);else if($){let et=e.get("stackToItemX");Fe=et?ae.getDataItemPositionX(et,o,C,et.component.get("vcx")):ae.basePosition()}else Fe=ae.basePosition();It=!0,e.setRaw("point",{x:st,y:Be+(qe-Be)/2})}this._updateSeriesGraphics(e,r,Fe,st,Be,qe,It,Lt),Fe<fe&&st<fe||Fe>ye&&st>ye||Be<we&&qe<=we||Be>=Ze&&qe>Ze||R.isNaN(Fe)||R.isNaN(Be)?this._toggleColumn(e,!1):this._toggleColumn(e,!0);let mt=e.get("rangeGraphics");mt&&v.each(mt,Je=>{this._updateSeriesGraphics(e,Je,Fe,st,Be,qe,It,Lt)}),this._applyGraphicsStates(e,i)}}_updateSeriesGraphics(e,i,r,o,c,m,p,_){const w=i.get("width"),T=i.get("height"),x=i.get("maxWidth"),C=i.get("maxHeight"),K=this.getPoint(r,c),ee=this.getPoint(o,m),te=e.get("point");if(te){const $=this.getPoint(te.x,te.y);te.x=$.x+this._x,te.y=$.y+this._y}if(r=K.x,o=ee.x,c=K.y,m=ee.y,R.isNumber(w)){const $=(o-r-w)/2;r+=$,o-=$}if(R.isNumber(x)&&x<Math.abs(o-r)){const $=(o-r-x)/2;r+=$,o-=$}if(R.isNumber(T)){const $=(m-c-T)/2;c+=$,m-=$}if(R.isNumber(C)&&C<Math.abs(m-c)){const $=(m-c-C)/2;c+=$,m-=$}this.get("adjustBulletPosition")&&(p&&(o=Math.min(Math.max(0,o),this._pw),r=Math.min(Math.max(0,r),this._pw)),_&&(c=Math.min(Math.max(0,c),this._ph),m=Math.min(Math.max(0,m),this._ph))),e.setRaw("left",r),e.setRaw("right",o),e.setRaw("top",c),e.setRaw("bottom",m),i.setPrivate("width",o-r),i.setPrivate("height",m-c),i.set("x",r),i.set("y",m-(m-c))}_handleDataSetChange(){super._handleDataSetChange(),v.each(this._dataItems,e=>{this._toggleColumn(e,!1)})}_applyGraphicsStates(e,i){const r=e.get("graphics"),o=r.states.lookup("dropFromOpen"),c=r.states.lookup("riseFromOpen"),m=r.states.lookup("dropFromPrevious"),p=r.states.lookup("riseFromPrevious");if(o||m||c||p){const _=this.get("xAxis"),w=this.get("yAxis"),T=this.get("baseAxis");let x,C,K;T===_&&w.isType("ValueAxis")?(x=e.get(this._yOpenField),C=e.get(this._yField),K=i.get(this._yField)):T===w&&_.isType("ValueAxis")&&(x=e.get(this._xOpenField),C=e.get(this._xField),K=i.get(this._xField)),R.isNumber(x)&&R.isNumber(C)&&(C<x?o&&o.apply():c&&c.apply(),R.isNumber(K)&&(C<K?m&&m.apply():p&&p.apply()))}}disposeDataItem(e){super.disposeDataItem(e);const i=e.get("graphics");i&&(this.columns.removeValue(i),i.dispose());const r=e.get("rangeGraphics");r&&v.each(r,o=>{const c=o.getPrivate("list");c&&c.removeValue(o),o.dispose()})}hideDataItem(e,i){const r=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return(0,We.mG)(this,void 0,void 0,function*(){const o=[r.hideDataItem.call(this,e,i)],c=e.get("graphics");c&&o.push(c.hide(i));const m=e.get("rangeGraphics");m&&v.each(m,p=>{o.push(p.hide(i))}),yield Promise.all(o)})}_toggleColumn(e,i){const r=e.get("graphics");r&&r.setPrivate("visible",i);const o=e.get("rangeGraphics");o&&v.each(o,m=>{m.setPrivate("visible",i)});const c=e.bullets;c&&v.each(c,m=>{m.setPrivate("hidden",!i)})}showDataItem(e,i){const r=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return(0,We.mG)(this,void 0,void 0,function*(){const o=[r.showDataItem.call(this,e,i)],c=e.get("graphics");c&&o.push(c.show(i));const m=e.get("rangeGraphics");m&&v.each(m,p=>{o.push(p.show(i))}),yield Promise.all(o)})}updateLegendMarker(e){let i=this.get("legendDataItem");if(this.get("useLastColorForLegendMarker")&&!e){const r=this.dataItems[this.endIndex()-1];r&&(e=r)}if(i){let r=this.columns.template;if(e){let c=e.get("graphics");c&&(r=c)}const o=i.get("markerRectangle");o&&(i.get("itemContainer").get("disabled")||v.each(M.u,c=>{o.set(c,r.get(c,this.get(c)))}))}}_getTooltipTarget(e){return"bullet"==this.get("seriesTooltipTarget")?super._getTooltipTarget(e):e.get("graphics")||this}}Object.defineProperty(Qe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"BaseColumnSeries"}),Object.defineProperty(Qe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:dt.classNames.concat([Qe.className])});class gt extends pe.w{constructor(){super(...arguments),Object.defineProperty(this,"_series",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_isPanning",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"labelsContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(B.W.new(this._root,{}))}),Object.defineProperty(this,"gridContainer",{enumerable:!0,configurable:!0,writable:!0,value:B.W.new(this._root,{width:G.AQ,height:G.AQ})}),Object.defineProperty(this,"topGridContainer",{enumerable:!0,configurable:!0,writable:!0,value:B.W.new(this._root,{width:G.AQ,height:G.AQ})}),Object.defineProperty(this,"bulletsContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(B.W.new(this._root,{isMeasured:!1,width:G.AQ,height:G.AQ,position:"absolute"}))}),Object.defineProperty(this,"chart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rangesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_panStart",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_panEnd",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_sAnimation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_eAnimation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_skipSync",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"axisRanges",{enumerable:!0,configurable:!0,writable:!0,value:new P.aV}),Object.defineProperty(this,"_seriesAxisRanges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"ghostLabel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cursorPosition",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"_snapToSeries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_seriesValuesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"axisHeader",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(B.W.new(this._root,{themeTags:["axis","header"],position:"absolute",background:ne.A.new(this._root,{themeTags:["header","background"],fill:this._root.interfaceColors.get("background")})}))}),Object.defineProperty(this,"_bullets",{enumerable:!0,configurable:!0,writable:!0,value:{}})}_dispose(){this.gridContainer.dispose(),this.topGridContainer.dispose(),this.bulletsContainer.dispose(),this.labelsContainer.dispose(),this.axisHeader.dispose(),super._dispose()}_afterNew(){super._afterNew(),this.setPrivate("updateScrollbar",!0),this._disposers.push(this.axisRanges.events.onAll(i=>{if("clear"===i.type)v.each(i.oldValues,r=>{this.disposeDataItem(r)});else if("push"===i.type)this._processAxisRange(i.newValue,["range"]);else if("setIndex"===i.type)this._processAxisRange(i.newValue,["range"]);else if("insertIndex"===i.type)this._processAxisRange(i.newValue,["range"]);else if("removeIndex"===i.type)this.disposeDataItem(i.oldValue);else{if("moveIndex"!==i.type)throw new Error("Unknown IStreamEvent type");this._processAxisRange(i.value,["range"])}}));const e=this.get("renderer");e&&(e.axis=this,e.processAxis()),this.children.push(e),this.ghostLabel=e.makeLabel(new pe.z(this,void 0,{}),[]),this.ghostLabel.adapters.disable("text"),this.ghostLabel.setAll({opacity:0,tooltipText:void 0,tooltipHTML:void 0,interactive:!1}),this.ghostLabel.events.disable()}_updateFinals(e,i){}zoom(e,i,r,o){if(this._updateFinals(e,i),this.get("start")!==e||this.get("end")!=i){let c=this._sAnimation,m=this._eAnimation,p=this.get("maxDeviation",.5)*Math.min(1,i-e);e<-p&&(e=-p),i>1+p&&(i=1+p),e>i&&([e,i]=[i,e]),R.isNumber(r)||(r=this.get("interpolationDuration",0)),o||(o="end");let _=this.getPrivate("maxZoomFactor",this.get("maxZoomFactor",100)),w=_;1===i&&0!==e&&(o=e<this.get("start")?"start":"end"),0===e&&1!==i&&(o=i>this.get("end")?"end":"start");let T=this.get("minZoomCount"),x=this.get("maxZoomCount");R.isNumber(T)&&(_=w/T);let C=1;if(R.isNumber(x)&&(C=w/x),"start"===o?(x>0&&1/(i-e)<C&&(i=e+1/C),1/(i-e)>_&&(i=e+1/_),i>1&&i-e<1/_&&(e=i-1/_)):(x>0&&1/(i-e)<C&&(e=i-1/C),1/(i-e)>_&&(e=i-1/_),e<0&&i-e<1/_&&(i=e+1/_)),1/(i-e)>_&&(i=e+1/_),1/(i-e)>_&&(e=i-1/_),null!=x&&null!=T&&e==this.get("start")&&i==this.get("end")){const K=this.chart;K&&K._handleAxisSelection(this,!0)}if((c&&c.playing&&c.to==e||this.get("start")==e)&&(m&&m.playing&&m.to==i||this.get("end")==i))return;if(r>0){let ee,te,K=this.get("interpolationEasing");if(this.get("start")!=e&&(ee=this.animate({key:"start",to:e,duration:r,easing:K})),this.get("end")!=i&&(te=this.animate({key:"end",to:i,duration:r,easing:K})),this._sAnimation=ee,this._eAnimation=te,ee)return ee;if(te)return te}else this.set("start",e),this.set("end",i),this._root.events.once("frameended",()=>{this._markDirtyKey("start"),this._root._markDirty()})}else this._sAnimation&&this._sAnimation.stop(),this._eAnimation&&this._eAnimation.stop()}get series(){return this._series}_processAxisRange(e,i){e.setRaw("isRange",!0),this._createAssets(e,i),this._rangesDirty=!0,this._prepareDataItem(e);const r=e.get("above"),o=this.topGridContainer,c=e.get("grid");r&&c&&o.children.moveValue(c);const m=e.get("axisFill");r&&m&&o.children.moveValue(m)}_prepareDataItem(e,i){}markDirtyExtremes(){}markDirtySelectionExtremes(){}_calculateTotals(){}_updateAxisRanges(){this._bullets={},this.axisRanges.each(e=>{this._prepareDataItem(e)}),v.each(this._seriesAxisRanges,e=>{this._prepareDataItem(e)})}_prepareChildren(){if(super._prepareChildren(),this.get("fixAxisSize")?this.ghostLabel.set("visible",!0):this.ghostLabel.set("visible",!1),this.isDirty("start")||this.isDirty("end")){this.chart._updateCursor();let i=this.get("start",0),r=this.get("end",1),o=this.get("maxDeviation",.5)*Math.min(1,r-i);if(i<-o){let c=i+o;i=-o,this.setRaw("start",i),this.isDirty("end")&&this.setRaw("end",r-c)}if(r>1+o){let c=r-1-o;r=1+o,this.setRaw("end",r),this.isDirty("start")&&this.setRaw("start",i-c)}}const e=this.get("renderer");if(e._start=this.get("start"),e._end=this.get("end"),e._inversed=e.get("inversed",!1),e._axisLength=e.axisLength()/(e._end-e._start),e._updateLC(),this.isDirty("tooltip")){const i=this.get("tooltip");if(i){const r=e.get("themeTags");i.addTag("axis"),i.addTag(this.className.toLowerCase()),i._applyThemes(),r&&(i.set("themeTags",N.mergeTags(i.get("themeTags"),r)),i.label._applyThemes())}}}_updateTooltipBounds(){const e=this.get("tooltip");e&&this.get("renderer").updateTooltipBounds(e)}_updateBounds(){super._updateBounds(),this._updateTooltipBounds()}processChart(e){this.chart=e,this.get("renderer").chart=e,e.gridContainer.children.push(this.gridContainer),e.topGridContainer.children.push(this.topGridContainer),e.axisHeadersContainer.children.push(this.axisHeader),this.on("start",()=>{e._handleAxisSelection(this)}),this.on("end",()=>{e._handleAxisSelection(this)}),e.plotContainer.onPrivate("width",()=>{this.markDirtySize()}),e.plotContainer.onPrivate("height",()=>{this.markDirtySize()}),e.processAxis(this)}hideDataItem(e){return this._toggleDataItem(e,!1),super.hideDataItem(e)}showDataItem(e){return this._toggleDataItem(e,!0),super.showDataItem(e)}_toggleDataItem(e,i){const r=e.get("label");r&&r.setPrivate("visible",i);const o=e.get("grid");o&&o.setPrivate("visible",i);const c=e.get("tick");c&&c.setPrivate("visible",i);const m=e.get("axisFill");m&&m.setPrivate("visible",i);const p=e.get("bullet");if(p){const _=p.get("sprite");_&&_.setPrivate("visible",i)}}_createAssets(e,i){const r=this.get("renderer");e.get("label")||r.makeLabel(e,i),e.get("grid")||r.makeGrid(e,i),e.get("tick")||r.makeTick(e,i),e.get("axisFill")||r.makeAxisFill(e,i),this._processBullet(e)}_processBullet(e){let i=e.get("bullet"),r=this.get("bullet");if(!i&&r&&!e.get("isRange")&&(i=r(this._root,this,e)),i){i.axis=this;const o=i.get("sprite");o&&(o._setDataItem(e),e.setRaw("bullet",i),o.parent||this.bulletsContainer.children.push(o))}}_afterChanged(){super._afterChanged();const e=this.chart;e&&(e._updateChartLayout(),e.axisHeadersContainer.markDirtySize()),this.get("renderer")._updatePositions()}disposeDataItem(e){super.disposeDataItem(e);const i=this.get("renderer"),r=e.get("label");r&&(i.labels.removeValue(r),r.dispose());const o=e.get("tick");o&&(i.ticks.removeValue(o),o.dispose());const c=e.get("grid");c&&(i.grid.removeValue(c),c.dispose());const m=e.get("axisFill");m&&(i.axisFills.removeValue(m),m.dispose());const p=e.get("bullet");p&&p.dispose()}_updateGhost(){this.setPrivate("cellWidth",this.getCellWidthPosition()*this.get("renderer").axisLength());const e=this.ghostLabel;if(!e.isHidden()){const o=e.localBounds(),c=o.right-o.left;let m=e.get("text");v.each(this.dataItems,p=>{const _=p.get("label");if(_&&!_.isHidden()){const w=_.localBounds();w.right-w.left>c&&(m=_.text._getText())}}),e.set("text",m)}let i=this.get("start",0),r=this.get("end",1);this.get("renderer").updateLabel(e,i+.5*(r-i))}_handleCursorPosition(e,i){e=this.get("renderer").toAxisPosition(e),this._cursorPosition=e,this._snapToSeries=i,this.updateTooltip()}updateTooltip(){const e=this._snapToSeries;let i=this._cursorPosition;const r=this.get("tooltip"),o=this.get("renderer");R.isNumber(i)&&(v.each(this.series,c=>{if(c.get("baseAxis")===this){const m=this.getSeriesItem(c,i,this.get("tooltipLocation"));c.setRaw("tooltipDataItem",m),e&&-1!=e.indexOf(c)?(c.updateLegendMarker(m),c.updateLegendValue(m)):c.showDataItemTooltip(m)}}),r&&(o.updateTooltipBounds(r),this.get("snapTooltip")&&(i=this.roundAxisPosition(i,this.get("tooltipLocation",.5))),R.isNaN(i)?r.hide(0):(this.setPrivateRaw("tooltipPosition",i),this._updateTooltipText(r,i),o.positionTooltip(r,i),i<this.get("start")||i>this.get("end")?r.hide(0):r.show(0))))}_updateTooltipText(e,i){e.label.set("text",this.getTooltipText(i))}roundAxisPosition(e,i){return e}handleCursorShow(){let e=this.get("tooltip");e&&e.show()}handleCursorHide(){let e=this.get("tooltip");e&&e.hide()}processSeriesDataItem(e,i){}_clearDirty(){super._clearDirty(),this._sizeDirty=!1,this._rangesDirty=!1}coordinateToPosition(e){const i=this.get("renderer");return i.toAxisPosition(e/i.axisLength())}toAxisPosition(e){return this.get("renderer").toAxisPosition(e)}fixPosition(e){return this.get("renderer").fixPosition(e)}shouldGap(e,i,r,o){return!1}createAxisRange(e){return this.axisRanges.push(e)}_groupSeriesData(e){}getCellWidthPosition(){return.05}}Object.defineProperty(gt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Axis"}),Object.defineProperty(gt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:pe.w.classNames.concat([gt.className])});var pt=F(8018);class Ue extends gt{constructor(){super(...arguments),Object.defineProperty(this,"_frequency",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_itemMap",{enumerable:!0,configurable:!0,writable:!0,value:{}})}_afterNew(){this._settings.themeTags=N.mergeTags(this._settings.themeTags,["axis"]),this.fields.push("category"),this.setPrivateRaw("name","category"),this.addTag("category"),super._afterNew()}_prepareChildren(){super._prepareChildren();const e=this.dataItems.length;let i=0;this._valuesDirty&&(this._itemMap={},v.each(this.dataItems,r=>{r.setRaw("index",i),this._itemMap[r.get("category")]=r,i++}),this.setPrivateRaw("maxZoomFactor",e)),this.setPrivateRaw("startIndex",Math.max(Math.round(this.get("start",0)*e),0)),this.setPrivateRaw("endIndex",Math.min(Math.round(this.get("end",1)*e),e)),(this._sizeDirty||this._valuesDirty||this.isDirty("start")||this.isDirty("end")||this.isPrivateDirty("endIndex")||this.isPrivateDirty("startIndex")||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&this.dataItems.length>0&&(this._handleRangeChange(),this._prepareAxisItems(),this._updateAxisRanges())}_handleRangeChange(){v.each(this.series,e=>{let i=this.dataItems[this.startIndex()].get("category"),r=this.dataItems[this.endIndex()-1].get("category"),o=e.get("baseAxis"),c=e.get("xAxis"),m=e.get("yAxis");if(c instanceof Ue&&m instanceof Ue)e._markDirtyAxes();else if(o===this){let p,_,w=m;if(c===o?(e.get("categoryXField")&&(p="categoryX"),e.get("openCategoryXField")&&(_="openCategoryX")):m===o&&(e.get("categoryYField")&&(p="categoryY"),e.get("openCategoryYField")&&(_="openCategoryY"),w=c),"ValueAxis"==w.className&&(p||_)){let T,x;for(let te=0,$=e.dataItems.length;te<$;te++){let ae=e.dataItems[te];if(p&&ae.get(p)===i){T=ae;break}if(_&&ae.get(_)===i){T=ae;break}}for(let te=e.dataItems.length-1;te>=0;te--){let $=e.dataItems[te];if(p&&$.get(p)===r){x=$;break}if(_&&$.get(_)===r){x=$;break}}let C=0,K=e.dataItems.length;T&&(C=e.dataItems.indexOf(T)),x&&(K=e.dataItems.indexOf(x)+1),e.setPrivate("startIndex",C),e.setPrivate("endIndex",K);let ee=!1;for(let te=C;te<K;te++){const $=e.dataItems[te];if(v.each(e.__valueXShowFields,ae=>{null!=$.get(ae)&&(ee=!0)}),v.each(e.__valueYShowFields,ae=>{null!=$.get(ae)&&(ee=!0)}),ee)break}e.setPrivate("outOfSelection",!ee)}e._markDirtyAxes()}})}_prepareAxisItems(){const e=this.get("renderer"),i=this.dataItems.length;let r=this.startIndex();r>0&&r--;let o=this.endIndex();o<i&&o++;let c=e.axisLength()/Math.max(e.get("minGridDistance"),1/Number.MAX_SAFE_INTEGER),m=Math.max(1,Math.min(i,Math.ceil((o-r)/c)));r=Math.floor(r/m)*m,this._frequency=m;for(let _=0;_<i;_++)this.dataItems[_].hide();let p=this.dataItems[r].get("index",0);for(let _=r;_<o;_+=m){let w=this.dataItems[_];this._createAssets(w,[]),w.isHidden()&&w.show(),this._prepareDataItem(w,p,m),p++}this._updateGhost()}_prepareDataItem(e,i,r){let o=this.get("renderer"),c=e.get("categoryLocation",0),m=e.get("endCategoryLocation",1),p=e.get("index");R.isNumber(p)||(p=this.categoryToIndex(e.get("category")));let T,_=this.indexToPosition(p,c),w=e.get("endCategory");w?(T=this.categoryToIndex(w),R.isNumber(T)||(T=p)):T=p;let C,K,x=this.indexToPosition(T,m);C=e.get("isRange")?T:p+this._frequency-1,K=this.indexToPosition(C,m),o.updateLabel(e.get("label"),_,x,r),o.updateGrid(e.get("grid"),_,x),o.updateTick(e.get("tick"),_,x,r),o.updateFill(e.get("axisFill"),_,K),this._processBullet(e),o.updateBullet(e.get("bullet"),_,x);const ee=this.get("fillRule");ee&&ee(e,i)}startIndex(){let e=this.dataItems.length;return Math.min(Math.max(this.getPrivate("startIndex",0),0),e-1)}endIndex(){let e=this.dataItems.length;return Math.max(1,Math.min(this.getPrivate("endIndex",e),e))}baseValue(){}basePosition(){return 0}getX(e){let i=this._itemMap[e];return i?this._settings.renderer.positionToCoordinate(this.indexToPosition(i.get("index",0))):NaN}getY(e){let i=this._itemMap[e];return i?this._settings.renderer.positionToCoordinate(this.indexToPosition(i.get("index",0))):NaN}getDataItemPositionX(e,i,r,o){const c=e.get(i),m=this._itemMap[c];return m?this.indexToPosition(m.get("index",0),r):NaN}getDataItemCoordinateX(e,i,r,o){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionX(e,i,r,o))}getDataItemPositionY(e,i,r,o){const c=e.get(i),m=this._itemMap[c];return m?this.indexToPosition(m.get("index",0),r):NaN}getDataItemCoordinateY(e,i,r,o){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionY(e,i,r,o))}indexToPosition(e,i){R.isNumber(i)||(i=.5);let r=this.dataItems.length,o=this.get("startLocation",0);r-=o,r-=1-this.get("endLocation",1);let m=(e+i-o)/r,p=this.dataItems[e];return p&&(m+=p.get("deltaPosition",0)),m}categoryToIndex(e){let i=this._itemMap[e];return i?i.get("index"):NaN}dataItemToPosition(e){return this.indexToPosition(e.get("index"))}roundAxisPosition(e,i){return this.indexToPosition(this.axisPositionToIndex(e+=(.5-i)/this.dataItems.length),i)}axisPositionToIndex(e){let i=this.dataItems.length;return ce.fitToRange(Math.floor(e*i),0,i-1)}getTooltipText(e,i){const r=this.dataItems[this.axisPositionToIndex(e)];if(r){const o=r.get("label");if(o)return(0,pt.q)(o,this.get("tooltipText",""))}}_updateTooltipText(e,i){e._setDataItem(this.dataItems[this.axisPositionToIndex(i)]),e.label.text.markDirtyText()}getSeriesItem(e,i){if(this.dataItems.length>0){let r=this.getPrivate("name")+this.get("renderer").getPrivate("letter"),o=this.axisPositionToIndex(i),c=e.dataItems[o],m=this.dataItems[o],p=m.get("category");if(c&&m&&c.get(r)===p)return c;for(let _=0,w=e.dataItems.length;_<w;_++){let T=e.dataItems[_];if(T.get(r)===p)return T}}}zoomToIndexes(e,i,r){let o=this.dataItems.length;this.zoom(e/o,i/o,r)}zoomToCategories(e,i,r){this.zoomToIndexes(this.categoryToIndex(e),this.categoryToIndex(i)+1,r)}getCellWidthPosition(){return this._frequency/this.dataItems.length/(this.get("end",1)-this.get("start",0))}}Object.defineProperty(Ue,"className",{enumerable:!0,configurable:!0,writable:!0,value:"CategoryAxis"}),Object.defineProperty(Ue,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:gt.classNames.concat([Ue.className])});class zt extends Ue{constructor(){super(...arguments),Object.defineProperty(this,"_frequency",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_itemMap",{enumerable:!0,configurable:!0,writable:!0,value:{}})}_afterNew(){this._settings.themeTags=N.mergeTags(this._settings.themeTags,["axis"]),this.fields.push("category"),super._afterNew()}_prepareAxisItems(){this.setPrivateRaw("baseInterval",this.get("baseInterval"));const e=this.get("renderer"),i=this.dataItems.length;let r=this.startIndex();r>0&&r--;let o=this.endIndex();o<i&&o++;let c=e.axisLength()/Math.max(e.get("minGridDistance"),1/Number.MAX_SAFE_INTEGER),m=Math.min(i,Math.ceil((o-r)/c));r=Math.floor(r/m)*m,this._frequency=m;for(let fe=0;fe<i;fe++)this.dataItems[fe].hide();let p=Number(this.dataItems[r].get("category")),_=Number(this.dataItems[o-1].get("category")),w=_-p;o-r<c&&(w=_-p-((_-p)/this.baseDuration()-(o-r))*this.baseDuration());let T=he.chooseInterval(0,w,c,this.get("gridIntervals"));const x=he.getNextUnit(T.timeUnit),C=this.getPrivate("baseInterval");he.getIntervalDuration(T)<this.baseDuration()&&(T=Object.assign({},C));const K=this.get("dateFormats");let ae,ee=-1/0,te=-1/0,$=-1/0,ge=[],oe=!1;for(let fe=r;fe<o;fe++){let ye=this.dataItems[fe],we=ye.get("index"),Ze=!1,Fe=Number(ye.get("category")),st=new Date(Fe),Be=he.getUnitValue(st,T.timeUnit);ae=K[T.timeUnit];let qe=!1;"year"!=T.timeUnit&&"week"!=T.timeUnit&&x&&this.get("markUnitChange")&&R.isNumber(ee)&&he.checkChange(Fe,ee,x,this._root.utc)&&(ae=this.get("periodChangeDateFormats")[T.timeUnit],we-.5*m<te&&ge.pop(),ge.push({format:ae,dataItem:ye}),oe=!0,qe=!0,te=we,$=Be);let rt=!1;"day"===T.timeUnit||"week"===T.timeUnit?we-te>=m&&(rt=!0):Be%T.count==0&&Be!=$&&(rt=!0),!qe&&rt&&(we-.7*m<te&&oe&&(Ze=!0),Ze||(ge.push({format:ae,dataItem:ye}),te=we,$=Be),oe=!1),ee=Fe}if(ge.length>0){let fe=ge[0].dataItem.get("index",0);v.each(ge,ye=>{const we=ye.dataItem,Ze=ye.format;this._createAssets(we,[]),we.isHidden()&&we.show();let Fe=Number(we.get("category")),st=new Date(Fe);const Be=we.get("label");Be&&Be.set("text",this._root.dateFormatter.format(st,Ze)),fe++,this._prepareDataItem(we,fe,m)})}}baseDuration(){return he.getIntervalDuration(this.getPrivate("baseInterval"))}getTooltipText(e,i){let r=this.dataItems[this.axisPositionToIndex(e)];if(r){let o=this.get("dateFormats")[this.getPrivate("baseInterval").timeUnit];return this._root.dateFormatter.format(new Date(r.get("category",0)),this.get("tooltipDateFormat",o))}}_updateTooltipText(e,i){e.label.set("text",this.getTooltipText(i))}}Object.defineProperty(zt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"CategoryDateAxis"}),Object.defineProperty(zt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ue.classNames.concat([zt.className])});var Ie=F(8362);class Ve extends gt{constructor(){super(...arguments),Object.defineProperty(this,"_dirtyExtremes",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dirtySelectionExtremes",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_deltaMinMax",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_minReal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_maxReal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_baseValue",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_syncDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_minLogAdjusted",{enumerable:!0,configurable:!0,writable:!0,value:1})}markDirtyExtremes(){this._dirtyExtremes=!0,this.markDirty()}markDirtySelectionExtremes(){this._dirtySelectionExtremes=!0,this.markDirty()}_afterNew(){this._settings.themeTags=N.mergeTags(this._settings.themeTags,["axis"]),this.setPrivateRaw("name","value"),this.addTag("value"),super._afterNew()}_prepareChildren(){if(super._prepareChildren(),this.isDirty("syncWithAxis")){this._prevSettings.syncWithAxis&&this._syncDp&&this._syncDp.dispose();let i=this.get("syncWithAxis");i&&(this._syncDp=new Ie.FV([i.onPrivate("selectionMinFinal",()=>{this._dirtySelectionExtremes=!0}),i.onPrivate("selectionMaxFinal",()=>{this._dirtySelectionExtremes=!0})]))}(this._sizeDirty||this._dirtyExtremes||this._valuesDirty||this.isPrivateDirty("width")||this.isPrivateDirty("height")||this.isDirty("min")||this.isDirty("max")||this.isDirty("extraMin")||this.isDirty("extraMax")||this.isDirty("logarithmic")||this.isDirty("treatZeroAs")||this.isDirty("baseValue")||this.isDirty("strictMinMax")||this.isDirty("strictMinMaxSelection")||this.isDirty("maxPrecision")||this.isDirty("numberFormat"))&&(this._getMinMax(),this.ghostLabel.set("text",""),this._dirtyExtremes=!1),this._dirtySelectionExtremes&&!this._isPanning&&this.get("autoZoom",!0)&&(this._getSelectionMinMax(),this._dirtySelectionExtremes=!1),this._groupData(),(this._sizeDirty||this._valuesDirty||this.isDirty("start")||this.isDirty("end")||this.isPrivateDirty("min")||this.isPrivateDirty("selectionMax")||this.isPrivateDirty("selectionMin")||this.isPrivateDirty("max")||this.isPrivateDirty("step")||this.isPrivateDirty("width")||this.isPrivateDirty("height")||this.isDirty("logarithmic"))&&(this._handleRangeChange(),this._prepareAxisItems(),this._updateAxisRanges()),this._baseValue=this.baseValue()}_groupData(){}_formatText(e){const i=this.get("numberFormat"),r=this.getNumberFormatter();let o="";return o=i?r.format(e,i):r.format(e,void 0,this.getPrivate("stepDecimalPlaces")),o}_prepareAxisItems(){const e=this.getPrivate("min"),i=this.getPrivate("max");if(R.isNumber(e)&&R.isNumber(i)){const r=this.get("logarithmic"),o=this.getPrivate("step"),c=this.getPrivate("selectionMin"),m=this.getPrivate("selectionMax")+o;let p=c-o,_=0,w=1,T=e;if(r){if(p=this._minLogAdjusted,p<c)for(;p<c;)p+=o;T=p,T<=0&&(T=1,o<1&&(T=o)),w=Math.log(m-o)*Math.LOG10E-Math.log(T)*Math.LOG10E,w>2&&(p=Math.pow(10,Math.log(T)*Math.LOG10E-5))}let x=-1/0;for(;p<m;){let C;this.dataItems.length<_+1?(C=new pe.z(this,void 0,{}),this._dataItems.push(C),this.processDataItem(C)):C=this.dataItems[_],this._createAssets(C,[]),C.isHidden()&&C.show(),C.setRaw("value",p);const K=C.get("label");if(K&&K.set("text",this._formatText(p)),this._prepareDataItem(C),r&&w>2?p=Math.pow(10,Math.log(T)*Math.LOG10E+_-5):p+=o,x==p)break;let ee=Math.pow(10,Math.floor(Math.log(Math.abs(o))*Math.LOG10E));if(ee<1){let te=Math.round(Math.abs(Math.log(Math.abs(ee))*Math.LOG10E))+2;p=ce.round(p,te)}_++,x=p}for(let C=_;C<this.dataItems.length;C++)this.dataItems[C].hide();v.each(this.series,C=>{C.inited&&C._markDirtyAxes()}),this._updateGhost()}}_prepareDataItem(e,i){let r=this.get("renderer"),o=e.get("value"),c=e.get("endValue"),m=this.valueToPosition(o),p=m,_=this.valueToPosition(o+this.getPrivate("step"));R.isNumber(c)&&(p=this.valueToPosition(c),_=p),e.get("isRange")&&null==c&&(_=m),r.updateLabel(e.get("label"),m,p,i);const w=e.get("grid");if(r.updateGrid(w,m,p),w&&(o==this.get("baseValue",0)?(w.addTag("base"),w._applyThemes()):w.hasTag("base")&&(w.removeTag("base"),w._applyThemes())),r.updateTick(e.get("tick"),m,p,i),r.updateFill(e.get("axisFill"),m,_),this._processBullet(e),r.updateBullet(e.get("bullet"),m,p),!e.get("isRange")){const T=this.get("fillRule");T&&T(e)}}_handleRangeChange(){let e=this.positionToValue(this.get("start",0)),i=this.positionToValue(this.get("end",1));const r=this.get("renderer").gridCount();let o=this._adjustMinMax(e,i,r,!0),c=N.decimalPlaces(o.step);this.setPrivateRaw("stepDecimalPlaces",c),e=ce.round(e,c),i=ce.round(i,c),o=this._adjustMinMax(e,i,r,!0);let m=o.step;e=o.min,i=o.max,(this.getPrivate("selectionMin")!==e||this.getPrivate("selectionMax")!==i||this.getPrivate("step")!==m)&&(this.setPrivateRaw("selectionMin",e),this.setPrivateRaw("selectionMax",i),this.setPrivateRaw("step",m))}positionToValue(e){const i=this.getPrivate("min"),r=this.getPrivate("max");return this.get("logarithmic")?Math.pow(Math.E,(e*(Math.log(r)*Math.LOG10E-Math.log(i)*Math.LOG10E)+Math.log(i)*Math.LOG10E)/Math.LOG10E):e*(r-i)+i}valueToPosition(e){const i=this.getPrivate("min"),r=this.getPrivate("max");if(this.get("logarithmic")){if(e<=0){let o=this.get("treatZeroAs");R.isNumber(o)&&(e=o)}return(Math.log(e)*Math.LOG10E-Math.log(i)*Math.LOG10E)/(Math.log(r)*Math.LOG10E-Math.log(i)*Math.LOG10E)}return(e-i)/(r-i)}valueToFinalPosition(e){const i=this.getPrivate("minFinal"),r=this.getPrivate("maxFinal");if(this.get("logarithmic")){if(e<=0){let o=this.get("treatZeroAs");R.isNumber(o)&&(e=o)}return(Math.log(e)*Math.LOG10E-Math.log(i)*Math.LOG10E)/(Math.log(r)*Math.LOG10E-Math.log(i)*Math.LOG10E)}return(e-i)/(r-i)}getX(e,i,r){const o=this.valueToPosition(e=r+(e-r)*i);return this._settings.renderer.positionToCoordinate(o)}getY(e,i,r){const o=this.valueToPosition(e=r+(e-r)*i);return this._settings.renderer.positionToCoordinate(o)}getDataItemCoordinateX(e,i,r,o){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionX(e,i,r,o))}getDataItemPositionX(e,i,r,o){let c=e.get(i);return c=e.get("stackToItemX")?c*o+e.component.getStackedXValueWorking(e,i):this._baseValue+(c-this._baseValue)*o,this.valueToPosition(c)}getDataItemCoordinateY(e,i,r,o){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionY(e,i,r,o))}getDataItemPositionY(e,i,r,o){let c=e.get(i);return c=e.get("stackToItemY")?c*o+e.component.getStackedYValueWorking(e,i):this._baseValue+(c-this._baseValue)*o,this.valueToPosition(c)}basePosition(){return this.valueToPosition(this.baseValue())}baseValue(){const e=Math.min(this.getPrivate("minFinal",-1/0),this.getPrivate("selectionMin",-1/0)),i=Math.max(this.getPrivate("maxFinal",1/0),this.getPrivate("selectionMax",1/0));let r=this.get("baseValue",0);return r<e&&(r=e),r>i&&(r=i),r}cellEndValue(e){return e}fixSmallStep(e){return 1+e===1?this.fixSmallStep(e*=2):e}_fixMin(e){return e}_fixMax(e){return e}_calculateTotals(){if(this.get("calculateTotals")){let e=this.series[0];if(e){let i=e.startIndex();if(e.dataItems.length>0){i>0&&i--;let o,c,r=e.endIndex();r<e.dataItems.length&&r++,e.get("yAxis")==this?(o="valueY",c="vcy"):e.get("xAxis")==this&&(o="valueX",c="vcx");let m=o+"Working";if(o)for(let p=i;p<r;p++){let _=0,w=0;v.each(this.series,T=>{if(!T.get("excludeFromTotal")){let x=T.dataItems[p];if(x){let C=x.get(m)*T.get(c);R.isNaN(C)||(_+=C,w+=Math.abs(C))}}}),v.each(this.series,T=>{if(!T.get("excludeFromTotal")){let x=T.dataItems[p];if(x){let C=x.get(m)*T.get(c);R.isNaN(C)||(x.set(o+"Total",w),x.set(o+"Sum",_),x.set(o+"TotalPercent",C/w*100))}}})}}}}}_getSelectionMinMax(){const e=this.getPrivate("minFinal"),i=this.getPrivate("maxFinal"),r=this.get("min"),o=this.get("max");let c=this.get("extraMin",0),m=this.get("extraMax",0);this.get("logarithmic")&&(null==this.get("extraMin")&&(c=.1),null==this.get("extraMax")&&(m=.2));const p=this.get("renderer").gridCount(),_=this.get("strictMinMaxSelection"),w=this.get("strictMinMax");if(R.isNumber(e)&&R.isNumber(i)){let T=i,x=e;if(v.each(this.series,oe=>{if(!oe.get("ignoreMinMax")){let fe,ye;const we=oe.getPrivate("outOfSelection");oe.get("xAxis")===this?we||(fe=oe.getPrivate("selectionMinX",oe.getPrivate("minX")),ye=oe.getPrivate("selectionMaxX",oe.getPrivate("maxX"))):oe.get("yAxis")===this&&(we||(fe=oe.getPrivate("selectionMinY",oe.getPrivate("minY")),ye=oe.getPrivate("selectionMaxY",oe.getPrivate("maxY")))),!oe.isHidden()&&!oe.isShowing()&&(R.isNumber(fe)&&(T=Math.min(T,fe)),R.isNumber(ye)&&(x=Math.max(x,ye)))}}),this.axisRanges.each(oe=>{if(oe.get("affectsMinMax")){let fe=oe.get("value");null!=fe&&(T=Math.min(T,fe),x=Math.max(x,fe)),fe=oe.get("endValue"),null!=fe&&(T=Math.min(T,fe),x=Math.max(x,fe))}}),T>x&&([T,x]=[x,T]),R.isNumber(r)?T=w?r:e:w&&R.isNumber(this._minReal)&&(T=this._minReal),R.isNumber(o)?x=w?o:i:w&&R.isNumber(this._maxReal)&&(x=this._maxReal),T===x){T-=this._deltaMinMax,x+=this._deltaMinMax;let oe=this._adjustMinMax(T,x,p,w);T=oe.min,x=oe.max}let C=T,K=x;T-=(x-T)*c,x+=(x-T)*m;let ee=this._adjustMinMax(T,x,p);T=ee.min,x=ee.max,T=ce.fitToRange(T,e,i),x=ce.fitToRange(x,e,i),ee=this._adjustMinMax(T,x,p,!0),w||(T=ee.min,x=ee.max);const te=this.get("syncWithAxis");te&&(ee=this._syncAxes(T,x,ee.step,te.getPrivate("selectionMinFinal",te.getPrivate("minFinal",0)),te.getPrivate("selectionMaxFinal",te.getPrivate("maxFinal",1)),te.getPrivate("selectionStepFinal",te.getPrivate("step",1))),T=ee.min,x=ee.max),w&&(R.isNumber(r)&&(T=Math.max(T,r)),R.isNumber(o)&&(x=Math.min(x,o))),_&&(T=C-(x-T)*c,x=K+(x-T)*m),this.get("logarithmic")&&(T<=0&&(T=C*(1-Math.min(c,.99))),T<e&&(T=e),x>i&&(x=i));let $=Math.min(20,Math.ceil(Math.log(this.getPrivate("maxZoomFactor",100)+1)/Math.LN10)+2),ae=ce.round(this.valueToFinalPosition(T),$),ge=ce.round(this.valueToFinalPosition(x),$);this.setPrivateRaw("selectionMinFinal",T),this.setPrivateRaw("selectionMaxFinal",x),this.setPrivateRaw("selectionStepFinal",ee.step),this.zoom(ae,ge)}}_getMinMax(){let e=this.get("min"),i=this.get("max"),r=1/0,o=-1/0,c=this.get("extraMin",0),m=this.get("extraMax",0);this.get("logarithmic")&&(null==this.get("extraMin")&&(c=.1),null==this.get("extraMax")&&(m=.2));let p=1/0;if(v.each(this.series,oe=>{if(!oe.get("ignoreMinMax")){let fe,ye;if(oe.get("xAxis")===this?(fe=oe.getPrivate("minX"),ye=oe.getPrivate("maxX")):oe.get("yAxis")===this&&(fe=oe.getPrivate("minY"),ye=oe.getPrivate("maxY")),R.isNumber(fe)&&R.isNumber(ye)){r=Math.min(r,fe),o=Math.max(o,ye);let we=ye-fe;we<=0&&(we=Math.abs(ye/100)),we<p&&(p=we)}}}),this.axisRanges.each(oe=>{if(oe.get("affectsMinMax")){let fe=oe.get("value");null!=fe&&(r=Math.min(r,fe),o=Math.max(o,fe)),fe=oe.get("endValue"),null!=fe&&(r=Math.min(r,fe),o=Math.max(o,fe))}}),this.get("logarithmic")){let oe=this.get("treatZeroAs");R.isNumber(oe)&&r<=0&&(r=oe),r<=0&&new Error("Logarithmic value axis can not have values <= 0.")}if(0===r&&0===o&&(o=.9,r=-.9),R.isNumber(e)&&(r=e),R.isNumber(i)&&(o=i),r===1/0||o===-1/0)return this.setPrivate("minFinal",void 0),void this.setPrivate("maxFinal",void 0);const _=r,w=o;let T=this.adapters.fold("min",r),x=this.adapters.fold("max",o);R.isNumber(T)&&(r=T),R.isNumber(x)&&(o=x),r=this._fixMin(r),o=this._fixMax(o),o-r<=1/Math.pow(10,15)&&(o-r!=0?this._deltaMinMax=(o-r)/2:this._getDelta(o),r-=this._deltaMinMax,o+=this._deltaMinMax),r-=(o-r)*c,o+=(o-r)*m,this.get("logarithmic")&&(r<0&&_>=0&&(r=0),o>0&&w<=0&&(o=0)),this._minReal=r,this._maxReal=o;let C=this.get("strictMinMax"),K=this.get("strictMinMaxSelection",!1);K&&(C=K);let ee=C;R.isNumber(i)&&(ee=!0);let te=this.get("renderer").gridCount(),$=this._adjustMinMax(r,o,te,ee);r=$.min,o=$.max,$=this._adjustMinMax(r,o,te,!0),r=$.min,o=$.max,C&&(r=R.isNumber(e)?e:this._minReal,o=R.isNumber(i)?i:this._maxReal,o-r<=1e-8&&(r-=this._deltaMinMax,o+=this._deltaMinMax),r-=(o-r)*c,o+=(o-r)*m),T=this.adapters.fold("min",r),x=this.adapters.fold("max",o),R.isNumber(T)&&(r=T),R.isNumber(x)&&(o=x),p==1/0&&(p=o-r);let ae=Math.round(Math.abs(Math.log(Math.abs(o-r))*Math.LOG10E))+5;r=ce.round(r,ae),o=ce.round(o,ae);const ge=this.get("syncWithAxis");if(ge&&($=this._syncAxes(r,o,$.step,ge.getPrivate("minFinal",ge.getPrivate("min",0)),ge.getPrivate("maxFinal",ge.getPrivate("max",1)),ge.getPrivate("step",1)),r=$.min,o=$.max),this.setPrivateRaw("maxZoomFactor",Math.max(1,Math.ceil((o-r)/p*this.get("maxZoomFactor",100)))),this._fixZoomFactor(),this.get("logarithmic")&&(this._minLogAdjusted=r,r=this._minReal,o=this._maxReal,r<=0&&(r=_*(1-Math.min(c,.99)))),R.isNumber(r)&&R.isNumber(o)&&(this.getPrivate("minFinal")!==r||this.getPrivate("maxFinal")!==o)){this.setPrivate("minFinal",r),this.setPrivate("maxFinal",o),this._saveMinMax(r,o);const oe=this.get("interpolationDuration",0),fe=this.get("interpolationEasing");this.animatePrivate({key:"min",to:r,duration:oe,easing:fe}),this.animatePrivate({key:"max",to:o,duration:oe,easing:fe})}}_fixZoomFactor(){}_getDelta(e){let i=Math.log(Math.abs(e))*Math.LOG10E,r=Math.pow(10,Math.floor(i));r/=10,this._deltaMinMax=r}_saveMinMax(e,i){}_adjustMinMax(e,i,r,o){r<=1&&(r=1),r=Math.round(r);let c=e,m=i,p=i-e;0===p&&(p=Math.abs(i));let _=Math.log(Math.abs(p))*Math.LOG10E,w=Math.pow(10,Math.floor(_));w/=10;let T=w;o&&(T=0),o?(e=Math.floor(e/w)*w,i=Math.ceil(i/w)*w):(e=Math.ceil(e/w)*w-T,i=Math.floor(i/w)*w+T),e<0&&c>=0&&(e=0),i>0&&m<=0&&(i=0),_=Math.log(Math.abs(p))*Math.LOG10E,w=Math.pow(10,Math.floor(_)),w/=100;let x=Math.ceil(p/r/w)*w,C=Math.pow(10,Math.floor(Math.log(Math.abs(x))*Math.LOG10E)),K=Math.ceil(x/C);K>5?K=10:K<=5&&K>2&&(K=5),x=Math.ceil(x/(C*K))*C*K;let ee=this.get("maxPrecision");if(R.isNumber(ee)){let ge=ce.ceil(x,ee);ee<Number.MAX_VALUE&&x!==ge&&(x=ge)}let te=0;C<1&&(te=Math.round(Math.abs(Math.log(Math.abs(C))*Math.LOG10E))+1,x=ce.round(x,te));let ae,$=Math.floor(e/x);return e=ce.round(x*$,te),ae=o?Math.floor(i/x):Math.ceil(i/x),ae===$&&ae++,(i=ce.round(x*ae,te))<m&&(i+=x),e>c&&(e-=x),x=this.fixSmallStep(x),{min:e,max:i,step:x}}getTooltipText(e,i){const r=this.get("tooltipNumberFormat",this.get("numberFormat")),o=this.getNumberFormatter(),c=this.get("extraTooltipPrecision",0),m=this.getPrivate("stepDecimalPlaces",0)+c,p=ce.round(this.positionToValue(e),m);return r?o.format(p,r):o.format(p,void 0,m)}getSeriesItem(e,i){let c,m,r=this.getPrivate("name")+this.get("renderer").getPrivate("letter"),o=this.positionToValue(i);if(v.each(e.dataItems,(p,_)=>{const w=Math.abs(p.get(r)-o);(void 0===c||w<m)&&(c=_,m=w)}),null!=c)return e.dataItems[c]}zoomToValues(e,i,r){const o=this.getPrivate("minFinal",0),c=this.getPrivate("maxFinal",0);null!=this.getPrivate("min")&&null!=this.getPrivate("max")&&this.zoom((e-o)/(c-o),(i-o)/(c-o),r)}_syncAxes(e,i,r,o,c,m){if(this.get("syncWithAxis")){let _=Math.round(c-o)/m,w=Math.round((i-e)/r),T=this.get("renderer").gridCount();if(R.isNumber(_)&&R.isNumber(w)){let x=!1,C=0,K=.01*(i-e),ee=e,te=i,$=r;for(;1!=x;)if(x=this._checkSync(ee,te,$,_),C++,C>500&&(x=!0),x)e=ee,i=te,r=$;else{C/3==Math.round(C/3)?(ee=e-K*C,e>=0&&ee<0&&(ee=0)):(te=i+K*C,te<=0&&te>0&&(te=0));let ae=this._adjustMinMax(ee,te,T,!0);ee=ae.min,te=ae.max,$=ae.step}}}return{min:e,max:i,step:r}}_checkSync(e,i,r,o){let c=(i-e)/r;for(let m=1;m<o;m++)if(ce.round(c/m,1)==o||c*m==o)return!0;return!1}getCellWidthPosition(){let e=this.getPrivate("selectionMax",this.getPrivate("max")),i=this.getPrivate("selectionMin",this.getPrivate("min"));return R.isNumber(e)&&R.isNumber(i)?this.getPrivate("step",1)/(e-i):.05}}Object.defineProperty(Ve,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ValueAxis"}),Object.defineProperty(Ve,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:gt.classNames.concat([Ve.className])});class hi extends Ve{constructor(){super(...arguments),Object.defineProperty(this,"_dataGrouped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_seriesDataGrouped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_groupingCalculated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_intervalDuration",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_baseDuration",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_intervalMax",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_intervalMin",{enumerable:!0,configurable:!0,writable:!0,value:{}})}_afterNew(){this._settings.themeTags=N.mergeTags(this._settings.themeTags,["axis"]),super._afterNew(),this._setBaseInterval(this.get("baseInterval")),this.on("baseInterval",()=>{this._setBaseInterval(this.get("baseInterval"))})}_setBaseInterval(e){this.setPrivateRaw("baseInterval",e),this._baseDuration=he.getIntervalDuration(e)}_fixZoomFactor(){const e=this.get("maxZoomFactor");this.setPrivateRaw("maxZoomFactor",null!=e&&e!=1/0?e:Math.round((this.getPrivate("max",0)-this.getPrivate("min",0))/this.baseMainDuration()))}_groupData(){const e=this.getPrivate("min"),i=this.getPrivate("max");if(R.isNumber(e)&&R.isNumber(i)){this._fixZoomFactor();const r=this.getPrivate("groupInterval");if(this._setBaseInterval(r||this.get("baseInterval")),this.isDirty("groupInterval")){let o=this.get("groupInterval");o&&this.setRaw("groupIntervals",[o])}if(this.isDirty("groupData")&&!this._dataGrouped){if(this.get("groupData"))v.each(this.series,o=>{this._groupSeriesData(o)}),this._handleRangeChange();else{let o=this.get("baseInterval"),c=o.timeUnit+o.count;v.each(this.series,m=>{m.setDataSet(c)}),this._setBaseInterval(o),this.setPrivateRaw("groupInterval",void 0),this.markDirtyExtremes()}this._dataGrouped=!0}}}_groupSeriesData(e){if(this.get("groupData")&&!e.get("groupDataDisabled")){this._dataGrouped=!0,this._seriesDataGrouped=!0;let i=[],r=this.baseMainDuration(),o=this.get("groupIntervals");v.each(o,$=>{he.getIntervalDuration($)>r&&i.push($)}),e._dataSets={};const c=this.getPrivate("name")+this.get("renderer").getPrivate("letter");let m;const p=e.get("baseAxis");e.get("xAxis")===p?m=e._valueYFields:e.get("yAxis")===p&&(m=e._valueXFields);let _=e._mainDataItems,w=this.get("baseInterval");e._dataSets[w.timeUnit+w.count]=_;const x=e.get("groupDataCallback");let C=e.get("groupDataWithOriginals",!1);x&&(C=!0);const K=this._root.locale.firstDayOfWeek,ee=this._root.utc,te=this._root.timezone;v.each(i,$=>{let ae=-1/0,ge=$.timeUnit+$.count;e._dataSets[ge]=[];let oe,fe={},ye={},we={},Ze={};v.each(m,rt=>{fe[rt]=0,ye[rt]=0,we[rt]=e.get(rt+"Grouped"),Ze[rt]=rt+"Working"});let Be,qe,Fe=he.getDuration($.timeUnit);_[0]&&(Be=new Date(_[0].get(c))),v.each(_,rt=>{let Lt,Bt=rt.get(c),It=he.round(new Date(Bt),$.timeUnit,$.count,K,ee,Be,te).getTime();ae<It-Fe/24?(Lt=z.copy(rt.dataContext),oe=new pe.z(e,Lt,e._makeDataItem(Lt)),oe.setRaw(c,It),e._dataSets[ge].push(oe),v.each(m,mt=>{let Je=rt.get(mt);R.isNumber(Je)?(oe.setRaw(mt,Je),oe.setRaw(Ze[mt],Je),ye[mt]=1,fe[mt]=Je):(fe[mt]=0,ye[mt]=0)}),C&&oe.set("originals",[rt]),x&&qe&&x(qe,$),qe=oe):(v.each(m,mt=>{let Je=we[mt],nt=rt.get(mt);if(void 0!==nt){let et=oe.get(mt);switch(Je){case"close":oe.setRaw(mt,nt);break;case"sum":null!=nt&&oe.setRaw(mt,et+nt);break;case"open":break;case"low":nt<et&&oe.setRaw(mt,nt);break;case"high":nt>et&&oe.setRaw(mt,nt);break;case"average":ye[mt]++,fe[mt]+=nt,oe.setRaw(mt,fe[mt]/ye[mt]);break;case"extreme":Math.abs(nt)>Math.abs(et)&&oe.setRaw(mt,nt)}oe.setRaw(Ze[mt],oe.get(mt));let Oi=z.copy(rt.dataContext);Oi[c]=It,oe.dataContext=Oi}}),C&&oe.get("originals").push(rt)),ae=It}),x&&qe&&x(qe,$)}),e._dataSetId&&e.setDataSet(e._dataSetId),this.markDirtySize()}}_clearDirty(){super._clearDirty(),this._groupingCalculated=!1,this._dataGrouped=!1}getGroupInterval(e){let i=this.get("baseInterval"),r=he.chooseInterval(0,e,this.get("groupCount",1/0),this.get("groupIntervals"));return he.getIntervalDuration(r)<he.getIntervalDuration(i)&&(r=Object.assign({},i)),r}getIntervalMax(e){return this._intervalMax[e.timeUnit+e.count]}getIntervalMin(e){return this._intervalMin[e.timeUnit+e.count]}_handleRangeChange(){super._handleRangeChange();let e=Math.round(this.getPrivate("selectionMin")),i=Math.round(this.getPrivate("selectionMax"));if(R.isNumber(e)&&R.isNumber(i)){if(0==this.get("endLocation")&&(i+=1),this.get("groupData")&&!this._groupingCalculated){this._groupingCalculated=!0;let r=i-e+(this.get("startLocation",0)+(1-this.get("endLocation",1))*this.baseDuration()),o=this.get("groupInterval");o||(o=this.getGroupInterval(r));let c=this.getPrivate("groupInterval");if(o&&(!c||c.timeUnit!==o.timeUnit||c.count!==o.count||this._seriesDataGrouped)){this._seriesDataGrouped=!1,this.setPrivateRaw("groupInterval",o),this._setBaseInterval(o);let m=o.timeUnit+o.count;v.each(this.series,p=>{p.get("baseAxis")===this&&p.setDataSet(m)}),this.markDirtyExtremes(),this._root.events.once("frameended",()=>{this._root.events.once("frameended",()=>{const p="groupintervalchanged";this.events.isEnabled(p)&&this.events.dispatch(p,{type:p,target:this})})})}}v.each(this.series,r=>{if(r.get("baseAxis")===this){let o=this.getPrivate("name")+this.get("renderer").getPrivate("letter"),m=v.getSortedIndex(r.dataItems,te=>W.qu(te.get(o),e)).index;m>0&&(m-=1),i+=this.baseDuration()*(1-this.get("endLocation",1));let _=v.getSortedIndex(r.dataItems,te=>W.qu(te.get(o),i)).index,w=_;w>0&&w--;const T=r.dataItems[m],x=r.dataItems[w];let C,K;T&&(K=T.get(o)),x&&(C=x.get(o));let ee=!1;null!=C&&null!=K&&(C<e||K>i)&&(ee=!0),r.setPrivate("outOfSelection",ee),r.setPrivate("startIndex",m),r.setPrivate("endIndex",_)}})}}_adjustMinMax(e,i,r,o){return{min:e,max:i,step:(i-e)/r}}intervalDuration(){return this._intervalDuration}_saveMinMax(e,i){let r=this.getPrivate("groupInterval");r||(r=this.get("baseInterval"));let o=r.timeUnit+r.count;this._intervalMin[o]=e,this._intervalMax[o]=i}_getM(e){return"month"==e||"year"==e||"day"==e?1.05:1.01}_prepareAxisItems(){const e=this.getPrivate("min"),i=this.getPrivate("max");if(R.isNumber(e)&&R.isNumber(i)){const r=Math.round(this.getPrivate("selectionMin")),o=Math.round(this.getPrivate("selectionMax")),c=this.get("renderer"),m=this.getPrivate("baseInterval");let p=r,_=0;const w=this.get("gridIntervals");let T=he.chooseInterval(0,o-r,c.gridCount(),w);he.getIntervalDuration(T)<this.baseDuration()&&(T=Object.assign({},m));const x=he.getIntervalDuration(T);this._intervalDuration=x;const C=he.getNextUnit(T.timeUnit),K=this._root.locale.firstDayOfWeek,ee=this._root.utc,te=this._root.timezone;p=he.round(new Date(r-x),T.timeUnit,T.count,K,ee,new Date(e),te).getTime();let ae,$=p-x;const ge=this.get("dateFormats");for(this.setPrivateRaw("gridInterval",T);p<o+x;){let oe;this.dataItems.length<_+1?(oe=new pe.z(this,void 0,{}),this._dataItems.push(oe),this.processDataItem(oe)):oe=this.dataItems[_],this._createAssets(oe,[]),oe.isHidden()&&oe.show(),oe.setRaw("value",p);let fe=p+he.getDuration(T.timeUnit,T.count*this._getM(T.timeUnit));fe=he.round(new Date(fe),T.timeUnit,1,K,ee,void 0,te).getTime(),oe.setRaw("endValue",fe);let ye=new Date(p);ae=ge[T.timeUnit],C&&this.get("markUnitChange")&&R.isNumber($)&&"year"!=T.timeUnit&&he.checkChange(p,$,C,ee,te)&&(ae=this.get("periodChangeDateFormats")[T.timeUnit]);const we=oe.get("label");if(we&&we.set("text",this._root.dateFormatter.format(ye,ae)),this._prepareDataItem(oe,T.count),$=p,p=fe,p==$)break;_++}for(let oe=_;oe<this.dataItems.length;oe++)this.dataItems[oe].hide();v.each(this.series,oe=>{oe.inited&&oe._markDirtyAxes()})}this._updateGhost()}_updateFinals(e,i){this.setPrivateRaw("selectionMinFinal",this.positionToValue(e)),this.setPrivateRaw("selectionMaxFinal",this.positionToValue(i))}_getDelta(){this._deltaMinMax=this.baseDuration()/2}_fixMin(e){const i=this.getPrivate("baseInterval"),r=this._root.locale.firstDayOfWeek,o=this._root.timezone,c=this._root.utc,m=i.timeUnit;let p=he.round(new Date(e),m,i.count,r,c,void 0,o).getTime(),_=p+he.getDuration(m,i.count*this._getM(m));return _=he.round(new Date(_),m,1,r,c,void 0,o).getTime(),p+(_-p)*this.get("startLocation",0)}_fixMax(e){const i=this.getPrivate("baseInterval"),r=this._root.locale.firstDayOfWeek,o=this._root.timezone,c=this._root.utc,m=i.timeUnit;let p=he.round(new Date(e),m,i.count,r,c,void 0,o).getTime(),_=p+he.getDuration(m,i.count*this._getM(m));return _=he.round(new Date(_),m,1,r,c,void 0,o).getTime(),p+(_-p)*this.get("endLocation",1)}_updateDates(e){}baseDuration(){return this._baseDuration}baseMainDuration(){return he.getIntervalDuration(this.get("baseInterval"))}processSeriesDataItem(e,i){const r=this.getPrivate("baseInterval");e.open||(e.open={}),e.close||(e.close={}),v.each(i,o=>{let c=e.get(o);if(R.isNumber(c)){let m=e.open[o],p=e.close[o];if(!(c>=m&&c<=p)){const _=this._root.locale.firstDayOfWeek,w=this._root.utc,T=this._root.timezone,x=r.timeUnit,C=r.count;m=he.round(new Date(c),x,C,_,w,void 0,T).getTime(),p=m+he.getDuration(x,C*this._getM(x)),p=he.round(new Date(p),x,1,_,w,void 0,T).getTime(),e.open[o]=m,e.close[o]=p}this._updateDates(m)}})}getDataItemPositionX(e,i,r,o){let c,m;e.open&&e.close?(c=e.open[i],m=e.close[i]):(c=e.get(i),m=c);let p=c+(m-c)*r;return p=this._baseValue+(p-this._baseValue)*o,this.valueToPosition(p)}getDataItemCoordinateX(e,i,r,o){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionX(e,i,r,o))}getDataItemPositionY(e,i,r,o){let c,m;e.open&&e.close?(c=e.open[i],m=e.close[i]):(c=e.get(i),m=c);let p=c+(m-c)*r;return p=this._baseValue+(p-this._baseValue)*o,this.valueToPosition(p)}getDataItemCoordinateY(e,i,r,o){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionY(e,i,r,o))}roundAxisPosition(e,i){let r=this.positionToValue(e);r-=(i-.5)*this.baseDuration();let o=this.getPrivate("baseInterval");if(!R.isNaN(r)){const c=this._root.locale.firstDayOfWeek,m=o.timeUnit,p=this._root.utc,_=this._root.timezone,w=o.count;r=he.round(new Date(r),m,w,c,p,new Date(this.getPrivate("min",0)),_).getTime();let T=he.getDateIntervalDuration(o,new Date(r),c,p,_);return _&&(r=he.round(new Date(r+.05*this.baseDuration()),m,w,c,p,new Date(this.getPrivate("min",0)),_).getTime(),T=he.getDateIntervalDuration(o,new Date(r+T*i),c,p,_)),this.valueToPosition(r+T*i)}return NaN}getTooltipText(e,i){if(null!=this.getPrivate("min")){let r=this.get("tooltipDateFormats")[this.getPrivate("baseInterval").timeUnit],o=this.positionToValue(e),c=new Date(o),m=this.getPrivate("baseInterval"),p=he.getDateIntervalDuration(m,c,this._root.locale.firstDayOfWeek,this._root.utc,this._root.timezone);return!1!==i&&(c=new Date(o+this.get("tooltipIntervalOffset",-this.get("tooltipLocation",.5))*p)),this._root.dateFormatter.format(c,this.get("tooltipDateFormat",r))}return""}getSeriesItem(e,i,r){let o=this.getPrivate("name")+this.get("renderer").getPrivate("letter"),c=this.positionToValue(i);null==r&&(r=.5),c-=(r-.5)*this.baseDuration();const m=v.getSortedIndex(e.dataItems,p=>{let _=0;return p.open&&(_=p.open[o]),W.qu(_,c)});if(e.get("snapTooltip")){let p=e.dataItems[m.index-1],_=e.dataItems[m.index];if(p&&_&&p.open&&_.close){let T=_.close[o];if(Math.abs(c-p.open[o])>Math.abs(c-T))return _}if(p)return p;if(_)return _}else{const p=e.dataItems[m.index-1];if(p&&p.open&&p.close&&c>=p.open[o]&&c<=p.close[o])return p}}shouldGap(e,i,r,o){const c=e.get(o);return i.get(o)-c>this.baseDuration()*r}zoomToDates(e,i,r){this.zoomToValues(e.getTime(),i.getTime(),r)}positionToDate(e){return new Date(this.positionToValue(e))}dateToPosition(e){return this.valueToPosition(e.getTime())}getCellWidthPosition(){let e=this.getPrivate("selectionMax",this.getPrivate("max")),i=this.getPrivate("selectionMin",this.getPrivate("min"));return R.isNumber(e)&&R.isNumber(i)?this._intervalDuration/(e-i):.05}}Object.defineProperty(hi,"className",{enumerable:!0,configurable:!0,writable:!0,value:"DateAxis"}),Object.defineProperty(hi,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ve.classNames.concat([hi.className])});class ci extends hi{constructor(){super(...arguments),Object.defineProperty(this,"_frequency",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_dates",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_afterNew(){this.valueFields.push("date"),super._afterNew()}_updateDates(e){const i=this._dates,r=v.getSortedIndex(i,o=>W.qu(o,e));r.found||v.insertIndex(i,r.index,e)}_updateAllDates(){this._dates.length=0,v.each(this.series,e=>{let i="valueX";e.get("yAxis")==this&&(i="valueY"),v.each(e.dataItems,r=>{let o=r.get(i);R.isNumber(o)&&r.open&&this._updateDates(r.open[i])})})}valueToPosition(e){const i=this._dates,r=this.get("startLocation",0),o=this.get("endLocation",1),c=i.length-r-(1-o),m=v.getSortedIndex(i,_=>W.qu(_,e));let p=m.index;if(m.found)return(p-r)/c;{p>0&&(p-=1);let _=i[p],w=0;return w=_>e?_-e:e-_,(p-r)/c+w/this.baseDuration()/c}}valueToIndex(e){const r=v.getSortedIndex(this._dates,c=>W.qu(c,e));let o=r.index;return r.found||o>0&&(o-=1),o}positionToValue(e){const i=this.get("startLocation",0),r=this.get("endLocation",1);let o=Math.round(this._dates.length-i-(1-r)),c=e*o,m=Math.floor(c);return m<0&&(m=0),m>o-1&&(m=o-1),this._dates[m]+(c-m+i)*this.baseDuration()}_fixZoomFactor(){this.setPrivateRaw("maxZoomFactor",this._dates.length-this.get("startLocation",0)-(1-this.get("endLocation",1)))}zoomToValues(e,i,r){const o=this.getPrivate("min",0),c=this.getPrivate("max",0);e=ce.fitToRange(e,o,c),i=ce.fitToRange(i,o,c),this.zoom(this.valueToPosition(e),this.valueToPosition(i),r)}_prepareAxisItems(){let e=this.getPrivate("selectionMin",0),i=this.getPrivate("selectionMax",0);if(R.isNumber(e)&&R.isNumber(i)){this._seriesValuesDirty&&(this._seriesValuesDirty=!1,this._updateAllDates());const r=this._dates,o=this.get("renderer"),c=r.length;let m=this.valueToIndex(e);m>0&&m--;let p=this.valueToIndex(i);p<c-1&&p++;let _=o.axisLength()/Math.max(o.get("minGridDistance"),1/Number.MAX_SAFE_INTEGER),w=Math.min(c,Math.ceil((p-m)/_));w=Math.max(1,w),m=Math.floor(m/w)*w,this._frequency=w;for(let we=0,Ze=this.dataItems.length;we<Ze;we++)this.dataItems[we].hide();let T=i-e-((i-e)/this.baseDuration()-(p-m))*this.baseDuration(),x=he.chooseInterval(0,T,_,this.get("gridIntervals"));const C=this.getPrivate("baseInterval");let K=he.getIntervalDuration(x);K<this.baseDuration()&&(x=Object.assign({},C),K=he.getIntervalDuration(x)),this._intervalDuration=K;const ee=this.get("dateFormats");let te=[],$=new Date;this._dates[0]&&($=new Date(this._dates[0]));let ae=he.round(new Date(this.getPrivate("min",0)),x.timeUnit,x.count,this._root.locale.firstDayOfWeek,this._root.utc,$,this._root.timezone),ge=he.add(ae,x.timeUnit,-1,this._root.utc,this._root.timezone).getTime(),oe=this.getPrivate("selectionMax"),fe=-1/0,ye=(this.get("end",1)-this.get("start",0))/_;for(;ge<=oe;){let we=this.valueToIndex(ge),Ze=this._dates[we];if(Ze<ge)for(let Be=we,qe=this._dates.length;Be<qe;Be++)if(this._dates[Be]>=ge){we=Be;break}let Fe=this.valueToPosition(Ze);Fe-fe>=.95*ye&&(v.move(te,we),fe=Fe);let st=ge;if(ge+=he.getDuration(x.timeUnit,x.count*this._getM(x.timeUnit)),ge=he.round(new Date(ge),x.timeUnit,x.count,this._root.locale.firstDayOfWeek,this._root.utc,void 0,this._root.timezone).getTime(),ge==st)break}if(te.length>0){let we=0,Ze=ge-10*K;const Fe=he.getNextUnit(x.timeUnit);v.each(te,st=>{let Be;this.dataItems.length<we+1?(Be=new pe.z(this,void 0,{}),this._dataItems.push(Be),this.processDataItem(Be)):Be=this.dataItems[we];let qe=r[st],rt=new Date(qe),Bt=qe;if(we<te.length-1?Bt=r[te[we+1]]:Bt+=K,Be.setRaw("value",qe),Be.setRaw("endValue",Bt),Be.setRaw("index",we),st>m-100&&st<p+100){let It=ee[x.timeUnit];It=ee[x.timeUnit],Fe&&this.get("markUnitChange")&&R.isNumber(Ze)&&"year"!=x.timeUnit&&he.checkChange(qe,Ze,Fe,this._root.utc,this._root.timezone)&&(It=this.get("periodChangeDateFormats")[x.timeUnit]),this._createAssets(Be,[]);const Lt=Be.get("label");Lt&&Lt.set("text",this._root.dateFormatter.format(rt,It)),Be.isHidden()&&Be.show(),this._prepareDataItem(Be,x.count)}we++,Ze=qe})}v.each(this.series,we=>{we.inited&&we._markDirtyAxes()})}this._updateGhost()}}Object.defineProperty(ci,"className",{enumerable:!0,configurable:!0,writable:!0,value:"GaplessDateAxis"}),Object.defineProperty(ci,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:hi.classNames.concat([ci.className])});class yi extends Ve{constructor(){super(...arguments),Object.defineProperty(this,"_dataGrouped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_groupingCalculated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_intervalDuration",{enumerable:!0,configurable:!0,writable:!0,value:1})}_afterNew(){this._settings.themeTags=N.mergeTags(this._settings.themeTags,["axis"]),super._afterNew()}_adjustMinMax(e,i,r,o){let c;const m=this.getDurationFormatter(),p=this.get("baseUnit");if(this.setRaw("maxPrecision",0),"millisecond"==p||"second"==p||"minute"==p||"hour"==p){r<=1&&(r=1),r=Math.round(r);let _=i-e;0===_&&(_=Math.abs(i));let w=_/r,T=[60,30,20,15,10,2,1],x=1;"hour"==p&&(T=[24,12,6,4,2,1]);for(let ae of T)if(_/ae>r){x=ae;break}let C=Math.ceil((i-e)/x/r),K=Math.log(Math.abs(C))*Math.LOG10E,ee=Math.pow(10,Math.floor(K))/10;C=ce.closest(T,C/ee)*ee,w=x*C,c={min:e=Math.floor(e/w)*w,max:i=Math.ceil(i/w)*w,step:w}}else c=super._adjustMinMax(e,i,r,o);return this.setPrivateRaw("durationFormat",m.getFormat(c.step,c.max,p)),c}_formatText(e){return this.getDurationFormatter().format(e,this.getPrivate("durationFormat"),this.get("baseUnit"))}getTooltipText(e,i){const r=this.getDurationFormatter(),o=this.get("extraTooltipPrecision",0),c=this.getPrivate("stepDecimalPlaces",0)+o,m=ce.round(this.positionToValue(e),c);return r.format(m,this.getPrivate("durationFormat"),this.get("baseUnit"))}}Object.defineProperty(yi,"className",{enumerable:!0,configurable:!0,writable:!0,value:"DurationAxis"}),Object.defineProperty(yi,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ve.classNames.concat([yi.className])});var ds=F(4889);class Wt extends ds.JH{constructor(){super(...arguments),Object.defineProperty(this,"axis",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_beforeChanged(){super._beforeChanged();const e=this.get("sprite");if(this.isDirty("sprite")&&e&&(e.setAll({position:"absolute",role:"figure"}),this._disposers.push(e)),this.isDirty("location")){const i=e.dataItem;this.axis&&e&&i&&this.axis._prepareDataItem(i)}}dispose(){const e=this.axis;e&&z.each(e._bullets,(i,r)=>{r.uid==this.uid&&delete e._bullets[i]}),super.dispose()}}Object.defineProperty(Wt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisBullet"}),Object.defineProperty(Wt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ds.JH.classNames.concat([Wt.className])});var ns=F(1262);class Ti extends ns._{constructor(){super(...arguments),Object.defineProperty(this,"_tickPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]})}}Object.defineProperty(Ti,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisLabel"}),Object.defineProperty(Ti,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ns._.classNames.concat([Ti.className])});var Gi=F(9005);class Di extends Gi.x{constructor(){super(...arguments),Object.defineProperty(this,"_tickPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]})}}Object.defineProperty(Di,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisLabelRadial"}),Object.defineProperty(Di,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Gi.x.classNames.concat([Di.className])});var ii=F(9879);class Yt extends ii.d{constructor(){super(...arguments),Object.defineProperty(this,"_tickPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]})}}Object.defineProperty(Yt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisTick"}),Object.defineProperty(Yt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ii.d.classNames.concat([Yt.className])});var Nt=F(1371);class di extends M.T{constructor(){super(...arguments),Object.defineProperty(this,"_axisLength",{enumerable:!0,configurable:!0,writable:!0,value:100}),Object.defineProperty(this,"_start",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_end",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_inversed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_minSize",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"chart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_lc",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_ls",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_thumbDownPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ticks",{enumerable:!0,configurable:!0,writable:!0,value:new P.o(Nt.YS.new({}),()=>Yt._new(this._root,{themeTags:N.mergeTags(this.ticks.template.get("themeTags",[]),this.get("themeTags",[]))},[this.ticks.template]))}),Object.defineProperty(this,"grid",{enumerable:!0,configurable:!0,writable:!0,value:new P.o(Nt.YS.new({}),()=>Re._new(this._root,{themeTags:N.mergeTags(this.grid.template.get("themeTags",[]),this.get("themeTags",[]))},[this.grid.template]))}),Object.defineProperty(this,"axisFills",{enumerable:!0,configurable:!0,writable:!0,value:new P.o(Nt.YS.new({}),()=>M.T._new(this._root,{themeTags:N.mergeTags(this.axisFills.template.get("themeTags",["axis","fill"]),this.get("themeTags",[]))},[this.axisFills.template]))}),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:new P.o(Nt.YS.new({}),()=>Ti._new(this._root,{themeTags:N.mergeTags(this.labels.template.get("themeTags",[]),this.get("themeTags",[]))},[this.labels.template]))}),Object.defineProperty(this,"axis",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"thumb",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}makeTick(e,i){const r=this.ticks.make();return r._setDataItem(e),e.setRaw("tick",r),r.set("themeTags",N.mergeTags(r.get("themeTags"),i)),this.axis.labelsContainer.children.push(r),this.ticks.push(r),r}makeGrid(e,i){const r=this.grid.make();return r._setDataItem(e),e.setRaw("grid",r),r.set("themeTags",N.mergeTags(r.get("themeTags"),i)),this.axis.gridContainer.children.push(r),this.grid.push(r),r}makeAxisFill(e,i){const r=this.axisFills.make();return r._setDataItem(e),r.set("themeTags",N.mergeTags(r.get("themeTags"),i)),this.axis.gridContainer.children.push(r),e.setRaw("axisFill",r),this.axisFills.push(r),r}makeLabel(e,i){const r=this.labels.make();return r.set("themeTags",N.mergeTags(r.get("themeTags"),i)),this.axis.labelsContainer.children.moveValue(r,0),r._setDataItem(e),e.setRaw("label",r),this.labels.push(r),r}axisLength(){return 0}gridCount(){return this.axisLength()/this.get("minGridDistance",50)}_updatePositions(){}_afterNew(){super._afterNew(),this.set("isMeasured",!1);const e=this.thumb;e&&(this._disposers.push(e.events.on("pointerdown",i=>{this._handleThumbDown(i.originalEvent)})),this._disposers.push(e.events.on("globalpointerup",i=>{this._handleThumbUp(i.originalEvent)})),this._disposers.push(e.events.on("globalpointermove",i=>{this._handleThumbMove(i.originalEvent)})))}_changed(){if(super._changed(),this.isDirty("pan")){const e=this.thumb;if(e){const i=this.axis.labelsContainer,r=this.get("pan");"zoom"==r?i.children.push(e):"none"==r&&i.children.removeValue(e)}}}_handleThumbDown(e){this._thumbDownPoint=this.toLocal(this._root.documentPointToRoot({x:e.clientX,y:e.clientY}));const i=this.axis;this._downStart=i.get("start"),this._downEnd=i.get("end")}_handleThumbUp(e){this._thumbDownPoint=void 0}_handleThumbMove(e){const i=this._thumbDownPoint;if(i){const r=this.toLocal(this._root.documentPointToRoot({x:e.clientX,y:e.clientY})),o=this._downStart,c=this._downEnd,m=this._getPan(r,i)*Math.min(1,c-o)/2;this.axis.setAll({start:o-m,end:c+m})}}_getPan(e,i){return 0}positionToCoordinate(e){return this._inversed?(this._end-e)*this._axisLength:(e-this._start)*this._axisLength}updateTooltipBounds(e){}_updateSize(){this.markDirty(),this._clear=!0}toAxisPosition(e){const i=this._start||0,r=this._end||1;return e*=r-i,this.get("inversed")?r-e:i+e}fixPosition(e){return this.get("inversed")?1-e:e}_updateLC(){}toggleVisibility(e,i,r,o){let c=this.axis;const m=c.get("start",0),p=c.get("end",1);e.setPrivate("visible",!(i<m+(p-m)*(r-1e-4)||i>m+(p-m)*(o+1e-4)))}_positionTooltip(e,i){const r=this.chart;r&&(r.inPlot(i)?e.set("pointTo",this._display.toGlobal(i)):e.hide())}processAxis(){}}Object.defineProperty(di,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisRenderer"}),Object.defineProperty(di,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:M.T.classNames.concat([di.className])});class as extends di{constructor(){super(...arguments),Object.defineProperty(this,"thumb",{enumerable:!0,configurable:!0,writable:!0,value:ne.A.new(this._root,{width:G.AQ,isMeasured:!1,themeTags:["axis","x","thumb"]})})}_afterNew(){this._settings.themeTags=N.mergeTags(this._settings.themeTags,["renderer","x"]),super._afterNew(),this.setPrivateRaw("letter","X");const e=this.grid.template;e.set("height",G.AQ),e.set("width",0),e.set("draw",(i,r)=>{i.moveTo(0,0),i.lineTo(0,r.height())}),this.set("draw",(i,r)=>{i.moveTo(0,0),i.lineTo(r.width(),0)})}_changed(){super._changed();const e=this.axis;e.ghostLabel.setPrivate("visible",!this.get("inside")),e.ghostLabel.set("x",-1e3);const i="opposite",r="inside";if(this.isDirty(i)||this.isDirty(r)){const o=this.chart,c=e.children;if(this.get(r)?e.addTag(r):e.removeTag(r),o){if(this.get(i)){const m=o.topAxesContainer.children;-1==m.indexOf(e)&&m.insertIndex(0,e),e.addTag(i),c.moveValue(this)}else{const m=o.bottomAxesContainer.children;-1==m.indexOf(e)&&m.moveValue(e),e.removeTag(i),c.moveValue(this,0)}e.ghostLabel._applyThemes(),this.labels.each(m=>{m._applyThemes()}),this.root._markDirtyRedraw()}e.markDirtySize()}this.thumb.setPrivate("height",e.labelsContainer.height())}_getPan(e,i){return(i.x-e.x)/this.width()}toAxisPosition(e){const i=this._start||0,r=this._end||1;return e=(e-=this._ls)*(r-i)/this._lc,this.get("inversed")?r-e:i+e}_updateLC(){const e=this.axis,i=e.parent;if(i){const r=i.innerWidth();this._lc=this.axisLength()/r,this._ls=(e.x()-i.get("paddingLeft",0))/r}}_updatePositions(){const e=this.axis,i=e.x()-N.relativeToValue(e.get("centerX",0),e.width())-e.parent.get("paddingLeft",0);e.gridContainer.set("x",i),e.topGridContainer.set("x",i),e.bulletsContainer.set("y",this.y());const r=e.chart;if(r){const o=r.plotContainer,c=e.axisHeader;let m=e.get("marginLeft",0),p=e.x()-m;const _=e.parent;_&&(p-=_.get("paddingLeft",0)),c.children.length>0?(m=e.axisHeader.width(),e.set("marginLeft",m+1)):c.set("width",m),c.setAll({x:p,y:-1,height:o.height()+2})}}processAxis(){super.processAxis();const e=this.axis;e.set("width",G.AQ);const i=this._root.verticalLayout;e.set("layout",i),e.labelsContainer.set("width",G.AQ),e.axisHeader.setAll({layout:i})}axisLength(){return this.axis.width()}positionToPoint(e){return{x:this.positionToCoordinate(e),y:0}}updateTick(e,i,r,o){if(e){R.isNumber(i)||(i=0);let c=.5;c=R.isNumber(o)&&o>1?e.get("multiLocation",c):e.get("location",c),R.isNumber(r)&&r!=i&&(i+=(r-i)*c),e.set("x",this.positionToCoordinate(i));let m=e.get("length",0);const p=e.get("inside",this.get("inside",!1));this.get("opposite")?(e.set("y",G.AQ),p||(m*=-1)):(e.set("y",0),p&&(m*=-1)),e.set("draw",_=>{_.moveTo(0,0),_.lineTo(0,m)}),this.toggleVisibility(e,i,e.get("minPosition",0),e.get("maxPosition",1))}}updateLabel(e,i,r,o){if(e){let c=.5;c=R.isNumber(o)&&o>1?e.get("multiLocation",c):e.get("location",c),R.isNumber(i)||(i=0);const m=e.get("inside",this.get("inside",!1));this.get("opposite")?m?(e.set("position","absolute"),e.set("y",0)):(e.set("position","relative"),e.set("y",G.AQ)):m?(e.set("y",0),e.set("position","absolute")):(e.set("y",void 0),e.set("position","relative")),R.isNumber(r)&&r!=i&&(i+=(r-i)*c),e.set("x",this.positionToCoordinate(i)),this.toggleVisibility(e,i,e.get("minPosition",0),e.get("maxPosition",1))}}updateGrid(e,i,r){if(e){R.isNumber(i)||(i=0);let o=e.get("location",.5);R.isNumber(r)&&r!=i&&(i+=(r-i)*o),e.set("x",this.positionToCoordinate(i)),this.toggleVisibility(e,i,0,1)}}updateBullet(e,i,r){if(e){const o=e.get("sprite");if(o){R.isNumber(i)||(i=0);let c=e.get("location",.5);R.isNumber(r)&&r!=i&&(i+=(r-i)*c);let m=this.axis.roundAxisPosition(i,c),p=this.axis._bullets[m],_=-1;if(this.get("opposite")&&(_=1),e.get("stacked"))if(p){let w=p.get("sprite");w&&o.set("y",w.y()+w.height()*_)}else o.set("y",0);this.axis._bullets[m]=e,o.set("x",this.positionToCoordinate(i)),this.toggleVisibility(o,i,0,1)}}}updateFill(e,i,r){if(e){R.isNumber(i)||(i=0),R.isNumber(r)||(r=1);let o=this.positionToCoordinate(i),c=this.positionToCoordinate(r);this.fillDrawMethod(e,o,c)}}fillDrawMethod(e,i,r){e.set("draw",o=>{const c=this.axis.gridContainer.height(),m=this.width();r<i&&([r,i]=[i,r]),!(i>m||r<0)&&(o.moveTo(i,0),o.lineTo(r,0),o.lineTo(r,c),o.lineTo(i,c),o.lineTo(i,0))})}positionTooltip(e,i){this._positionTooltip(e,{x:this.positionToCoordinate(i),y:0})}updateTooltipBounds(e){const i=this.get("inside"),r=1e5;let o=this._display.toGlobal({x:0,y:0}),c=o.x,m=0,p=this.axisLength(),_=r,w="up";this.get("opposite")?i?(w="up",m=o.y,_=r):(w="down",m=o.y-r,_=r):i?(w="down",m=o.y-r,_=r):(w="up",m=o.y,_=r);const T={left:c,right:c+p,top:m,bottom:m+_},x=e.get("bounds");N.sameBounds(T,x)||(e.set("bounds",T),e.set("pointerOrientation",w))}}Object.defineProperty(as,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisRendererX"}),Object.defineProperty(as,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:di.classNames.concat([as.className])});class vi extends di{constructor(){super(...arguments),Object.defineProperty(this,"_downY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"thumb",{enumerable:!0,configurable:!0,writable:!0,value:ne.A.new(this._root,{height:G.AQ,isMeasured:!1,themeTags:["axis","y","thumb"]})})}_afterNew(){this._settings.themeTags=N.mergeTags(this._settings.themeTags,["renderer","y"]),this._settings.opposite&&this._settings.themeTags.push("opposite"),super._afterNew(),this.setPrivateRaw("letter","Y");const e=this.grid.template;e.set("width",G.AQ),e.set("height",0),e.set("draw",(i,r)=>{i.moveTo(0,0),i.lineTo(r.width(),0)}),this.set("draw",(i,r)=>{i.moveTo(0,0),i.lineTo(0,r.height())})}_getPan(e,i){return(e.y-i.y)/this.height()}_changed(){super._changed();const e=this.axis;e.ghostLabel.setPrivate("visible",!this.get("inside")),e.ghostLabel.set("y",-1e3);const i=this.thumb,r="opposite",o="inside",c=this.chart;if(this.isDirty(r)||this.isDirty(o)){const p=e.children;if(this.get(o)?e.addTag(o):e.removeTag(o),c){if(this.get(r)){const _=c.rightAxesContainer.children;-1==_.indexOf(e)&&_.moveValue(e,0),e.addTag(r),p.moveValue(this,0)}else{const _=c.leftAxesContainer.children;-1==_.indexOf(e)&&_.moveValue(e),e.removeTag(r),p.moveValue(this)}e.ghostLabel._applyThemes(),this.labels.each(_=>{_._applyThemes()}),this.root._markDirtyRedraw()}e.markDirtySize()}const m=e.labelsContainer.width();c&&(this.get(r)?i.set("centerX",0):i.set("centerX",m)),i.setPrivate("width",m)}processAxis(){super.processAxis();const e=this.axis;null==e.get("height")&&e.set("height",G.AQ);const i=this._root.horizontalLayout;e.set("layout",i),e.labelsContainer.set("height",G.AQ),e.axisHeader.set("layout",i)}_updatePositions(){const e=this.axis,i=e.y()-N.relativeToValue(e.get("centerY",0),e.height());e.gridContainer.set("y",i),e.topGridContainer.set("y",i),e.bulletsContainer.set("x",this.x());const r=e.chart;if(r){const o=r.plotContainer,c=e.axisHeader;let m=e.get("marginTop",0);c.children.length>0?(m=e.axisHeader.height(),e.set("marginTop",m+1)):c.set("height",m),c.setAll({y:e.y()-m,x:-1,width:o.width()+2})}}axisLength(){return this.axis.innerHeight()}positionToPoint(e){return{x:0,y:this.positionToCoordinate(e)}}updateLabel(e,i,r,o){if(e){R.isNumber(i)||(i=0);let c=.5;c=R.isNumber(o)&&o>1?e.get("multiLocation",c):e.get("location",c);const m=this.get("opposite"),p=e.get("inside",this.get("inside",!1));m?(e.set("x",0),e.set("position",p?"absolute":"relative")):p?(e.set("x",0),e.set("position","absolute")):(e.set("x",void 0),e.set("position","relative")),R.isNumber(r)&&r!=i&&(i+=(r-i)*c),e.set("y",this.positionToCoordinate(i)),this.toggleVisibility(e,i,e.get("minPosition",0),e.get("maxPosition",1))}}updateGrid(e,i,r){if(e){R.isNumber(i)||(i=0);let o=e.get("location",.5);R.isNumber(r)&&r!=i&&(i+=(r-i)*o),e.set("y",this.positionToCoordinate(i)),this.toggleVisibility(e,i,0,1)}}updateTick(e,i,r,o){if(e){R.isNumber(i)||(i=0);let c=.5;c=R.isNumber(o)&&o>1?e.get("multiLocation",c):e.get("location",c),R.isNumber(r)&&r!=i&&(i+=(r-i)*c),e.set("y",this.positionToCoordinate(i));let m=e.get("length",0);const p=e.get("inside",this.get("inside",!1));this.get("opposite")?(e.set("x",0),p&&(m*=-1)):p||(m*=-1),e.set("draw",_=>{_.moveTo(0,0),_.lineTo(m,0)}),this.toggleVisibility(e,i,e.get("minPosition",0),e.get("maxPosition",1))}}updateBullet(e,i,r){if(e){const o=e.get("sprite");if(o){R.isNumber(i)||(i=0);let c=e.get("location",.5);R.isNumber(r)&&r!=i&&(i+=(r-i)*c);let m=this.axis.roundAxisPosition(i,c),p=this.axis._bullets[m],_=1;if(this.get("opposite")&&(_=-1),e.get("stacked"))if(p){let w=p.get("sprite");w&&o.set("x",w.x()+w.width()*_)}else o.set("x",0);this.axis._bullets[m]=e,o.set("y",this.positionToCoordinate(i)),this.toggleVisibility(o,i,0,1)}}}updateFill(e,i,r){if(e){R.isNumber(i)||(i=0),R.isNumber(r)||(r=1);let o=this.positionToCoordinate(i),c=this.positionToCoordinate(r);this.fillDrawMethod(e,o,c)}}fillDrawMethod(e,i,r){e.set("draw",o=>{const c=this.axis.gridContainer.width(),m=this.height();r<i&&([r,i]=[i,r]),!(i>m||r<0)&&(o.moveTo(0,i),o.lineTo(c,i),o.lineTo(c,r),o.lineTo(0,r),o.lineTo(0,i))})}positionToCoordinate(e){return this._inversed?(e-this._start)*this._axisLength:(this._end-e)*this._axisLength}positionTooltip(e,i){this._positionTooltip(e,{x:0,y:this.positionToCoordinate(i)})}updateTooltipBounds(e){const i=this.get("inside"),r=1e5;let o=this._display.toGlobal({x:0,y:0}),c=o.y,m=0,p=this.axisLength(),_=r,w="right";this.get("opposite")?i?(w="right",m=o.x-r,_=r):(w="left",m=o.x,_=r):i?(w="left",m=o.x,_=r):(w="right",m=o.x-r,_=r);const T={left:m,right:m+_,top:c,bottom:c+p},x=e.get("bounds");N.sameBounds(T,x)||(e.set("bounds",T),e.set("pointerOrientation",w))}_updateLC(){const e=this.axis,i=e.parent;if(i){const r=i.innerHeight();this._lc=this.axisLength()/r,this._ls=e.y()/r}}toAxisPosition(e){const i=this._start||0,r=this._end||1;return e=(e-=this._ls)*(r-i)/this._lc,this.get("inversed")?i+e:r-e}fixPosition(e){return this.get("inversed")?e:1-e}}Object.defineProperty(vi,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisRendererY"}),Object.defineProperty(vi,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:di.classNames.concat([vi.className])});var Ri=F(867);class fi extends Ri.c{_beforeChanged(){super._beforeChanged(),(this.isDirty("lowX0")||this.isDirty("lowY0")||this.isDirty("lowX1")||this.isDirty("lowY1")||this.isDirty("highX0")||this.isDirty("highX1")||this.isDirty("highY0")||this.isDirty("highY1"))&&(this._clear=!0)}_draw(){super._draw();const e=this._display;e.moveTo(this.get("lowX0",0),this.get("lowY0",0)),e.lineTo(this.get("lowX1",0),this.get("lowY1",0)),e.moveTo(this.get("highX0",0),this.get("highY0",0)),e.lineTo(this.get("highX1",0),this.get("highY1",0))}}Object.defineProperty(fi,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Candlestick"}),Object.defineProperty(fi,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ri.c.classNames.concat([fi.className])});class ni extends Qe{constructor(){super(...arguments),Object.defineProperty(this,"columns",{enumerable:!0,configurable:!0,writable:!0,value:new P.o(Nt.YS.new({}),()=>Ri.c._new(this._root,{position:"absolute",themeTags:N.mergeTags(this.columns.template.get("themeTags",[]),["series","column"])},[this.columns.template]))})}makeColumn(e,i){const r=this.mainContainer.children.push(i.make());return r._setDataItem(e),i.push(r),r}_processAxisRange(e){super._processAxisRange(e),e.columns=new P.o(Nt.YS.new({}),()=>Ri.c._new(this._root,{position:"absolute",themeTags:N.mergeTags(e.columns.template.get("themeTags",[]),["series","column"])},[this.columns.template,e.columns.template]))}}Object.defineProperty(ni,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ColumnSeries"}),Object.defineProperty(ni,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Qe.classNames.concat([ni.className])});class Ii extends ni{constructor(){super(...arguments),Object.defineProperty(this,"columns",{enumerable:!0,configurable:!0,writable:!0,value:new P.o(Nt.YS.new({themeTags:["autocolor"]}),()=>fi._new(this._root,{themeTags:N.mergeTags(this.columns.template.get("themeTags",[]),["candlestick","series","column"])},[this.columns.template]))})}makeColumn(e,i){const r=this.mainContainer.children.push(i.make());return r._setDataItem(e),i.push(r),r}_updateGraphics(e,i){super._updateGraphics(e,i);const r=this.getRaw("xAxis"),o=this.getRaw("yAxis"),c=this.getRaw("baseAxis");let _,w,T,x,C,K,ee,te,fe,m=this.get("vcy",1),p=this.get("vcx",1),$=this.get("locationX",e.get("locationX",.5)),ae=this.get("locationY",e.get("locationY",.5)),ge=this.get("openLocationX",e.get("openLocationX",$)),oe=this.get("openLocationY",e.get("openLocationY",ae));if(o===c){let ye=r.getDataItemPositionX(e,this._xOpenField,1,p),we=r.getDataItemPositionX(e,this._xField,1,p);w=r.getDataItemPositionX(e,this._xLowField,1,p),K=r.getDataItemPositionX(e,this._xHighField,1,p),C=Math.max(ye,we),_=Math.min(ye,we);let Ze=this._aLocationY0+oe-.5;T=o.getDataItemPositionY(e,this._yField,Ze+(this._aLocationY1+ae-.5-Ze)/2,m),x=T,ee=T,te=T,fe="horizontal"}else{let ye=o.getDataItemPositionY(e,this._yOpenField,1,m),we=o.getDataItemPositionY(e,this._yField,1,m);x=o.getDataItemPositionY(e,this._yLowField,1,m),te=o.getDataItemPositionY(e,this._yHighField,1,m),ee=Math.max(ye,we),T=Math.min(ye,we);let Ze=this._aLocationX0+ge-.5;_=r.getDataItemPositionX(e,this._xField,Ze+(this._aLocationX1+$-.5-Ze)/2,p),w=_,C=_,K=_,fe="vertical"}this._updateCandleGraphics(e,_,w,T,x,C,K,ee,te,fe)}_updateCandleGraphics(e,i,r,o,c,m,p,_,w,T){let x=e.get("graphics");if(x){let C=this.getPoint(i,o),K=this.getPoint(r,c),ee=this.getPoint(m,_),te=this.getPoint(p,w),$=x.x(),ae=x.y();x.set("lowX0",C.x-$),x.set("lowY0",C.y-ae),x.set("lowX1",K.x-$),x.set("lowY1",K.y-ae),x.set("highX0",ee.x-$),x.set("highY0",ee.y-ae),x.set("highX1",te.x-$),x.set("highY1",te.y-ae),x.set("orientation",T);let ge=e.get("rangeGraphics");ge&&v.each(ge,oe=>{oe.set("lowX0",C.x-$),oe.set("lowY0",C.y-ae),oe.set("lowX1",K.x-$),oe.set("lowY1",K.y-ae),oe.set("highX0",ee.x-$),oe.set("highY0",ee.y-ae),oe.set("highX1",te.x-$),oe.set("highY1",te.y-ae),oe.set("orientation",T)})}}_processAxisRange(e){super._processAxisRange(e),e.columns=new P.o(Nt.YS.new({}),()=>fi._new(this._root,{themeTags:N.mergeTags(e.columns.template.get("themeTags",[]),["candlestick","series","column"])},[this.columns.template,e.columns.template]))}}Object.defineProperty(Ii,"className",{enumerable:!0,configurable:!0,writable:!0,value:"CandlestickSeries"}),Object.defineProperty(Ii,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ni.classNames.concat([Ii.className])});class qt extends fi{_draw(){const e=this._display;e.moveTo(this.get("lowX1",0),this.get("lowY1",0)),e.lineTo(this.get("highX1",0),this.get("highY1",0));let i=this.width(),r=this.height();if("vertical"==this.get("orientation")){let o=r,c=0;e.moveTo(0,o),e.lineTo(i/2,o),e.moveTo(i/2,c),e.lineTo(i,c)}else{let o=0,c=i;e.moveTo(o,0),e.lineTo(o,r/2),e.moveTo(c,r/2),e.lineTo(c,r)}}}Object.defineProperty(qt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"OHLC"}),Object.defineProperty(qt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:fi.classNames.concat([qt.className])});class Vi extends Ii{constructor(){super(...arguments),Object.defineProperty(this,"columns",{enumerable:!0,configurable:!0,writable:!0,value:new P.o(Nt.YS.new({themeTags:["autocolor"]}),()=>qt._new(this._root,{themeTags:N.mergeTags(this.columns.template.get("themeTags",[]),["ohlc","series","column"])},[this.columns.template]))})}makeColumn(e,i){const r=this.mainContainer.children.push(i.make());return r._setDataItem(e),i.push(r),r}_processAxisRange(e){super._processAxisRange(e),e.columns=new P.o(Nt.YS.new({}),()=>qt._new(this._root,{themeTags:N.mergeTags(e.columns.template.get("themeTags",[]),["ohlc","series","column"])},[this.columns.template,e.columns.template]))}}function wt(ie){return"object"==typeof ie&&"length"in ie?ie:Array.from(ie)}Object.defineProperty(Vi,"className",{enumerable:!0,configurable:!0,writable:!0,value:"OHLCSeries"}),Object.defineProperty(Vi,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ii.classNames.concat([Vi.className])});var Ct=F(6979);function Ui(ie){this._context=ie}function fs(ie){return new Ui(ie)}Ui.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(ie,e){switch(ie=+ie,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(ie,e):this._context.moveTo(ie,e);break;case 1:this._point=2;default:this._context.lineTo(ie,e)}}};var gs=F(5831);function ps(ie){return ie[0]}function Hi(ie){return ie[1]}function ks(ie,e){var i=(0,Ct.Z)(!0),r=null,o=fs,c=null,m=(0,gs.d)(p);function p(_){var w,x,K,T=(_=wt(_)).length,C=!1;for(null==r&&(c=o(K=m())),w=0;w<=T;++w)!(w<T&&i(x=_[w],w,_))===C&&((C=!C)?c.lineStart():c.lineEnd()),C&&c.point(+ie(x,w,_),+e(x,w,_));if(K)return c=null,K+""||null}return ie="function"==typeof ie?ie:void 0===ie?ps:(0,Ct.Z)(ie),e="function"==typeof e?e:void 0===e?Hi:(0,Ct.Z)(e),p.x=function(_){return arguments.length?(ie="function"==typeof _?_:(0,Ct.Z)(+_),p):ie},p.y=function(_){return arguments.length?(e="function"==typeof _?_:(0,Ct.Z)(+_),p):e},p.defined=function(_){return arguments.length?(i="function"==typeof _?_:(0,Ct.Z)(!!_),p):i},p.curve=function(_){return arguments.length?(o=_,null!=r&&(c=o(r)),p):o},p.context=function(_){return arguments.length?(null==_?r=c=null:c=o(r=_),p):r},p}function ms(ie,e,i){var r=null,o=(0,Ct.Z)(!0),c=null,m=fs,p=null,_=(0,gs.d)(w);function w(x){var C,K,ee,$,ge,te=(x=wt(x)).length,ae=!1,oe=new Array(te),fe=new Array(te);for(null==c&&(p=m(ge=_())),C=0;C<=te;++C){if(!(C<te&&o($=x[C],C,x))===ae)if(ae=!ae)K=C,p.areaStart(),p.lineStart();else{for(p.lineEnd(),p.lineStart(),ee=C-1;ee>=K;--ee)p.point(oe[ee],fe[ee]);p.lineEnd(),p.areaEnd()}ae&&(oe[C]=+ie($,C,x),fe[C]=+e($,C,x),p.point(r?+r($,C,x):oe[C],i?+i($,C,x):fe[C]))}if(ge)return p=null,ge+""||null}function T(){return ks().defined(o).curve(m).context(c)}return ie="function"==typeof ie?ie:void 0===ie?ps:(0,Ct.Z)(+ie),e="function"==typeof e?e:(0,Ct.Z)(void 0===e?0:+e),i="function"==typeof i?i:void 0===i?Hi:(0,Ct.Z)(+i),w.x=function(x){return arguments.length?(ie="function"==typeof x?x:(0,Ct.Z)(+x),r=null,w):ie},w.x0=function(x){return arguments.length?(ie="function"==typeof x?x:(0,Ct.Z)(+x),w):ie},w.x1=function(x){return arguments.length?(r=null==x?null:"function"==typeof x?x:(0,Ct.Z)(+x),w):r},w.y=function(x){return arguments.length?(e="function"==typeof x?x:(0,Ct.Z)(+x),i=null,w):e},w.y0=function(x){return arguments.length?(e="function"==typeof x?x:(0,Ct.Z)(+x),w):e},w.y1=function(x){return arguments.length?(i=null==x?null:"function"==typeof x?x:(0,Ct.Z)(+x),w):i},w.lineX0=w.lineY0=function(){return T().x(ie).y(e)},w.lineY1=function(){return T().x(ie).y(i)},w.lineX1=function(){return T().x(r).y(e)},w.defined=function(x){return arguments.length?(o="function"==typeof x?x:(0,Ct.Z)(!!x),w):o},w.curve=function(x){return arguments.length?(m=x,null!=c&&(p=m(c)),w):m},w.context=function(x){return arguments.length?(null==x?c=p=null:p=m(c=x),w):c},w}class Zt extends dt{constructor(){super(...arguments),Object.defineProperty(this,"_endIndex",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeGenerator",{enumerable:!0,configurable:!0,writable:!0,value:ks()}),Object.defineProperty(this,"_fillGenerator",{enumerable:!0,configurable:!0,writable:!0,value:ms()}),Object.defineProperty(this,"_legendStroke",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_legendFill",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"strokes",{enumerable:!0,configurable:!0,writable:!0,value:new P.o(Nt.YS.new({}),()=>M.T._new(this._root,{themeTags:N.mergeTags(this.strokes.template.get("themeTags",[]),["line","series","stroke"])},[this.strokes.template]))}),Object.defineProperty(this,"fills",{enumerable:!0,configurable:!0,writable:!0,value:new P.o(Nt.YS.new({}),()=>M.T._new(this._root,{themeTags:N.mergeTags(this.strokes.template.get("themeTags",[]),["line","series","fill"])},[this.fills.template]))}),Object.defineProperty(this,"_fillTemplate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeTemplate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_previousPoint",{enumerable:!0,configurable:!0,writable:!0,value:[0,0,0,0]}),Object.defineProperty(this,"_dindex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_sindex",{enumerable:!0,configurable:!0,writable:!0,value:0})}_afterNew(){this._fillGenerator.y0(function(e){return e[3]}),this._fillGenerator.x0(function(e){return e[2]}),this._fillGenerator.y1(function(e){return e[1]}),this._fillGenerator.x1(function(e){return e[0]}),super._afterNew()}makeStroke(e){const i=this.mainContainer.children.push(e.make());return e.push(i),i}makeFill(e){const i=this.mainContainer.children.push(e.make());return e.push(i),i}_updateChildren(){this._strokeTemplate=void 0,this._fillTemplate=void 0;let e=this.get("xAxis"),i=this.get("yAxis");if(this.isDirty("stroke")){const r=this.get("stroke");this.strokes.template.set("stroke",r);const o=this._legendStroke;o&&o.states.lookup("default").set("stroke",r)}if(this.isDirty("fill")){const r=this.get("fill");this.fills.template.set("fill",r);const o=this._legendFill;o&&o.states.lookup("default").set("fill",r)}if(this.isDirty("curveFactory")){const r=this.get("curveFactory");r&&(this._strokeGenerator.curve(r),this._fillGenerator.curve(r))}if(e.inited&&i.inited){if(this._axesDirty||this._valuesDirty||this._stackDirty||this.isDirty("vcx")||this.isDirty("vcy")||this._sizeDirty||this.isDirty("connect")||this.isDirty("curveFactory")){this.fills.each(T=>{T.setPrivate("visible",!1)}),this.strokes.each(T=>{T.setPrivate("visible",!1)}),this.axisRanges.each(T=>{let x=T.fills;x&&x.each(K=>{K.setPrivate("visible",!1)});let C=T.strokes;C&&C.each(K=>{K.setPrivate("visible",!1)})});let r=this.startIndex(),o=this.strokes.template.get("templateField"),c=this.fills.template.get("templateField"),m=!0,p=!0;o&&(m=!1),c&&(p=!1);for(let T=r-1;T>=0;T--){let x=this.dataItems[T],C=!0,K=x.dataContext;if(o&&K[o]&&(m=!0),c&&K[c]&&(p=!0),v.each(this._valueFields,ee=>{R.isNumber(x.get(ee))||(C=!1)}),C&&m&&p){r=T;break}}let _=this.dataItems.length,w=this.endIndex();if(w<_){w++;for(let T=w;T<_;T++){let x=this.dataItems[T],C=!0;if(v.each(this._valueFields,K=>{R.isNumber(x.get(K))||(C=!1)}),C){w=T+1;break}}}if(r>0&&r--,this._endIndex=w,this._clearGraphics(),this._sindex=0,this._dindex=r,1==this.dataItems.length)this._startSegment(0);else for(;this._dindex<w-1;)this._startSegment(this._dindex),this._sindex++}}else this._skipped=!0;super._updateChildren()}_clearGraphics(){this.strokes.clear(),this.fills.clear()}_startSegment(e){let i=this._endIndex,r=i;const o=this.get("autoGapCount"),c=this.get("connect"),m=this.makeFill(this.fills),p=this._fillTemplate;p&&p!=this.fills.template&&(m.template=p),m.setPrivate("visible",!0);const w=this.makeStroke(this.strokes),T=this._strokeTemplate;T&&T!=this.strokes.template&&(w.template=T),w.setPrivate("visible",!0);let x=this.get("xAxis"),C=this.get("yAxis"),K=this.get("baseAxis"),ee=this.get("vcx",1),te=this.get("vcy",1),$=this._xField,ae=this._yField,ge=this._xOpenField,oe=this._yOpenField;const fe=this.get("openValueXField"),ye=this.get("openValueYField");fe||(ge=this._xField),ye||(oe=this._yField);const we=this.get("stacked"),Ze=x.basePosition(),Fe=C.basePosition();let st;st=K===C?this._yField:this._xField;const Be=[];let qe=[];Be.push(qe);const rt=this.strokes.template.get("templateField"),Bt=this.fills.template.get("templateField");let It=this.get("locationX",.5),Lt=this.get("locationY",.5),mt=this.get("openLocationX",It),Je=this.get("openLocationY",Lt);const nt=this.get("minDistance",0);let et,Oi=this.fills.template.get("visible");this.axisRanges.length>0&&(Oi=!0);let ei=!1;(we||fe||ye)&&(ei=!0);const xi={points:qe,segments:Be,stacked:we,getOpen:ei,basePosX:Ze,basePosY:Fe,fillVisible:Oi,xField:$,yField:ae,xOpenField:ge,yOpenField:oe,vcx:ee,vcy:te,baseAxis:K,xAxis:x,yAxis:C,locationX:It,locationY:Lt,openLocationX:mt,openLocationY:Je,minDistance:nt};for(et=e;et<r;et++){this._dindex=et;const Pt=this._dataItems[et];let Qt=Pt.get($),ki=Pt.get(ae);if(null==Qt||null==ki?c||(qe=[],Be.push(qe),xi.points=qe):this._getPoints(Pt,xi),rt){let St=Pt.dataContext[rt];if(St){if(St instanceof Nt.YS||(St=Nt.YS.new(St)),this._strokeTemplate=St,et>e){r=et;break}w.template=St}}if(Bt){let St=Pt.dataContext[Bt];if(St){if(St instanceof Nt.YS||(St=Nt.YS.new(St)),this._fillTemplate=St,et>e){r=et;break}m.template=St}}if(!c){let St=this.dataItems[et+1];St&&K.shouldGap(Pt,St,o,st)&&(qe=[],Be.push(qe),xi.points=qe)}}m.setRaw("userData",[e,et]),w.setRaw("userData",[e,et]),et===i&&this._endLine(qe,Be[0][0]),w&&this._drawStroke(w,Be),m&&this._drawFill(m,Be),this.axisRanges.each(Pt=>{const Qt=Pt.container,St=this.makeFill(Pt.fills);Qt&&Qt.children.push(St),St.setPrivate("visible",!0),this._drawFill(St,Be);const $i=this.makeStroke(Pt.strokes);Qt&&Qt.children.push($i),$i.setPrivate("visible",!0),this._drawStroke($i,Be),St.setRaw("userData",[e,et]),$i.setRaw("userData",[e,et])})}_getPoints(e,i){let r=i.points,o=e.get("locationX",i.locationX),c=e.get("locationY",i.locationY),m=i.xAxis.getDataItemPositionX(e,i.xField,o,i.vcx),p=i.yAxis.getDataItemPositionY(e,i.yField,c,i.vcy);if(this._shouldInclude(m)){const _=this.getPoint(m,p),w=[_.x,_.y];if(_.x+=this._x,_.y+=this._y,e.set("point",_),i.fillVisible){let T=m,x=p;if(i.baseAxis===i.xAxis?x=i.basePosY:i.baseAxis===i.yAxis&&(T=i.basePosX),i.getOpen){let K=e.get(i.xOpenField),ee=e.get(i.yOpenField);if(null!=K&&null!=ee){let te=e.get("openLocationX",i.openLocationX),$=e.get("openLocationY",i.openLocationY);if(i.stacked){let ae=e.get("stackToItemX"),ge=e.get("stackToItemY");ae?(T=i.xAxis.getDataItemPositionX(ae,i.xField,te,ae.component.get("vcx")),R.isNaN(T)&&(T=i.basePosX)):T=i.yAxis===i.baseAxis?i.basePosX:i.xAxis.getDataItemPositionX(e,i.xOpenField,te,i.vcx),ge?(x=i.yAxis.getDataItemPositionY(ge,i.yField,$,ge.component.get("vcy")),R.isNaN(x)&&(x=i.basePosY)):x=i.xAxis===i.baseAxis?i.basePosY:i.yAxis.getDataItemPositionY(e,i.yOpenField,$,i.vcy)}else T=i.xAxis.getDataItemPositionX(e,i.xOpenField,te,i.vcx),x=i.yAxis.getDataItemPositionY(e,i.yOpenField,$,i.vcy)}}let C=this.getPoint(T,x);w[2]=C.x,w[3]=C.y}if(i.minDistance>0){const C=w[2],K=w[3],ee=this._previousPoint,ae=ee[2],ge=ee[3];(Math.hypot(w[0]-ee[0],w[1]-ee[1])>i.minDistance||C&&K&&Math.hypot(C-ae,K-ge)>i.minDistance)&&(r.push(w),this._previousPoint=w)}else r.push(w)}}_endLine(e,i){}_drawStroke(e,i){e.get("visible")&&!e.get("forceHidden")&&e.set("draw",r=>{v.each(i,o=>{this._strokeGenerator.context(r),this._strokeGenerator(o)})})}_drawFill(e,i){e.get("visible")&&!e.get("forceHidden")&&e.set("draw",r=>{v.each(i,o=>{this._fillGenerator.context(r),this._fillGenerator(o)})})}_processAxisRange(e){super._processAxisRange(e),e.fills=new P.o(Nt.YS.new({}),()=>M.T._new(this._root,{themeTags:N.mergeTags(e.fills.template.get("themeTags",[]),["line","series","fill"])},[this.fills.template,e.fills.template])),e.strokes=new P.o(Nt.YS.new({}),()=>M.T._new(this._root,{themeTags:N.mergeTags(e.strokes.template.get("themeTags",[]),["line","series","stroke"])},[this.strokes.template,e.strokes.template]))}createLegendMarker(e){const i=this.get("legendDataItem");if(i){const r=i.get("marker"),o=i.get("markerRectangle");o&&o.setPrivate("visible",!1),r.set("background",ne.A.new(r._root,{fillOpacity:0,fill:(0,H.$_)(0)}));const c=r.children.push(M.T._new(r._root,{themeTags:["line","series","legend","marker","stroke"],interactive:!1},[this.strokes.template]));this._legendStroke=c;const m=r.children.push(M.T._new(r._root,{themeTags:["line","series","legend","marker","fill"]},[this.fills.template]));this._legendFill=m;const p=this._root.interfaceColors.get("disabled");if(c.states.create("disabled",{fill:p,stroke:p}),m.states.create("disabled",{fill:p,stroke:p}),this.bullets.length>0){const _=this.bullets.getIndex(0);if(_){const w=_(r._root,this,new pe.z(this,{legend:!0},{}));if(w){const T=w.get("sprite");T instanceof M.T&&T.states.create("disabled",{fill:p,stroke:p}),T&&(T.set("tooltipText",void 0),T.set("tooltipHTML",void 0),r.children.push(T),T.setAll({x:r.width()/2,y:r.height()/2}))}}}}}}Object.defineProperty(Zt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"LineSeries"}),Object.defineProperty(Zt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:dt.classNames.concat([Zt.className])});class bs{constructor(e,i){Object.defineProperty(this,"_line",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_point",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_x0",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_x1",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_y0",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_y1",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_t0",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_tension",{enumerable:!0,configurable:!0,writable:!0,value:0}),this._context=e,this._tension=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0}lineEnd(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:xs(this,this._t0,vs(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,i){[e,i]=[i,e];let r=NaN;if(i=+i,(e=+e)!==this._x1||i!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(i,e):this._context.moveTo(i,e);break;case 1:this._point=2;break;case 2:this._point=3,xs(this,vs(this,r=ys(this,e,i)),r);break;default:xs(this,this._t0,r=ys(this,e,i))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=i,this._t0=r}}}function Wi(ie){function e(i){return new bs(i,ie)}return e.tension=function(i){return Wi(+i)},e}function _s(ie){return ie<0?-1:1}function ys(ie,e,i){let r=ie._x1-ie._x0,o=e-ie._x1,c=(ie._y1-ie._y0)/(r||o<0&&-0),m=(i-ie._y1)/(o||r<0&&-0),p=(c*o+m*r)/(r+o);return(_s(c)+_s(m))*Math.min(Math.abs(c),Math.abs(m),.5*Math.abs(p))||0}function vs(ie,e){let i=ie._x1-ie._x0;return i?(3*(ie._y1-ie._y0)/i-e)/2:e}function xs(ie,e,i){let r=ie._x0,c=ie._x1,m=ie._y1,p=(c-r)/1.5*(1-ie._tension);ie._context.bezierCurveTo(ie._y0+p*e,r+p,m-p*i,c-p,m,c)}class Zi extends Zt{_afterNew(){this._setDefault("curveFactory",Wi(this.get("tension",.5))),super._afterNew()}_updateChildren(){this.isDirty("tension")&&(this.set("curveFactory",Wi(this.get("tension",.5))),this._valuesDirty=!0),super._updateChildren()}}Object.defineProperty(Zi,"className",{enumerable:!0,configurable:!0,writable:!0,value:"SmoothedYLineSeries"}),Object.defineProperty(Zi,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Zt.classNames.concat([Zi.className])});class os{constructor(e,i){Object.defineProperty(this,"_line",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_point",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_x0",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_x1",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_y0",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_y1",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_t0",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_tension",{enumerable:!0,configurable:!0,writable:!0,value:0}),this._context=e,this._tension=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0}lineEnd(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:gi(this,this._t0,ji(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,i){let r=NaN;if(i=+i,(e=+e)!==this._x1||i!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,i):this._context.moveTo(e,i);break;case 1:this._point=2;break;case 2:this._point=3,gi(this,ji(this,r=Ps(this,e,i)),r);break;default:gi(this,this._t0,r=Ps(this,e,i))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=i,this._t0=r}}}function Qi(ie){return function e(i){return new os(i,ie)}}function ws(ie){return ie<0?-1:1}function Ps(ie,e,i){let r=ie._x1-ie._x0,o=e-ie._x1,c=(ie._y1-ie._y0)/(r||o<0&&-0),m=(i-ie._y1)/(o||r<0&&-0),p=(c*o+m*r)/(r+o);return(ws(c)+ws(m))*Math.min(Math.abs(c),Math.abs(m),.5*Math.abs(p))||0}function ji(ie,e){let i=ie._x1-ie._x0;return i?(3*(ie._y1-ie._y0)/i-e)/2:e}function gi(ie,e,i){let r=ie._x0,c=ie._x1,m=ie._y1,p=(c-r)/1.5*(1-ie._tension);ie._context.bezierCurveTo(r+p,ie._y0+p*e,c-p,m-p*i,c,m)}class Mi extends Zt{_afterNew(){this._setDefault("curveFactory",Qi(this.get("tension",.5))),super._afterNew()}_updateChildren(){this.isDirty("tension")&&(this.set("curveFactory",Qi(this.get("tension",.5))),this._valuesDirty=!0),super._updateChildren()}}function Ci(ie,e,i){ie._context.bezierCurveTo(ie._x1+ie._k*(ie._x2-ie._x0),ie._y1+ie._k*(ie._y2-ie._y0),ie._x2+ie._k*(ie._x1-e),ie._y2+ie._k*(ie._y1-i),ie._x2,ie._y2)}function ls(ie,e){this._context=ie,this._k=(1-e)/6}Object.defineProperty(Mi,"className",{enumerable:!0,configurable:!0,writable:!0,value:"SmoothedXLineSeries"}),Object.defineProperty(Mi,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Zt.classNames.concat([Mi.className])}),ls.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ci(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(ie,e){switch(ie=+ie,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(ie,e):this._context.moveTo(ie,e);break;case 1:this._point=2,this._x1=ie,this._y1=e;break;case 2:this._point=3;default:Ci(this,ie,e)}this._x0=this._x1,this._x1=this._x2,this._x2=ie,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Ki=function ie(e){function i(r){return new ls(r,e)}return i.tension=function(r){return ie(+r)},i}(0);class Si extends Zt{_afterNew(){this._setDefault("curveFactory",Ki.tension(this.get("tension",.5))),super._afterNew()}_updateChildren(){this.isDirty("tension")&&(this.set("curveFactory",Ki.tension(this.get("tension",.5))),this._valuesDirty=!0),super._updateChildren()}}function Ni(ie,e){this._context=ie,this._t=e}function Ls(ie){return new Ni(ie,1)}Object.defineProperty(Si,"className",{enumerable:!0,configurable:!0,writable:!0,value:"SmoothedXYLineSeries"}),Object.defineProperty(Si,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Zt.classNames.concat([Si.className])}),Ni.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(ie,e){switch(ie=+ie,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(ie,e):this._context.moveTo(ie,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(ie,e);else{var i=this._x*(1-this._t)+ie*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,e)}}this._x=ie,this._y=e}};class Bi extends Zt{_afterNew(){this._setDefault("curveFactory",Ls),super._afterNew()}_getPoints(e,i){let r=i.points,o=this.get("stepWidth",G.AQ).value/2,c=e.get("locationX",i.locationX),m=e.get("locationY",i.locationY),p=c,_=m;i.baseAxis===i.xAxis?(c-=o,p+=o):i.baseAxis===i.yAxis&&(m-=o,_+=o);let w=i.xAxis.getDataItemPositionX(e,i.xField,c,i.vcx),T=i.yAxis.getDataItemPositionY(e,i.yField,m,i.vcy),x=i.xAxis.getDataItemPositionX(e,i.xField,p,i.vcx),C=i.yAxis.getDataItemPositionY(e,i.yField,_,i.vcy);if(this._shouldInclude(w)){const K=this.getPoint(w,T),ee=[K.x,K.y],te=this.getPoint(x,C),$=[te.x,te.y];if(i.fillVisible){let ae=w,ge=T,oe=x,fe=C;if(i.baseAxis===i.xAxis?(ge=i.basePosY,fe=i.basePosY):i.baseAxis===i.yAxis&&(ae=i.basePosX,oe=i.basePosX),i.getOpen){let Ze=e.get(i.xOpenField),Fe=e.get(i.yOpenField);if(null!=Ze&&null!=Fe)if(c=e.get("openLocationX",i.openLocationX),m=e.get("openLocationY",i.openLocationY),p=c,_=m,i.baseAxis===i.xAxis?(c-=o,p+=o):i.baseAxis===i.yAxis&&(m-=o,_+=o),i.stacked){let st=e.get("stackToItemX"),Be=e.get("stackToItemY");st?(ae=i.xAxis.getDataItemPositionX(st,i.xField,c,st.component.get("vcx")),oe=i.xAxis.getDataItemPositionX(st,i.xField,p,st.component.get("vcx"))):i.yAxis===i.baseAxis?(ae=i.basePosX,oe=i.basePosX):i.baseAxis===i.yAxis&&(ae=i.xAxis.getDataItemPositionX(e,i.xOpenField,c,i.vcx),oe=i.xAxis.getDataItemPositionX(e,i.xOpenField,p,i.vcx)),Be?(ge=i.yAxis.getDataItemPositionY(Be,i.yField,m,Be.component.get("vcy")),fe=i.yAxis.getDataItemPositionY(Be,i.yField,_,Be.component.get("vcy"))):i.xAxis===i.baseAxis?(ge=i.basePosY,fe=i.basePosY):i.baseAxis===i.yAxis&&(ge=i.yAxis.getDataItemPositionY(e,i.yOpenField,m,i.vcy),fe=i.yAxis.getDataItemPositionY(e,i.yOpenField,_,i.vcy))}else ae=i.xAxis.getDataItemPositionX(e,i.xOpenField,c,i.vcx),ge=i.yAxis.getDataItemPositionY(e,i.yOpenField,m,i.vcy),oe=i.xAxis.getDataItemPositionX(e,i.xOpenField,p,i.vcx),fe=i.yAxis.getDataItemPositionY(e,i.yOpenField,_,i.vcy)}let ye=this.getPoint(ae,ge),we=this.getPoint(oe,fe);ee[2]=ye.x,ee[3]=ye.y,$[2]=we.x,$[3]=we.y}r.push(ee),r.push($),e.set("point",{x:ee[0]+($[0]-ee[0])/2,y:ee[1]+($[1]-ee[1])/2})}this.get("noRisers")&&(i.points=[],i.segments.push(r))}}Object.defineProperty(Bi,"className",{enumerable:!0,configurable:!0,writable:!0,value:"StepLineSeries"}),Object.defineProperty(Bi,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Zt.classNames.concat([Bi.className])})},1783:(Mt,Xe,F)=>{var Ee=F(7935);function G(z,v,X){v=v||1;for(var B,ne,L,P,H=0;H<z[0].length;H++){var ue=z[0][H];(!H||ue[0]<B)&&(B=ue[0]),(!H||ue[1]<ne)&&(ne=ue[1]),(!H||ue[0]>L)&&(L=ue[0]),(!H||ue[1]>P)&&(P=ue[1])}var M=L-B,W=P-ne,N=Math.min(M,W),be=N/2;if(0===N){var Se=[B,ne];return Se.distance=0,Se}for(var U=new Ee(void 0,xe),Re=B;Re<L;Re+=N)for(var Ge=ne;Ge<P;Ge+=N)U.push(new _e(Re+be,Ge+be,be,z));var We=function R(z){for(var v=0,X=0,B=0,ne=z[0],L=0,P=ne.length,H=P-1;L<P;H=L++){var ue=ne[L],M=ne[H],W=ue[0]*M[1]-M[0]*ue[1];X+=(ue[0]+M[0])*W,B+=(ue[1]+M[1])*W,v+=3*W}return 0===v?new _e(ne[0][0],ne[0][1],0,z):new _e(X/v,B/v,0,z)}(z),pe=new _e(B+M/2,ne+W/2,0,z);pe.d>We.d&&(We=pe);for(var xt=U.length;U.length;){var lt=U.pop();lt.d>We.d&&(We=lt,X&&console.log("found best %d after %d probes",Math.round(1e4*lt.d)/1e4,xt)),!(lt.max-We.d<=v)&&(U.push(new _e(lt.x-(be=lt.h/2),lt.y-be,be,z)),U.push(new _e(lt.x+be,lt.y-be,be,z)),U.push(new _e(lt.x-be,lt.y+be,be,z)),U.push(new _e(lt.x+be,lt.y+be,be,z)),xt+=4)}X&&(console.log("num probes: "+xt),console.log("best distance: "+We.d));var Le=[We.x,We.y];return Le.distance=We.d,Le}function xe(z,v){return v.max-z.max}function _e(z,v,X,B){this.x=z,this.y=v,this.h=X,this.d=function he(z,v,X){for(var B=!1,ne=1/0,L=0;L<X.length;L++)for(var P=X[L],H=0,ue=P.length,M=ue-1;H<ue;M=H++){var W=P[H],N=P[M];W[1]>v!=N[1]>v&&z<(N[0]-W[0])*(v-W[1])/(N[1]-W[1])+W[0]&&(B=!B),ne=Math.min(ne,ce(z,v,W,N))}return 0===ne?0:(B?1:-1)*Math.sqrt(ne)}(z,v,B),this.max=this.d+this.h*Math.SQRT2}function ce(z,v,X,B){var ne=X[0],L=X[1],P=B[0]-ne,H=B[1]-L;if(0!==P||0!==H){var ue=((z-ne)*P+(v-L)*H)/(P*P+H*H);ue>1?(ne=B[0],L=B[1]):ue>0&&(ne+=P*ue,L+=H*ue)}return(P=z-ne)*P+(H=v-L)*H}Ee.default&&(Ee=Ee.default),Mt.exports=G,Mt.exports.default=G},7935:(Mt,Xe,F)=>{F.r(Xe),F.d(Xe,{default:()=>Ee});class Ee{constructor(_e=[],he=G){if(this.data=_e,this.length=this.data.length,this.compare=he,this.length>0)for(let R=(this.length>>1)-1;R>=0;R--)this._down(R)}push(_e){this.data.push(_e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const _e=this.data[0],he=this.data.pop();return this.length--,this.length>0&&(this.data[0]=he,this._down(0)),_e}peek(){return this.data[0]}_up(_e){const{data:he,compare:R}=this,ce=he[_e];for(;_e>0;){const z=_e-1>>1,v=he[z];if(R(ce,v)>=0)break;he[_e]=v,_e=z}he[_e]=ce}_down(_e){const{data:he,compare:R}=this,ce=this.length>>1,z=he[_e];for(;_e<ce;){let v=1+(_e<<1),X=he[v];const B=v+1;if(B<this.length&&R(he[B],X)<0&&(v=B,X=he[B]),R(X,z)>=0)break;he[_e]=X,_e=v}he[_e]=z}}function G(xe,_e){return xe<_e?-1:xe>_e?1:0}},6979:(Mt,Xe,F)=>{function Ee(G){return function(){return G}}F.d(Xe,{Z:()=>Ee})},5831:(Mt,Xe,F)=>{F.d(Xe,{d:()=>X});const Ee=Math.PI,G=2*Ee,xe=1e-6,_e=G-xe;function he(B){this._+=B[0];for(let ne=1,L=B.length;ne<L;++ne)this._+=arguments[ne]+B[ne]}class ce{constructor(ne){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==ne?he:function R(B){let ne=Math.floor(B);if(!(ne>=0))throw new Error(`invalid digits: ${B}`);if(ne>15)return he;const L=10**ne;return function(P){this._+=P[0];for(let H=1,ue=P.length;H<ue;++H)this._+=Math.round(arguments[H]*L)/L+P[H]}}(ne)}moveTo(ne,L){this._append`M${this._x0=this._x1=+ne},${this._y0=this._y1=+L}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(ne,L){this._append`L${this._x1=+ne},${this._y1=+L}`}quadraticCurveTo(ne,L,P,H){this._append`Q${+ne},${+L},${this._x1=+P},${this._y1=+H}`}bezierCurveTo(ne,L,P,H,ue,M){this._append`C${+ne},${+L},${+P},${+H},${this._x1=+ue},${this._y1=+M}`}arcTo(ne,L,P,H,ue){if(ne=+ne,L=+L,P=+P,H=+H,(ue=+ue)<0)throw new Error(`negative radius: ${ue}`);let M=this._x1,W=this._y1,N=P-ne,be=H-L,Se=M-ne,U=W-L,Re=Se*Se+U*U;if(null===this._x1)this._append`M${this._x1=ne},${this._y1=L}`;else if(Re>xe)if(Math.abs(U*N-be*Se)>xe&&ue){let Ge=P-M,We=H-W,pe=N*N+be*be,xt=Ge*Ge+We*We,lt=Math.sqrt(pe),Le=Math.sqrt(Re),dt=ue*Math.tan((Ee-Math.acos((pe+Re-xt)/(2*lt*Le)))/2),Qe=dt/Le,gt=dt/lt;Math.abs(Qe-1)>xe&&this._append`L${ne+Qe*Se},${L+Qe*U}`,this._append`A${ue},${ue},0,0,${+(U*Ge>Se*We)},${this._x1=ne+gt*N},${this._y1=L+gt*be}`}else this._append`L${this._x1=ne},${this._y1=L}`}arc(ne,L,P,H,ue,M){if(ne=+ne,L=+L,M=!!M,(P=+P)<0)throw new Error(`negative radius: ${P}`);let W=P*Math.cos(H),N=P*Math.sin(H),be=ne+W,Se=L+N,U=1^M,Re=M?H-ue:ue-H;null===this._x1?this._append`M${be},${Se}`:(Math.abs(this._x1-be)>xe||Math.abs(this._y1-Se)>xe)&&this._append`L${be},${Se}`,P&&(Re<0&&(Re=Re%G+G),Re>_e?this._append`A${P},${P},0,1,${U},${ne-W},${L-N}A${P},${P},0,1,${U},${this._x1=be},${this._y1=Se}`:Re>xe&&this._append`A${P},${P},0,${+(Re>=Ee)},${U},${this._x1=ne+P*Math.cos(ue)},${this._y1=L+P*Math.sin(ue)}`)}rect(ne,L,P,H){this._append`M${this._x0=this._x1=+ne},${this._y0=this._y1=+L}h${P=+P}v${+H}h${-P}Z`}toString(){return this._}}function X(B){let ne=3;return B.digits=function(L){if(!arguments.length)return ne;if(null==L)ne=null;else{const P=Math.floor(L);if(!(P>=0))throw new RangeError(`invalid digits: ${L}`);ne=P}return B},()=>new ce(ne)}}}]);